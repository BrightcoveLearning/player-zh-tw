---
title: '布萊特灣球員樣本：背景視頻隨機播放列表
description: '在本主題中，您將學習如何使用播放列表來提供隨機選擇的背景視頻。'
parent: Code Samples
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
<section class="bcls-section">
<h2 id="Player_example">播放器示例</h2>
<!-- UPDATE description -->

<aside class="bcls-aside bcls-aside--information">提供此示例和相關代碼作為生產開發的指南。該代碼未經認證可用於生產用途，也未經官方支持。</aside>

<p>在播放器中，您會看到從播放列表中隨機選擇的視頻，這些視頻會繼續作為背景視頻播放。同樣，在每個視頻的開頭，每個視頻的標題和描述都顯示在背景視頻上。在此示例中，還顯示了一種阻止播放列表重複的方法。這是一種罕見的用例，您希望播放列表無限期地重複播放。</p>
<!-- UPDATE codepen here -->

<p data-height="570" data-theme-id="34967" data-slug-hash="oENWJj" data-default-tab="result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="Background Video Random Playlist" class="codepen">看筆<a href="https://codepen.io/team/rcrooks1969/pen/oENWJj/">背景視頻隨機播放列表</a>通過Brightcove學習服務（<a href="https://codepen.io/rcrooks1969"> @ rcrooks1969</a>） 上<a href="https://codepen.io">密碼筆</a>。</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><!-- UPDATE link to GitHub source -->

<h3>源代碼</h3>
          <p>觀看<a href="https://github.com/BrightcoveLearning/18541-background-video-random-playlist">GitHub上的完整解決方案</a>。</p>
</section>

<section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">使用代碼筆</h2></summary>
      <p>以下是一些有效使用上述 CodePen 的提示：</p>
      <ul>
        <li>通過單擊切換播放器的實際顯示<strong translate="No">結果</strong>按鈕。</li>
        <li>點擊<strong translate="No">HTML/CSS/JS</strong>按鈕以顯示其中一種代碼類型。</li>
        <li>在本文檔的後面部分，應用程序中使用的邏輯、流程和样式將在<a href="#Player/HTML_configuration">播放器/HTML 配置</a> , <a href="#Application_flow">申請流程</a>和<a href="#Application_styling">應用樣式</a>部分。遵循這些部分中的信息的最佳方法是：
          <ol>
            <li>點擊<strong translate="No">在 CODEPEN 上編輯</strong> CodePen 中的按鈕，並在一個瀏覽器/瀏覽器選項卡中提供代碼。</li>
            <li>在CodePen中，調整要顯示的代碼。您可以在CodePen中更改不同代碼段的寬度。</li>
            <li>觀看<a href="#Player/HTML_configuration">播放器/ HTML配置</a>，<a href="#Application_flow">申請流程</a>和/或<a href="#Application_styling">應用程式樣式</a>其他瀏覽器/瀏覽器標籤中的部分。現在，您將能夠按照代碼說明進行操作，同時查看代碼。</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Development_sequence">開發順序</h2></summary> 
      <p>這是推薦的開發順序：</p>
      <ol>
        <li>使用頁內嵌入播放器實現來測試播放器，插件和CSS的功能（如果需要CSS）</li>
        <li>將插件的JavaScript和CSS放入單獨的文件中以進行本地測試</li>
        <li>解決任何錯誤後，將插件代碼和CSS部署到服務器上</li>
        <li>使用Studio將插件和CSS添加到播放器</li>
        <li>如果您確定iframe實現更合適，請替換頁內嵌入播放器實現（在下一部分中詳細介紹）</li>
      </ol>
      <p>有關這些步驟的詳細信息，請查看<a href="/coding-topics/step-step-plugin-development.html">一步步：插件開發</a>指導。</p>
      <h3>iframe或頁內嵌入</h3>
      <p>在開發Brightcove Player的增強功能時，您需要確定代碼是否最適合iframe或頁內嵌入實施。最佳實踐建議是構建一個可與iframe實現配合使用的插件。使用iframe播放器的優點是：</p>
      <ul>
        <li>與現有的JavaScript和/或CSS無衝突</li>
        <li>自動響應</li>
        <li>iframe可簡化在社交媒體應用中的使用（或需要將視頻“傳播"到其他應用中的任何時候）</li>
      </ul>
      <p>儘管集成頁內嵌入播放器可能會更加複雜，但是有時您會圍繞該實現計劃代碼。概括地說，當包含頁面需要與播放器進行通信時，這種方法是最好的。具體來說，以下是一些示例：</p>
      <ul>
        <li>包含頁面中的代碼需要偵聽播放器事件並對其進行操作</li>
        <li>播放器使用包含頁面中的樣式</li>
        <li>iframe將導致應用邏輯失敗，例如從包含頁面的重定向</li>
      </ul>
      <p>即使最終實現未使用iframe代碼，您仍可以將頁內嵌入代碼與JavaScript插件和CSS單獨文件一起使用。這封裝了你的邏輯，以便您可以輕鬆地在多個玩家中使用它。</p>
    </details>
  </section>

<section class="bcls-section">
<h2 id="API/Plugin_resources_used">使用的API /插件資源</h2>
<!-- UPDATE table, remove unneeded columns -->

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>API方法</th>
			<th>API事件</th>
			<th>API屬性</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><a href="https://player.support.brightcove.com/references/guide-playlist-api.html#repeat">player.playlist.repeat（）</a></td>
			<td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#event:loadstart">加載啟動</a></td>
			<td><a href="/references/video-metadata-mediainfo.html">player.mediainfo</a></td>
		</tr>
		<tr>
			<td><a href="https://docs.brightcove.com/brightcove-player/current-release/module-events.html#.on">上（）</a></td>
			<td><a href="https://player.support.brightcove.com/references/guide-playlist-api.html#duringplaylistchange">在播放列表更改期間</a></td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td><a href="https://player.support.brightcove.com/references/guide-playlist-api.html#shuffle">player.playlist.shuffle（）</a></td>
			<td><a href="https://player.support.brightcove.com/references/guide-playlist-api.html#playlistitem">播放清單項目</a>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
	</tbody>
</table>
<!-- <aside class="bcls-aside bcls-aside--tip">This code sample uses one of the Brightcove REST APIs. To understand working with this API it is vital you read and understand the <a href="/getting-started/learning-guide-using-rest-apis.html">Learning Guide: Using the REST APIs</a> document.</aside> --></section>
<!-- UPDATE player and HTML configuration -->

<section class="bcls-section">
<h2 id="Player/HTML_configuration">播放器/ HTML配置</h2>

<p>本節詳細介紹了播放器創建過程中所需的任何特殊配置。此外，還介紹了除頁面內嵌入播放器實現代碼外，還必須添加到頁面的其他HTML元素。</p>

<h3>播放程式組態</h3>

<p>確保在創建播放器時實現了以下設置：</p>

<figure class="bcls-figure"><img class="bcls-image" alt="Set playlist and responsive" src="/assets/images/code-samples/brightcove-player-sample-background-video-playlist/player-settings1.png" />
  <figcaption class="bcls-caption--image">設定播放清單和回應式</figcaption>
  </figure>
  
  <figure class="bcls-figure"><img class="bcls-image" alt="Set playlist" src="/assets/images/code-samples/brightcove-player-sample-background-video-playlist/player-settings2.png" />
  <figcaption class="bcls-caption--image">設定播放清單</figcaption>
  </figure>
  
  <figure class="bcls-figure"><img class="bcls-image" alt="Set autostart and play when selected" src="/assets/images/code-samples/brightcove-player-sample-background-video-playlist/player-settings3.png" />
  <figcaption class="bcls-caption--image">設置自動啟動並在選中時播放</figcaption>
  </figure>
  
  <figure class="bcls-figure"><img class="bcls-image" alt="Set skip to next video in a playlist" src="/assets/images/code-samples/brightcove-player-sample-background-video-playlist/player-settings4.png" />
  <figcaption class="bcls-caption--image">設置跳到播放列表中的下一個視頻</figcaption>
  </figure>
  
<h3>其他HTML</h3>

<p>首先，頁內嵌入播放器代碼嵌套在兩個 HTML 中<code translate="No">div</code>元素。兩者<code translate="No">div</code> s 包含適當的樣式以填充整個瀏覽器窗口，並響應響應。接下來，另一個<code translate="No">div</code> element 用於定義放置在背景視頻上的文本應位於的位置。</p>
</section>
<!-- UPDATE application flow -->

<section class="bcls-section">
<h2 id="Application_flow">申請流程</h2>

<p>此應用程序背後的基本邏輯是：</p>

<ul>
	<li>適當設置播放器和包含重疊文本的框的樣式。</li>
	<li>在將播放列表放入播放器之前，請使用<code translate="No">duringplaylistchange</code>事件，使用<code translate="No">player.playlist.shuffle()</code>方法。</li>
	<li>將播放列表設置為無限期重複。</li>
	<li>在播放列表中每個視頻的負載上，顯示視頻標題和簡短描述。</li>
</ul>
<!-- UPDATE task 1 -->

<h3>隨機播放列表</h3>

<p>找到標有以下代碼的代碼：</p>

<pre>
<code class="language-javascript" translate="No">// +++ Shuffle (randomize) the videos +++</code></pre>

<p>這<code translate="No">on()</code>方法用於偵聽<code translate="No">duringplaylistchange</code>要調度的事件。這樣，您就可以在將播放列表放入播放器之前將其隨機化。如果您不這樣做，您將看到播放列表反映了洗牌（不同的視頻海報將快速顯示在播放器中），或者未隨機播放的播放列表中第一個視頻的海報將在播放器中閃爍。</p>

<h3>將播放列表設置為重複</h3>

<p>找到標有以下代碼的代碼：</p>

<pre>
<code class="language-javascript" translate="No">// +++ Set the playlist to repeat, but stop after 2 times through +++</code></pre>

<p>這<code translate="No">repeat()</code> Playlist API中的方法用於保持播放列表的無限期播放。如果您想停止重複使用<code translate="No">playlistitem</code>事件，每次播放播放列表中的視頻時都會調度該事件。在這種情況下，由於播放列表中有四個視頻，並且您希望在重複 2 次後停止播放列表，您將計算次數<code translate="No">playlistitem</code>被派遣。當計數器大於4（或大於或等於4，兩者都起作用）時，請停止重複播放列表。設置時<code translate="No">myPlayer.playlist.repeat(false);</code>，播放列表將完成所有視頻的當前循環。</p>
<!-- UPDATE task 2 -->

<h3>顯示標題和描述</h3>

<p>找到標有以下代碼的代碼：</p>

<pre>
<code class="language-javascript" translate="No">// ### Display the title and description ###</code></pre>

<p>事件處理程序用於等待<code translate="No">loadstart</code>事件。這樣做是因為<code translate="No">mediainfo</code>在調度該事件之前，不會填充對象。然後<code translate="No">name</code>和<code translate="No">description</code>被注入到HTML中。</p>
</section>
<!-- UPDATE CSS description -->

<section class="bcls-section">
<h2 id="Application_styling">應用程式樣式</h2>

<p>CSS執行以下任務：</p>

<ul>
	<li>使窗口的背景色為黑色。</li>
	<li>隱藏背景視頻播放器的播放器控件。</li>
	<li>禁用播放器上的指針事件。</li>
	<li>設置覆蓋文本的框的樣式。根據播放器的大小和顯示的內容量，可能需要調整這些樣式。</li>
	<li>樣式<code translate="No">h1</code>在重疊式文字中使用。</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Plugin_code">插件代碼</h2>

<p>通常，將JavaScript轉換為Brightcove Player插件時，需要進行名義上的更改。一項必需的更改是替換標準的使用<code translate="No">ready()</code>方法與定義插件的代碼。</p>

<p>這是可以與播放器一起使用的非常常用的JavaScript代碼開始：</p>

<pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this;
  ...
});</code></pre>

<p>您將更改第一行以使用標準語法來啟動Brightcove Player插件：</p>

<pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('pluginName', function(options) {
  var myPlayer = this;
  ...
});</code></pre>
<!-- UPDATE path to plugin's JavaScript -->

<p>如前所述，您可以在該文檔的相應GitHub存儲庫中看到該插件的JavaScript代碼：<a href="https://github.com/BrightcoveLearning/18541-background-video-random-playlist/blob/master/plugin/background-playlist-random.js"> background-playlist-random.js</a>。</p>

<h3>與播放器一起使用插件</h3>

<p>將插件的CSS和JavaScript文件存儲在Internet上可訪問的位置後，即可將其與播放器一起使用。在工作室的<strong>球員</strong>模塊你可以選擇一個播放器，然後在<strong>插件</strong>部分將 URL 添加到 CSS 和 JavaScript 文件，並添加<strong>姓名</strong>和<strong>選項</strong> , 如果需要選項。</p>

<aside class="bcls-aside bcls-aside--tip">有關使用 Studio 為玩家分配插件的更多信息，請參閱<a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">配置播放器插件</a>文檔。</aside>
</section>
</article>