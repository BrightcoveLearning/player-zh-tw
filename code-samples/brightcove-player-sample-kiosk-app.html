---
title: '布萊特灣球員樣本：信息亭應用程序
description: '在本主題中，您將學習如何使用<a href="https://apis.support.brightcove.com/cms/">內容管理系統 API</a>返回帳戶中的所有視頻。然後，視頻將連續循環播放。此代碼滿足無人值守計算機全天播放視頻的自助服務終端用例的需求。
parent: Code Samples
---

<article class="bcls-article">
  <h1>布萊特灣球員樣本：信息亭應用程序
  <summary></summary>
  <section class="bcls-section">
    <h2 id="Player_example">播放器示例</h2>
    <!-- UPDATE description -->
    
    <aside class="bcls-aside bcls-aside--information">提供此示例和相關代碼作為生產開發的指南。該代碼未經認證可用於生產用途，也未經官方支持。</aside>
    <p>播放器將無限循環地播放來自視頻對象陣列的視頻。</p>
    <!-- UPDATE codepen here -->
    
    <p data-height="456" data-theme-id="34967" data-slug-hash="brzorG" data-default-tab="result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="18186-kiosk-app" class="codepen">看筆<a href="https://codepen.io/team/rcrooks1969/pen/brzorG/">18186-kiosk-app</a>通過Brightcove學習服務（<a href="https://codepen.io/rcrooks1969"> @ rcrooks1969</a>） 上<a href="https://codepen.io">密碼筆</a>。</p>
    <script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><!-- UPDATE link to GitHub source -->
    
    <h3>源代碼</h3>
          <p>觀看<a href="https://github.com/BrightcoveLearning/18186-kiosk-app">GitHub上的完整解決方案</a>。</p>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">使用代碼筆</h2></summary>
      <p>以下是一些有效使用上述 CodePen 的提示：</p>
      <ul>
        <li>通過單擊切換播放器的實際顯示<strong translate="No">結果</strong>按鈕。</li>
        <li>點擊<strong translate="No">HTML/CSS/JS</strong>按鈕以顯示其中一種代碼類型。</li>
        <li>在本文檔的後面部分，應用程序中使用的邏輯、流程和样式將在<a href="#Player/HTML_configuration">播放器/HTML 配置</a> , <a href="#Application_flow">申請流程</a>和<a href="#Application_styling">應用樣式</a>部分。遵循這些部分中的信息的最佳方法是：
          <ol>
            <li>點擊<strong translate="No">在 CODEPEN 上編輯</strong> CodePen 中的按鈕，並在一個瀏覽器/瀏覽器選項卡中提供代碼。</li>
            <li>在CodePen中，調整要顯示的代碼。您可以在CodePen中更改不同代碼段的寬度。</li>
            <li>觀看<a href="#Player/HTML_configuration">播放器/ HTML配置</a>，<a href="#Application_flow">申請流程</a>和/或<a href="#Application_styling">應用程式樣式</a>其他瀏覽器/瀏覽器標籤中的部分。現在，您將能夠按照代碼說明進行操作，同時查看代碼。</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Development_sequence">開發順序</h2></summary> 
      <p>這是推薦的開發順序：</p>
      <ol>
        <li>使用頁內嵌入播放器實現來測試播放器，插件和CSS的功能（如果需要CSS）</li>
        <li>將插件的JavaScript和CSS放入單獨的文件中以進行本地測試</li>
        <li>解決任何錯誤後，將插件代碼和CSS部署到服務器上</li>
        <li>使用Studio將插件和CSS添加到播放器</li>
        <li>如果您確定iframe實現更合適，請替換頁內嵌入播放器實現（在下一部分中詳細介紹）</li>
      </ol>
      <p>有關這些步驟的詳細信息，請查看<a href="/coding-topics/step-step-plugin-development.html">一步步：插件開發</a>指導。</p>
      <h3>iframe或頁內嵌入</h3>
      <p>在開發Brightcove Player的增強功能時，您需要確定代碼是否最適合iframe或頁內嵌入實施。最佳實踐建議是構建一個可與iframe實現配合使用的插件。使用iframe播放器的優點是：</p>
      <ul>
        <li>與現有的JavaScript和/或CSS無衝突</li>
        <li>自動響應</li>
        <li>iframe可簡化在社交媒體應用中的使用（或需要將視頻“傳播"到其他應用中的任何時候）</li>
      </ul>
      <p>儘管集成頁內嵌入播放器可能會更加複雜，但是有時您會圍繞該實現計劃代碼。概括地說，當包含頁面需要與播放器進行通信時，這種方法是最好的。具體來說，以下是一些示例：</p>
      <ul>
        <li>包含頁面中的代碼需要偵聽播放器事件並對其進行操作</li>
        <li>播放器使用包含頁面中的樣式</li>
        <li>iframe將導致應用邏輯失敗，例如從包含頁面的重定向</li>
      </ul>
      <p>即使最終實現未使用iframe代碼，您仍可以將頁內嵌入代碼與JavaScript插件和CSS單獨文件一起使用。這封裝了你的邏輯，以便您可以輕鬆地在多個玩家中使用它。</p>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="API/Plugin_resources_used">使用的API /插件資源</h2>
    <!-- UPDATE table, remove unneeded columns -->
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>API方法</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#play">玩（）</a></td>
        </tr>
        <tr>
          <td><a href="/references/player-catalog.html#getVideo">catalog.getVideo（）</a></td>
        </tr>
        <tr>
          <td><a href="/references/player-catalog.html#load">catalog.load（）</a></td>
        </tr>
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/module-events.html#.on">上（）</a></td>
        </tr>
      </tbody>
    </table>
    <br/>
    <aside class="bcls-aside bcls-aside--tip">此代碼示例使用 CMS API。要了解如何從該API檢索視頻數據，請務必閱讀並理解<a href="/getting-started/learning-guide-using-rest-apis.html">學習指南：使用 REST API</a>文檔。</aside>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Get_credentials">獲取憑證</h2></summary>
      <p>要使用<span translate="No">內容管理系統 API</span>您將需要適當的憑據。</p>
      <p>在大多數情況下，獲取憑據的最簡單方法是通過 Studio Admin API 身份驗證部分（需要您帳戶的管理員權限）。看<a href="https://studio.support.brightcove.com/admin/managing-api-authentication-credentials.html">管理 API 身份驗證憑據</a>詳情。在大多數情況下，您可能只想獲得所有權限<span translate="No">內容管理系統 API</span>手術：</p>
      <figure class="bcls-figure"><img class="bcls-image" alt="CMS API Permissions" src="/assets/images/code-samples/brightcove-player-sample-kiosk-app/cms-permissions.png" />
        <figcaption class="bcls-caption--image">內容管理系統 API權限</figcaption>
      </figure>
      <p>如果Studio中沒有所需的權限，或者您希望直接從OAuth API獲取權限，請選擇<strong>獲取客戶憑證</strong>下面列出的文件。無論您選擇哪個選項，您都需要請求正確的操作權限。以下內容可與 cURL 或 Postman 一起使用以獲取 CMS API 的所有權限：</p>
      <pre class="line-numbers">
	<code class="language-json" translate="No">"operations": [
	  "video-cloud/video/all",
	  "video-cloud/playlist/all",
	  "video-cloud/sharing-relationships/all",
	  "video-cloud/notifications/all"
	]</code></pre>
      <ul>
        <li><a href="https://apis.support.brightcove.com/oauth/guides/oauth-create-client-credentials-using-curl.html">OAuth：使用cURL獲取客戶端憑據</a></li>
        <li><a href="https://apis.support.brightcove.com/oauth/guides/oauth-create-client-credentials-using-postman.html">OAuth：使用獲取客戶端憑據郵差</a></li>
      </ul>
    </details>
  </section>
  <!-- UPDATE player and HTML configuration -->
  
  <section class="bcls-section">
    <h2 id="Player/HTML_configuration">播放器/ HTML配置</h2>
    <p>本節詳細介紹了播放器創建過程中所需的任何特殊配置。此外，還介紹了除頁面內嵌入播放器實現代碼外，還必須添加到頁面的其他HTML元素。</p>
    <h3>播放程式組態</h3>
    <p>您為此示例創建的Brightcove Player不需要任何特殊配置。</p>
    <h3>其他HTML</h3>
    <p>沒有其他HTML元素添加到頁面。</p>
  </section>
  <!-- UPDATE application flow -->
  
  <section class="bcls-section">
    <h2 id="Application_flow">申請流程</h2>
    <p>此應用程序背後的基本邏輯是：</p>
    <ul>
      <li>使用<span translate="No">內容管理系統 API</span>獲取目標帳戶中的視頻總數。</li>
      <li>由於一次檢索不超過 25 個視頻的信息是最佳做法（<span translate="No">內容管理系統 API</span>不返回視頻對象，而是返回有關視頻的信息），從總計數中計算所需的調用次數。</li>
      <li>檢索25個視頻的信息時，請提取ID，然後使用“視頻雲"目錄檢索視頻對象。</li>
      <li>返回所有視頻對像後，播放第一個視頻。</li>
      <li>視頻結束時，播放下一個視頻。</li>
      <li>當播放最後一個視頻時，請從列表的開頭重新開始。</li>
    </ul>
    <p>此說明中添加了更多詳細信息
description:</p>
    <ol>
      <li>準備打電話給<span translate="No">內容管理系統 API</span>返回帳戶中視頻總數。</li>
      <li>使用<span translate="No">內容管理系統 API</span>為計數。此步驟將使用一個回調函數，這意味著該回調函數將作為參數傳遞給另一個第二個函數。然後在第二個函數的邏輯內部調用該回調函數。在這種情況下，回調函數僅從CMS API返回的對像中提取count屬性。</li>
      <li>確定需要調用的次數<span translate="No">內容管理系統 API</span>檢索所有視頻。此代碼遵循每次通話請求25個視頻的最佳做法。這是通過將所有視頻的計數除以25來完成的。</li>
      <li>創建一個<code translate="No">do-while</code>循環以迭代上一步中確定的所需呼叫數。此循環必須在視頻計數請求的回調函數中。</li>
      <li>在循環中，準備調用<span translate="No">內容管理系統 API</span>這將從帳戶中返回 25 個視頻。</li>
      <li>仍在循環中，使用<span translate="No">內容管理系統 API</span>對於視頻數據。此步驟將使用一個回調函數，這意味著該回調函數將作為參數傳遞給另一個第二個函數。然後在第二個函數的邏輯內部調用該回調函數。在這種情況下，回調函數將執行以下任務：
        <ul>
          <li>提取數據以為返回的視頻信息構建視頻ID數組。</li>
          <li>然後將視頻ID數組作為參數傳遞給另一個函數，該函數為每個ID檢索完整的視頻對象。返回的對象存儲在所有視頻對象的數組中。此步驟中也使用了回調函數。</li>
          <li>檢查何時返回所有視頻（當返回的視頻數與先前返回的計數匹配時）。滿足條件後，調用一個函數播放數組中的第一個視頻（第零個元素）。</li>
        </ul>
      </li>
      <li>設置事件監聽器以監聽<code translate="No">ended</code>事件。當每個視頻結束時播放下一個視頻，或者如果它是數組中的最後一個視頻，則播放第一個視頻。</li>
    </ol>
    <!-- UPDATE task 1 -->
    
    <h3>從CMS API請求視頻計數</h3>
    <p>找到標有以下代碼的代碼：</p>
    <pre>
	<code class="language-javascript" translate="No">// ### Setup for video count <span translate="No">CMS API</span> request ###</code></pre>
    <p>第一次致電<code translate="No">getCMSAPIData()</code>用於視頻總數。請注意，回調函數中的函數內部還有另一個調用<code translate="No">do-while</code>環形。</p>
    <!-- UPDATE task 2 -->
    
    <h3>在視頻播放結束時播放下一個視頻</h3>
    <p>找到標有以下代碼的代碼：</p>
    <pre>
	<code class="language-javascript" translate="No">// ### Get next video ###</code></pre>
    <p>使用<code translate="No">on('ended',...)</code>播放列表中的下一個視頻的邏輯。注意<code translate="No">currentlyPlayingIndex</code>跟踪播放的視頻。</p>
    <!-- UPDATE task 3 -->
    
    <h3>使用CMS API檢索數據</h3>
    <p>找到標有以下代碼的代碼：</p>
    <pre>
	<code class="language-javascript" translate="No">// ### Standard functionality for CSM API call ###</code></pre>
    <p>這是在<a href="/getting-started/learning-guide-using-rest-apis.html">學習指南：使用 REST API</a>文檔。</p>
    <!-- UPDATE task 3 -->
    
    <h3>提取視頻ID並檢索視頻對象</h3>
    <p>找到標有以下代碼的代碼：</p>
    <pre>
	<code class="language-javascript" translate="No">// ### Extract video IDs ###</code></pre>
    <p>這一系列函數獲取返回的視頻信息，提取ID，然後使用<span translate="No">內容管理系統 API</span>檢索播放器實際播放視頻內容所需的視頻對象。</p>
  </section>
  <!-- UPDATE CSS description -->
  
  <section class="bcls-section">
    <h2 id="Application_styling">應用程式樣式</h2>
    <p>播放器的唯一CSS尺寸。</p>
  </section>
  <section class="bcls-section">
    <h2 id="Plugin_code">插件代碼</h2>
    <p>通常，將JavaScript轉換為Brightcove Player插件時，需要進行名義上的更改。一項必需的更改是替換標準的使用<code translate="No">ready()</code>方法與定義插件的代碼。</p>
    <p>這是可以與播放器一起使用的非常常用的JavaScript代碼開始：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this;
  ...
});</code></pre>
    <p>您將更改第一行以使用標準語法來啟動Brightcove Player插件：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('pluginName', function(options) {
  var myPlayer = this;
  ...
});</code></pre>
    <!-- UPDATE path to plugin's JavaScript -->
    
    <p>如前所述，您可以在該文檔的相應GitHub存儲庫中看到該插件的JavaScript代碼：<a href="https://github.com/BrightcoveLearning/18186-kiosk-app/blob/master/plugin/kiosk-app.js"> kiosk-app.js</a>。</p>
    <h3>與播放器一起使用插件</h3>
    <p>將插件的CSS和JavaScript文件存儲在Internet上可訪問的位置後，即可將其與播放器一起使用。在工作室的<strong>球員</strong>模塊你可以選擇一個播放器，然後在<strong>插件</strong>部分將 URL 添加到 CSS 和 JavaScript 文件，並添加<strong>姓名</strong>和<strong>選項</strong> , 如果需要選項。</p>
    <aside class="bcls-aside bcls-aside--tip">有關使用 Studio 為玩家分配插件的更多信息，請參閱<a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">配置播放器插件</a>文檔。</aside>
  </section>
  <section class="bcls-section">
    <h2 id="proxy">代理代理代碼</h2>
    <p>為了構建您自己版本的示例應用程序，您必須創建並託管您自己的代理。（布萊特灣學習服務所使用的代理只接受來自布萊特灣域的請求。）一個示例代理，與我們使用的非常相似，但沒有阻止來自非 Brightcove 域的請求的檢查，可以在<a href="https://github.com/BrightcoveLearning/sample-proxy-apps">這個 GitHub 存儲庫</a> .您還將在那裡找到使用它的基本說明，以及圍繞代理構建應用程序的更詳細指南<a href="/getting-started/learning-guide-using-rest-apis.html">使用 REST API</a> .</p>
  </section>
</article>