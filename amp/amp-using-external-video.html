---
title:AMP 使用外部視頻
parent: amp
description: In this topic, you will learn how Accelerated Mobile Pages (AMP) can be used with Brightcove Player and an external, non-Video Cloud video.
---

<article class="bcls-article">
    <h1>使用外部視訊的 AMP </h1> 
    <summary>{{ page.description }} </summary>
    <section class="bcls-section">
        <aside class="bcls-aside bcls-aside--warning">本文件使用 AMP 搭配布萊特灣播放器，以及未攝入視訊雲端的視訊。如果您是視訊雲端客戶，請參閱<a href="/playback/amp-using-video-cloud-video.html">  AMP 使用視訊雲端視訊</a>。</aside> 
        <h2 id="Overview">概述</h2>
        <p>加速行動網頁是一個 Google 專案，旨在讓「在裝置和分銷平台之間建立一致的快速、美觀和高效能的網站和廣告。「您可以在 AMP 中使用 Brightcove 播放器，因為該項目包含一個<code translate="No">amp-brightcove</code>組件，允許發布商將布萊特灣播放器嵌入 AMP HTML 文檔中。此範例使用自訂外掛程式，該外掛程式接受透過<code translate="No">amp-brightcove</code>組件傳遞給外部 (非視訊雲端) 視訊的 URL，使用自訂<code translate="No">data-param-video-url</code>屬性。</p>
    </section>
    <section class="bcls-section">
        <h2 id="Sample">範例</h2>
        <p>以下是一個範例 AMP HTML 頁面，其中包括一個布萊特灣播放器。播放器正常運作，所以 HTML 是這個示例的有趣部分。本文件稍後會檢查 HTML 程式碼。</p>
        <p data-height="416" data-theme-id="dark" data-slug-hash="XZGQza" data-default-tab="html,result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="AMP-Brightcove Player-External Video" class="codepen">看筆<a href="https://codepen.io/team/rcrooks1969/pen/XZGQza/">AMP-Brightcove Player-外部視頻</a>通過 Brightcove 學習服務 ( <a href="https://codepen.io/rcrooks1969"> @rcooks1969</a>） 在<a href="https://codepen.io">代碼筆</a> .</p>
        <script async src="https://static.codepen.io/assets/embed/ei.js"></script>
        <aside class="bcls-aside bcls-aside--warning">請注意，由於 AMP 的運作方式，您必須在使用前仔細考慮其限制。例如：
            <ul>
                <li>AMP 有什麼 HTML 可以和不能在頁面上使用非常嚴格的規則。有關這方面的詳細信息可以在<a href="https://www.ampproject.org/docs/reference/spec">  AMP HTML 規範中查看</a>。</li>
                <li>Brightcove Analytics 不會正確報告 AMP 頁面的引用頁面-而是<code translate="No">referrer_domain</code>將空白，並<code translate="No">source_type</code>將記錄為<code translate="No">direct</code>。</li>
                <li>並非所有與 Brightcove 播放器進階頁面實作一起使用的屬性都有效<code translate="No">amp-brightcove</code>。</li>
                <li>AMP 不適用於受網域限制的玩家。</li>
            </ul>
        </aside> 
    </section>
    <section class="bcls-section">
        <h2 id="Resources_from_AMP">來自 AMP 的資源</h2>
        <p>AMP 項目開發了一個特殊的<code translate="No">amp-brightcove</code>組件，顯示布萊特灣播放器。該組件詳細說明在<a href="https://www.ampproject.org/docs/reference/components/amp-brightcove">安培亮口文件中。</a> </p>
        <p>AMP 提供了一個示例<code translate="No">amp-brightcove</code>實現，詳細信息在以下文檔中：</p>
        <ul>
            <li><a href="https://ampbyexample.com/components/amp-brightcove/">安培海灣</a> </li>
            <li><a href="https://github.com/ampproject/amp-by-example/blob/master/src/20_Components/amp-brightcove.html">逐個範例</a> </li>
            <li><a href="https://ampbyexample.com/playground/#url=https%3A%2F%2Fampbyexample.com%2Fcomponents%2Famp-brightcove%2Fsource%2F"> AMP 遊樂場</a> </li>
        </ul>
    </section>
    <section class="bcls-section">
        <h2 id="Player_configuration">播放程式組態</h2>
        <p>布萊特灣提供了一個外掛程式，以加強與布萊特灣玩家一起使用 AMP 的效果。該插件增加了對 AMP 的視頻接口 API 的支持，它啟用了一些高級功能：</p>
        <ul>
            <li><strong>與擴充分析整合</strong>：允許根據 AMP 頁面網域追蹤第三方分析的檢視次數。</li>
            <li><strong>與安培綁定集成</strong>：播放可由 AMP 頁面中的其他元素控制。</li>
        </ul>
        <p>沒有插件的玩家仍然在 AMP 中工作，但沒有該功能。</p>
        <h3><strong>外掛程式安裝</strong> </h3>
        <aside class="bcls-aside bcls-aside--warning">您必須安裝外掛程式。在過去的 AMP 將在不添加插件的情況下工作。這不再是真的。</aside> 
        <p>與所有 Brightcove 播放器插件一樣，您需要插件的名稱和 URL 到插件的 JavaScript，這是這裡提供的（這個插件的使用不需要 CSS 文件）：</p>
        <h4>外掛程式名稱</h4>
        <pre class="line-numbers">
  <code class="language-html" translate="No">ampSupport</code>   </pre>
        <h4>網址</h4>
        <pre class="line-numbers">
  <code class="language-html" translate="No">//players.brightcove.net/videojs-amp-support/1/videojs-amp-support.js</code>   </pre>
    </section>
    <section class="bcls-section">
        <h2 id="HTML_page_code_examination">HTML 網頁代碼檢查</h2>
        <p>從上面的 CodePen 示例 HTML 頁面代碼如下所示（插件代碼在下一節中詳細說明）。代碼的完整解釋由 AMP 在鏈接到上面的文檔中提供。在下面的列表中有一些需要注意的技巧/陷阱：</p>
        <ul>
            <li>第十四行：您可以新增單一<code translate="No">style</code>標籤，但必須包含<code translate="No">amp-custom</code>屬性。</li>
            <li>第 26 行：不要美化代碼。樣板 CSS 是需要由 AMP 提供。</li>
            <li>第 42 行：外部視訊的 URL 會在此處傳遞。請記住，由於名稱將從 iframe 的<code translate="No">src</code>    URL 中檢索，所以名稱將是<code translate="No">videoUrl</code>。</li>
            <li>第 43 行：使用外部視訊時，<code translate="No">data-video-id</code>必須存在，但未指定值。</li>
            <li>第 44 行：<code translate="No">width</code>和<code translate="No">height</code>屬性決定了嵌入在自適應版面中的播放器的外觀比例。</li>
        </ul>
        <pre class="line-numbers" data-start="1">
  <code class="language-html" translate="No">&lt;!--
    ## Introduction
  
    The `amp-brightcove` component allows embedding a Brightcove
    [Video Cloud](https://www.brightcove.com/en/online-video-platform) or
    [Perform](https://www.brightcove.com/en/perform) player.
  --&gt;
  &lt;!-- --&gt;
  &lt;!doctype html&gt;
  &lt;html ⚡&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;amp-brightcove&lt;/title&gt;
    &lt;style amp-custom&gt;
      .player-container {
        width: 640px;
        height: 360px;
      }
    &lt;/style&gt;
    &lt;script async src="https://cdn.ampproject.org/v0.js"&gt;&lt;/script&gt;
    &lt;!-- ## Setup --&gt;
    &lt;!-- Import the Brightcove component in the header. --&gt;
    &lt;script async custom-element="amp-brightcove" src="https://cdn.ampproject.org/v0/amp-brightcove-0.1.js"&gt;&lt;/script&gt;
    &lt;meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"&gt;
    &lt;link rel="canonical" href="https://ampbyexample.com/components/amp-brightcove/"&gt;
    &lt;style amp-boilerplate&gt;body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}&lt;/style&gt;&lt;noscript&gt;&lt;style amp-boilerplate&gt;body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}&lt;/style&gt;&lt;/noscript&gt;
  
  
  &lt;/head&gt;
  &lt;body&gt;
  
    &lt;!-- ## Basic Usage --&gt;
    &lt;!--
      A responsive brightcove video. The required data is `data-account` and `data-video-id`. Other
      supported parameters are `data-player-id`, `data-embed` and `data-playlist-id`.
    --&gt;
    &lt;div class="player-container"&gt;
      &lt;amp-brightcove
        data-account="3676484087001"
        data-player-id="ByrhJWAPf"
        layout="responsive"
        data-param-video-url="//solutions.brightcove.com/bcls/videos/calm-day-oregon-coast.mp4"
        data-video-id
        width="16" height="9"&gt;
      &lt;/amp-brightcove&gt;
    &lt;/div&gt;
  
  
  &lt;/body&gt;
  &lt;/html&gt;</code>   </pre>
    </section>
    <section class="bcls-section">
        <h2 id="Plugin_code_examination">外掛程式碼檢查</h2>
        <p>AMP 函數的方式是該<code translate="No">amp-brightcove</code>組件創建了一個 iframe 實現布萊特灣播放器。在 iframe 的 URL 中將是自定義屬性，如下所示：</p>
        <pre class="line-numbers">
  <code class="language-html" translate="No">&lt;iframe frameborder="0" allowfullscreen="true" src="https://players.brightcove.net/3676484087001/ByrhJWAPf_default/index.html?<span class="bcls-highlight">videoUrl=%2F%2Fsolutions.brightcove.com%2Fbcls%2Fvideos%2Fcalm-day-oregon-coast.mp4"</span>; class="i-amphtml-fill-content" kwframeid="1"&gt;&lt;/iframe&gt;</code>   </pre>
        <p>如果您在 iframe 代碼中滾動，您將看到此處顯示的查詢字符串：</p>
        <figure class="bcls-figure"><img class="bcls-image" alt="AMP iframe source" src="/assets/images/amp/amp-external-amp-url.png" /></figure>
        <p>請注意，查詢字串名稱為<code translate="No">videoUrl</code>。另請注意，該網址已經被 URL 編碼。這兩個問題都會反映在插件代碼中，如下所示：</p>
        <ul>
            <li>第二十一至三十八號線：尋找與查詢字串相關聯的值的輔助函數，作為參數傳遞給函數。</li>
            <li>第 7 行：使用輔助函數檢索<code translate="No">videoUrl</code>查詢字符串的值。</li>
            <li>第 8 行：使用 JavaScript 的<code translate="No">decodeURIComponent()</code>方法來取得影片的有效網址。</li>
            <li>第 11 至 14 號線：使用解碼的 URL 並將視訊放在播放器中。如果您打算使用 MP4 以外的視頻格式，則需要傳遞正確的<code translate="No">type</code>值，或者編寫邏輯來讀取視頻的擴展名並指定正確的值。</li>
            <li>第七至十九號線：當然不是必需的，但如果您希望視頻在啟動時播放，則可以使用此代碼。</li>
        </ul>
        <pre class="line-numbers">
  <code class="language-javascript" translate="No">videojs.registerPlugin('ampPassVideo', function() {
    var myPlayer = this,
      encodedVideoQueryParam,
      decodedVideoQueryParam;
  
    // Get the query string and un-URL encode it
    encodedVideoQueryParam = getQuerystring('videoUrl');
    decodedVideoQueryParam = decodeURIComponent(encodedVideoQueryParam);
  
    // Load the video into the player
    myPlayer.src({
      'type': 'video/mp4',
      'src': decodedVideoQueryParam
    });
  
    // On loadedmetadata event, play the video
    myPlayer.on('loadedmetadata', function(){
      myPlayer.play();
    });
  
    /*
     * usage: foo = getQuerystring("bctid", null);
     * foo will be equal to value of query param bctid
     * note that the default_ parameter is what you will get back
     * if the key isn’t found
     */
    function getQuerystring(key, default_) {
      var regex, qs;
      if (default_ == null) default_ = "";
      key = key.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
      regex = new RegExp("[\\?&amp;]" + key + "=([^&amp;#]*)");
      qs = regex.exec(window.location.href);
      if (qs === null) {
        return default_;
      } else {
        return qs[1];
      }
    }
  });</code>   </pre>
        <p>您可以使用<a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">  Studio </a>或播放器管理 API 將此插件分配給您的播放器。</p>
    </section>
    <section class="bcls-section">
        <h2 id="Features">功能</h2>
        <p>雖然 AMP 文件中討論了一些特別重要的功能，這裡有一些特別重要的功能：</p>
        <!-- These are features that are common to both Video Cloud and external videos -->
        <!-- THIS SECTION CAN BE ADDED TO THEN COPIED TO SIMILAR SECTION IN Video Cloud VIDEO FEATURES SECTION -->

        <h3>自訂參數</h3>
        <p>您可能想要將其他資訊傳遞給您的播放器，以便您的外掛程式存取。您可以通過在必須命名的<code translate="No">amp-brightcove</code>元素上添加額外的屬性來完成此操作<code translate="No">data-param-*</code>，其中<code translate="No">*</code>是您的財產的名稱。</p>
        <p>參數被傳遞為駱駝套裝的屬性名稱附加到播放器 URL。鍵和值是 URL 編碼的。例如：</p>
        <ul>
            <li><code translate="No">data-param-language="de"</code>變成<code translate="No">&amp;language=de</code>   </li>
            <li><code translate="No">data-param-ad-vars="key:val;key2:val2"</code>變成<code translate="No">&amp;adVars=key%3Aval%3Bkey2%3Aval2</code>   </li>
        </ul>
        <h3>外部反向連結支援</h3>
        <p>布萊特灣播放器 v6.25.0+ 支持在 iframe 上設置任意引用。AMP 組件現在支持通過其自己的反向連結傳遞給玩家，通過添加一個<code translate="No">referrer="EXTERNAL_REFERRER"</code>屬性它們的放大亮度嵌入。</p>
        <p>外部參照者是 AMP 自己的宏-有關更多信息，請參閱<a href="https://github.com/ampproject/amphtml/blob/19135a3aac7813a9ff263a9f863fe35aeb316582/spec/amp-var-substitutions.md#external-referrer">  https://github.com/ampproject/amphtml/blob/19135a3aac7813a9ff263a9f863fe35aeb316582/spec/amp-var-substitutions.md#external-referrer </a>。</p>
        <h3>AMP 分析</h3>
        <p>一個<strong>amp-analytics</strong>組件可用於 AMP 文檔以跟踪數據以進行任意分析。如果發佈商希望包含視頻活動，他們現在可以這樣做。</p>
        <p>AMP 關於 AMP 分析語法的文檔（這很麻煩）在這裡：<a href="https://www.ampproject.org/docs/reference/components/amp-analytics">  https://www.ampproject.org/docs/reference/components/amp-analytics </a>。特別是視訊分析：<a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/amp-video-analytics.md">  https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/amp-video-analytics.md </a>。</p>
        <p>有一個範例可用，追蹤到<strong>  example.com，</strong>因此您會在網路索引標籤中看到信標為錯誤：<a href="http://solutions.brightcove.com/bclifford/ampexamples/analytics.html">  http://solutions.brightcove.com/bclifford/ampexamples/analytics.html </a>。</p>
        <h3>AMP 繫結</h3>
        <p>AMP 綁定是 AMP 的 API 組件之間的交互。在基本層面上，它允許您擁有播放器外部的東西來控制播放。例如，以下代碼將播放視頻，其中<code translate="No">myPlayer</code>是個<code translate="No">id</code> amp-brightcove 播放器。</p>
        <pre class="line-numbers">
    <code class="language-html" translate="No">&lt;button on="tap:myPlayer.play"&gt;Play&lt;/button&gt;</code>   </pre>
        <p>AMP 不信任視頻事件，所以你目前無法做一些更有用的事情，例如在視頻端。這裡有一個例子：<a href="http://solutions.brightcove.com/bclifford/ampexamples/bind.html">  http://solutions.brightcove.com/bclifford/ampexamples/bind.html </a>。</p>
    </section>
</article>