---
title:以程式設計方式將視訊
parent: 'Publishing Videos &amp; Players'
description: In this topic, you will learn how to dynamically change the video in the player. To do this you will programmatically change the player instances. This document shows various approaches to changing the video in the player.
---
 <h1>指派給播放程式以程式設計方式將視訊指派給播放程式</h1> 
<article class="bcls-article">
  <summary>{{ page.description }} </summary>
    <aside class="bcls-aside bcls-aside--information">本文件中的內容僅適用於視訊雲端。</aside> 
  <section class="bcls-section">
    <h2 id="urldynamicvideo">透過網址設定視訊 ID</h2>
    <p>您可以使用 URL 實作，並動態變更播放的視訊。要做到這一點，您可以在表單中的 URL 末尾使用查詢字符串<code translate="No">?videoId=  <em>YOUR_VIDEO_ID</em></code>如下列範例所示。</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">https://players.brightcove.net/..._default/index.html?videoId=2114345471001</code>   </pre>
  </section>
  <section class="bcls-section">
    <h2 id="refids">使用參考 ID</h2>
    <p>在本文檔中使用視頻 ID 的所有示例中<strong>參考編號</strong>可以替換。如果您使用參照 ID，則必須在該標識符前面加上<strong>  ref: </strong>。例如，第一個 URL 使用視訊 ID，而第二個 URL 則使用參照 ID。</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">https://players.brightcove.net/..._default/index.html?videoId=2114345471001
https://players.brightcove.net/..._default/index.html?videoId=ref:1234abcd</code>   </pre>
  </section>
  <section id="tag" class="bcls-section">
    <h2>通過標籤屬性設置視頻 ID</h2>
    <p>頁內嵌程式碼包含標<code translate="No">&lt;video&gt;</code>籤。視訊的視訊雲端 ID 與<code translate="No">data-video-id</code>    HTML 5 <strong>資料</strong>屬性相關聯。</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js
  data-account="1507807800001"
  data-player="dadff0fb-5635-4eac-a1b8-ab8c37a72be9"
  data-embed="default"
  <span class="bcls-highlight">data-video-id="2114345471001"</span>
  class="video-js"
  controls&gt;&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/1507807800001/dadff0fb-5635-4eac-a1b8-ab8c37a72be9_default/index.min.js"&gt;&lt;/script&gt;</code>   </pre>
    <aside class="bcls-aside bcls-aside--tip">注意：當播放程式執行 JavaScript 時，它會從<code translate="No">data-video-id</code>屬性讀取視訊 ID。但是，它只有在啟動時才會這樣做。使用 JavaScript <code translate="No">setAttribute()</code>方法變更值並不會導致播放程式載入視訊。若要在播放程式載入後變更視訊，您應該使用下列說明的 JavaScript 方法。</aside> 
  </section>
  <section class="bcls-section">
    <h2 id="setvideousingjavascript">使用 JavaScript 設定視訊</h2>
    <p>在許多情況下，您希望使用者互動控制要播放的視訊。若要達成此目的，您可以使用 JavaScript 和播放程式目錄的<code translate="No">getVideo()</code>和<code translate="No">load()</code>方法來動態擷取和播放所需的視訊。</p>
    <ul>
      <li>第 1-8 行：沒有<code translate="No">data-video-id</code>屬性值的進階 (頁內嵌) 程式碼。</li>
      <li>第十一、七行：使用此<code translate="No">ready()</code>方法確定玩家已準備好採取行動。</li>
      <li>第十二行：將播放器 (稱為函數<code translate="No">this</code>中所述) 與變數產生關聯。</li>
      <li>第 13,16 號線：使用目錄的<code translate="No">getVideo()</code>方法，使用 Video Cloud ID 和回呼函數做為參數。</li>
      <li>第 15 行：使用目錄的<code translate="No">load()</code>方法載入視訊並播放影片。</li>
    </ul>
    <pre class="line-numbers">
<code class="language-html" translate="No">  &lt;video-js id="myPlayerID"
    data-account="1507807800001"
    data-player="3bc25a34-086a-4060-8745-dd87af3d53b4"
    data-embed="default"
    data-video-id=""
    class="video-js"
    controls&gt;&lt;/video-js&gt;
  &lt;script src="https://players.brightcove.net/1507807800001/3bc25a34-086a-4060-8745-dd87af3d53b4_default/index.min.js"&gt;&lt;/script&gt;

  &lt;script type="text/javascript"&gt;
    videojs.getPlayer('myPlayerID').ready(function() {
      var myPlayer = this;
      myPlayer.catalog.getVideo('2114345471001', function(error, video) {
        //deal with error
        myPlayer.catalog.load(video);
      });
    });
  &lt;/script&gt;</code>   </pre>
  </section>
  <section class="bcls-section">
    <h2 id="setvideoiniframe">在 iframe 中設置視頻</h2>
    <p>要將視頻指定給 iframe 中託管的播放器，您可以通過 URL 的查詢字符串傳遞視頻 ID（或前面提到的參考 ID）。例如：</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">  &lt;iframe src='https://players.brightcove.net/.../index.html<span class="bcls-highlight">?videoId=2114345471001'</span>
    allowfullscreen
    webkitallowfullscreen
    mozallowfullscreen&gt;&lt;/iframe&gt; </code>   </pre>
    <p>您也可以使用 JavaScript 來更改 iframe <code translate="No">src</code>屬性的查詢字符串，以告訴播放器要播放哪些新視頻。</p>
    <ul>
      <li>第 2 條線：iframe 實現代碼。請注意查詢字符串（後面的文本<strong>？</strong>字元) 提供要播放的視訊 ID。</li>
      <li>第 5 行：定義當視頻應該改變被調用的函數。</li>
      <li>第 6 行：使用 JavaScript 的<code translate="No">getElementsByTagName()</code>方法將標<code translate="No">&lt;iframe&gt;</code>籤放入變數中。請注意，該方法返回頁面上所有匹配元素的數組，並且由於您正在使用頁面上的第一個（也是唯一的）iframe 標籤，因此可以使用數組的第零個元素。</li>
      <li>第 7 行：創建一個查詢字符串，將替換舊的。這定義了要播放的新視頻。</li>
      <li>第 8 行：分配給一個變量<code translate="No">src</code>的財產<code translate="No">iframe</code>標籤。</li>
      <li>第 9 行：擷取播放程式的來源，減去舊的查詢字串。</li>
      <li>第 10 行：結合播放程式來源與新視訊的查詢字串定義，建立<code translate="No">src</code>屬性的新值。</li>
      <li>第 11 行：將新的來源/視訊資訊指定給<code translate="No">&lt;iframe&gt;</code>標籤的<code translate="No">src</code>屬性。</li>
    </ul>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;iframe src='https://players.brightcove.net/...c_default/index.html?videoId=4341341161001'
    allowfullscreen webkitallowfullscreen mozallowfullscreen&gt;&lt;/iframe&gt;

&lt;script type="text/JavaScript"&gt;
  function changeVideo() {
    var iframeTag = document.getElementsByTagName("iframe")[0],
      newVideo = "?videoId=3742256815001",
      theSrc = iframeTag.src,
      srcWithoutVideo = theSrc.substring( 0, theSrc.indexOf( "?" ) ),
      newSrc = srcWithoutVideo + newVideo;
    iframeTag.src = newSrc;
  }
&lt;/script&gt;  </code>   </pre>
  </section>
</article>