---
title: '批量更新 Brightcove 默認播放器'
description: '在本主題中，您將學習如何使用 curl、shell 腳本和終端從多個帳戶更新 Brightcove 默認播放器。'
parent: 'Publishing Videos &amp; Players'
---


<!-- 
  This content appears on:
  
  https://apis.support.brightcove.com/player-management/code-samples/bulk-updating-brightcove-default-player.html

  https://player.support.brightcove.com/publish/bulk-updating-brightcove-default-player.html

  If you update in one place, you MUST update it in all!
 -->

 <h1>{{ page.title }}</h1>
 <article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">介紹</h2>
    <p>本文檔中顯示的 curl 語句將遍歷多個帳戶並僅更新<strong>Brightcove 默認播放器</strong>在這些帳戶中轉換為所需的 Brightcove Player 版本。作為用於執行更新和發布的curl語句的先決條件，它顯示瞭如何獲取在curl語句中使用的訪問令牌。</p>
  </section>
  <section class="bcls-section">
    <h2 id="section-name">獲取訪問令牌</h2>
    <p>您需要有一個提供的訪問令牌<strong>播放器讀/寫</strong>訪問您要使用 curl 語句的所有帳戶。在Studio中，從<strong>行政</strong>下拉選擇<strong>API認證</strong>。註冊一個新的應用程序並選擇所需的帳戶。為了<strong>公開的Brightcove API</strong>選擇<strong>播放器&gt;讀/寫</strong>。</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="API Authentication UI" src="/assets/images/publish/api-authentication-ui.png" /></figure>
    <p>保存後，複製<strong>客戶編號</strong>和<strong>客戶機密</strong>。</p>
    <p>有關此過程的更多信息，請參見<a href="https://studio.support.brightcove.com/admin/managing-api-authentication-credentials.html">生成訪問令牌</a>文檔。</p>
    <p>現在，要獲取訪問令牌，請在此示例中使用客戶端ID和客戶端密碼：<a href="https://apis.support.brightcove.com/oauth/code-samples/oauth-api-sample-get-access-token.html">OAuth API示例：獲取訪問令牌</a>。請記住，由於訪問令牌僅在5分鐘內有效，因此您可能不得不重複使用此示例。</p>
  </section>
  <section class="bcls-section">
    <h2 id="curl_statement">捲曲聲明</h2>
    <p>創建一個文件夾，您將在其中創建幾個文件，並從中運行Terminal的腳本。在該文件夾中創建一個名為<strong>accountList.txt</strong>，然後在文件中簡單地複制並粘貼所有<strong>帳號ID</strong>您要更新的<strong>Brightcove默認播放器</strong>。</p>
    <p>現在創建另一個名為<strong>批量更新</strong>。將以下curl語句放入文件中：</p>
    <pre class="line-numbers">
<code class="language-bash" translate="No">#!/bin/bash

#Loop through publisher IDs in accountlist.txt
while read -r ACCOUNTID; do
    echo $ACCOUNTID

    #Update
    curl -X PATCH "https://players.api.brightcove.com/v1/accounts/$ACCOUNTID/players/default/configuration" \
    -H "Authorization: Bearer YOUR_ACCESS_TOKEN_HERE" \
    -H 'Content-Type: application/json' \
    -d '{"player":{"template":{"version":"6.34.3"}}}'

    #Publish
    curl -X POST "https://players.api.brightcove.com/v1/accounts/$ACCOUNTID/players/default/publish" \
    -H "Authorization: Bearer YOUR_ACCESS_TOKEN_HERE" \
    -H 'Content-Type: application/json' \
    -d '{"comment": "Updated to v6"}'

    #Wait 1 second then loop
    sleep 1
done &lt;accountList.txt</code></pre>
    <p>當然，您將需要替換兩個實例<strong>YOUR_ACCESS_TOKEN_HERE</strong>與您的實際訪問令牌。如果自您生成訪問令牌以來已超過5分鐘，請重新運行示例以獲取新令牌。另外，您可以使用任何版本的播放器，只需更新使用的版本，<strong> 6.34.3</strong>。</p>
    <p>最後，在包含兩個文件的文件夾中打開一個Terminal實例。要運行腳本，請輸入：</p>
    <pre class="line-numbers">
<code class="language-bash" translate="No">bash ./bulk-update.sh</code></pre>
    <p>該腳本既更新播放器版本，又發布播放器。</p>
  </section>
</article>