---
title:“Brightcove Player 的密鑰/許可證保護”
description:"In this topic, you will learn how to configure Brightcove Player to use Key/license protection associated with Brightcove Playback Restrictions."
parent: Playback
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  
  <br/>
  <aside class="bcls-aside bcls-aside--tip">此功能適用於有權訪問 Brightcove 播放限制的有限可用性階段的一組特定客戶。</aside>
  
  <section class="bcls-section">
    <h2 id="Introduction">介紹</h2>

    <p>當將動態傳遞與受DRM保護或HTTP實時流加密（HLSe）內容一起使用時，密鑰/許可證保護可提供更高級別的安全性。可以使用簽名對許可證請求進行身份驗證<a href="https://general.support.brightcove.com/developer/create-json-web-token.html">JSON Web令牌（JWT）</a>。一旦視頻已加載到播放器並選擇了源，則在請求視頻許可時使用令牌。</p>
    <p>如果您不熟悉此功能，請參閱<a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html">概述：Brightcove播放限制</a>文檔。</p>
  </section>

  <section class="bcls-section">
    <h2 id="Overview">概述</h2>
    <p>要配置Brightcove Player進行密鑰/許可證保護，您在對視頻進行目錄請求時將傳遞一個令牌參數。為了幫助您理解下一節中的代碼，請查看以下文檔中的概念：</p>
    <ul>
      <li><a href="https://general.support.brightcove.com/developer/create-json-web-token.html">創建一個<span translate="No">JSON 網絡令牌</span> (智威湯遜)</a></li>
      <li><a href="https://support.brightcove.com/concepts-using-javascript-promises">概念：使用 JavaScript 承諾</a></li>
      <li><a href="https://support.brightcove.com/player-catalog#Catalog_parameters_object">目錄參數</a></li>
      <li><a href="https://support.brightcove.com/configuring-brightcove-player-drm">為DRM配置Brightcove Player</a></li>
    </ul>
  </section>

  <section class="bcls-section">
    <h2 id="Using_an_auth_token">使用身份驗證令牌</h2>
    <p>要使用密鑰/許可證保護，請將字符串令牌作為<a href="https://player.support.brightcove.com/references/player-catalog.html">球員目錄</a>對象，使用屬性名稱<code translate="No">bcovAuthToken</code>。</p>
    <p>此方法適用於DRM和HLSe內容。播放器將檢測從 Playback API 加載的源類型並為該源提供正確的實現。</p>
    <aside class="bcls-aside bcls-aside--information">此實現需要播放器版本<strong>6.33.0</strong>或以後。如果使用 DRM，您將需要<a href="https://support.brightcove.com/configuring-brightcove-player-drm#Changelog">數字版權管理插件</a>版本<strong>5.5.0</strong>或以後。

    <h3>腳步</h3>
    <ol class="bcls-tasklist">
      <li>創建簽名<a href="https://general.support.brightcove.com/developer/create-json-web-token.html">JSON Web令牌（JWT）</a>。</li>
      <li>
        <p>在視頻請求中包含此令牌。</p>
        <p>此示例實現代碼使用<a href="https://player.support.brightcove.com/references/player-catalog.html#get_method">catalog.get（）</a>提供令牌時請求視頻的方法。</p>
    <aside class="bcls-aside bcls-aside--information">確保不包括<code translate="No">data-video-id</code>中的參數<code translate="No">&lt;video-js&gt;</code>標籤。</aside>
<pre class="line-numbers">
  <code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
    data-account=&quot;1507807800001&quot;
    data-player=&quot;default&quot;
    data-embed=&quot;default&quot;
    controls
    data-application-id&gt;&lt;/video-js&gt;
  &lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;
  
  &lt;script&gt;
    (function() {
      var myPlayer = videojs.getPlayer('myPlayerID');
  
      myPlayer.catalog.get({
        type: 'video',
        id: '6015247091001',
        <span class="bcls-highlight">bcovAuthToken:</span> '<span class="bcls-input">your jwt token</span>'
      })
        .then(function(videoReturned){
          myPlayer.catalog.load(videoReturned);
        })
        .catch(function(err){
          console.log('err:', err);
        });
    })();
  &lt;/script&gt;</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="configuring_server_side_ads_SSAI">配置服務器端廣告（SSAI）</h2>
    <p>如果將密鑰/許可證保護與SSAI一起使用，則需要在目錄參數對像中包括一個附加參數，名為<code translate="No">adConfigId</code>。 </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001',
      bcovAuthToken: '<span class="bcls-input">your jwt token</span>',
      <span class="bcls-highlight">adConfigId:</span> '<span class="bcls-input">your ad configuration id</span>'
    })
      .then(function(videoReturned){
        myPlayer.catalog.load(videoReturned);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
  </section>

  <section class="bcls-section">
    <h2 id="Using_a_custom_implementation">使用自定義實現</h2>
    <p>您可能正在使用自定義實現，而您沒有<code translate="No">bcovAuthToken</code>用<a href="https://support.brightcove.com/player-catalog#get_method">目錄.get()</a>方法請求。如果您使用自己的播放器或第三方播放器，則可以使用以下方法之一將令牌傳遞到許可請求中：</p>
    <ul>
      <li>
        HTTP標頭：<code translate="No">BCOV-Auth</code>（HLSe不支持）
      </li>
      <li>
        曲奇餅：<code translate="No">bcov-auth</code>（HLSe不支持）
      </li>
      <li>
        查詢參數：<code translate="No">bcov-auth</code>（僅適用於HLSe）必須附加到主清單URL而不是許可證URL
      </li>
    </ul>
    <p>
      這是顯示如何設置<code translate="No">source.emeHeaders['BCOV-Auth']</code>視頻對像上的令牌屬性。這插入了<code translate="No">emeHeader</code>在目錄請求之後的每個來源上。
    </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001'
    })
    .then(function(video){
      sources=video.sources;

      for (let i = 0; i &lt; sources.length; i++) {
        const source = sources[i];

        // Only add the auth token as an eme header for DRM content
        if (<span class="bcls-input">your jwt token</span> &amp;&amp; source.key_systems) {
          source.emeHeaders = {
              'BCOV-Auth': <span class="bcls-input">your jwt token</span>
            };
        }
      }
        myPlayer.catalog.load(video);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
    <!-- <p>
      For more details about working with MPEG-DASH, see the <a href="https://support.brightcove.com/creating-dash-drm-manifest-brightcove-player">Creating a DASH DRM Manifest for the Brightcove Player</a> document.
    </p> -->

  </section>

  <!-- <section class="bcls-section">
    <h2 id="Related_topics">Related topics</h2>

    <ul>
      <li><a href="http://docs.brightcove.com/en/staging/pas/overview-playback-authorization-service.html">Overview: DRM with Playback Authorization Service</a></li>
      <li><a href="/playback-authorization/getting-started/technical-workflow-pas.html">Implementing DRM with Playback Authorization Service</a></li>
      <li><a href="/playback-authorization/guides/using-pas-with-sdks.html">Using Playback Authorization DRM with the Native SDKs</a></li>
      <li>
        <a href="/playback-authorization/guides/additional-apis-for-pas.html">Additional APIs for Playback Authorization Service</a>
      </li>
    </ul>
  </section> -->

</article>