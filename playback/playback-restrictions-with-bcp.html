---
title:“Brightcove Player 的播放限制”
description:"In this topic, you will learn how to configure Brightcove Player to use Playback Restrictions."---

<article class="bcls-article">
  <h1>{{ page.title }}</h1>
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Introduction">介紹</h2>
    <p>
      默認情況下，Brightcove Player與Brightcove Playback API對話。一個管理播放權限和限制的新系統位於Playback API的前面，並使用DRM許可證提供播放授權。
    </p>
    <p>您可以使用帶或不帶 DRM 的播放權限，但如果您選擇使用運行時限制，則需要使用 JSON Web 令牌 (JWT)。</p>
    <p>在將動態傳送與受DRM保護的內容或HTTP實時流加密（HLSe）內容一起使用時，許可證密鑰保護可提供更高級別的安全性。可以使用簽名對許可證請求進行身份驗證<a href="https://general.support.brightcove.com/developer/create-json-web-token.html">JSON Web令牌（JWT）</a>。一旦視頻已加載到播放器並選擇了源，則在請求視頻許可時使用令牌。</p>
    <p>要為Brightcove Player配置許可證密鑰保護，您在對視頻進行目錄請求時將傳遞一個令牌參數。 </p>
    <p>如果您不熟悉此功能，請參閱<a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html">概述：Brightcove播放限制</a>文檔。</p>

    <p>為了幫助您理解下一節中的代碼，請查看以下文檔中的概念：</p>
    <ul>
      <li><a href="https://general.support.brightcove.com/developer/create-json-web-token.html">創建一個<span translate="No">JSON 網絡令牌</span> (智威湯遜)</a></li>
      <li><a href="https://support.brightcove.com/concepts-using-javascript-promises">概念：使用 JavaScript 承諾</a></li>
      <li><a href="https://support.brightcove.com/player-catalog#Catalog_parameters_object">目錄參數</a></li>
      <li><a href="https://support.brightcove.com/configuring-brightcove-player-drm">為DRM配置Brightcove Player</a></li>
    </ul>
  </section>

  <section class="bcls-section">
    <h2 id="Requirements">需求</h2>
    <p>這是使用“播放限制"所需的要求。</p>
    <h3>播放權</h3>
    <p>要使用播放權，您需要滿足以下條件：</p>
    <ul>
      <li>播放器版本<strong>6.39.0</strong>或更高</li>
    </ul>
    <aside class="bcls-aside bcls-aside--information">使用播放權限時，任何使用策略密鑰配置的內容限制都將被忽略。</aside>

    <h3>許可證密鑰保護</h3>
    <p>要使用許可證密鑰保護，您需要滿足以下條件：</p>
    <ul>
      <li>播放器版本<strong>6.33.0</strong>或以後</li>
      <li>如果使用DRM，則需要<a href="https://support.brightcove.com/configuring-brightcove-player-drm#Changelog">DRM插件</a>版本<strong>5.5.0</strong>或以後</li>
    </ul>

  </section>

  <section class="bcls-section">
    <h2 id="Using_Playback_Rights">使用播放權限</h2>
    <p>
      要使用播放權限，請按照下列步驟操作：
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
           刪除Brightcove Player的策略密鑰。有關詳細信息，請參見<a href="#Making_requests_with_Playback_Rights">發出具有播放權限的請求</a>部分。
        </p>
      </li>
      <li>
        <p>
          如果你有<a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html#Runtime_restrictions">運行時限制</a>，則需要一個授權令牌。指定後，此令牌將添加為任何後續請求的授權標頭。
        </p>
        <p>
          您可以按如下方式向播放器添加一個：
        </p>
        <pre>
<code class="language-javascript" translate="No">player.catalog.setBcovAuthToken('<span class="bcls-input">your jwt token</span>');</code></pre>
      </li>
      <li>更改策略密鑰和/或授權令牌後，您準備從Brightcove Playback API請求數據並將其加載到播放器中。此過程與默認情況相同。
        <p>
          這是獲取具有播放限制和授權令牌的單個視頻的示例：
        </p>
        <aside class="bcls-aside bcls-aside--tip">請注意，<a href="https://player.support.brightcove.com/coding-topics/using-bc-and-getplayer-methods.html#bc_method_details"> bc() 方法</a>用於允許您在調用目錄之前設置策略鍵。</aside>

    <h3>的HTML</h3>
  <pre class="line-numbers">
<code class="language-html" translate="No">&lt;div style=&quot;max-width: 960px;&quot;&gt;
  &lt;video-js id=&quot;myPlayerID&quot;
    data-embed=&quot;default&quot;
    controls=&quot;&quot;
    data-application-id=&quot;&quot;
    class=&quot;vjs-fluid&quot;&gt;&lt;/video-js&gt;
&lt;/div&gt;
&lt;script src=&quot;https://players.brightcove.net/<span class="bcls-input">your account id</span>/<span class="bcls-input">your player id</span>_default/index.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
    <h3>JavaScript</h3>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">&lt;script&gt;
    // +++ Add the player attributes +++
    var myPlayer,
    	myPlayerEl = document.getElementById(&quot;myPlayerID&quot;);
    myPlayerEl.setAttribute('data-account', <span class="bcls-input">your account id</span>);
    myPlayerEl.setAttribute('data-player', '<span class="bcls-input">your player id</span>');

    // +++ Create the player +++
    myPlayer = bc(myPlayerEl);

    // Unset the player policy key
    myPlayer.catalog.setPolicyKey(null);

    // Set the authorization token
    myPlayer.catalog.setBcovAuthToken('<span class="bcls-input">your jwt token</span>');
    // This should trigger a request to:
    //
    //   https://edge-auth.api.brightcove.com/playback/v1/videos/1
    //
    // With header:
    //
    //   Authorization: Bearer &lt;span class=&quot;bcls-input&quot;&gt;your jwt token&lt;/span&gt;
    //

    myPlayer.catalog.get({id: '<span class="bcls-input">your video id</span>', type: 'video'}).
    then(function(data) {
      myPlayer.catalog.load(data);
      myPlayer.muted(true);
      myPlayer.play();
    }).
    catch(function(error) {
      throw new Error(error);
    });
&lt;/script&gt;</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Making_requests_with_Playback_Rights">發出具有播放權限的請求</h2>
    <P>默認情況下，如果所有Brightcove播放器都具有策略密鑰，則都會向Playback API發出請求。要發出先檢查“播放權限"的請求，您需要刪除策略密鑰。有兩種方法可以做到這一點：</P>
    <h3>從所有玩家中刪除策略密鑰</h3>
    <p>為避免為在Video Cloud Studio中創建的新播放器攝取策略密鑰，請執行以下操作：</p>

    <ol class="bcls-tasklist-restart">
      <li>與您的客戶經理聯繫。</li>
      <li>提供您的帳戶ID，並要求啟用<code translate="No">remove policy key</code>旗幟。
      </li>
    </ol>

    <h3>從單個玩家中刪除策略密鑰</h3>
    <p>默認情況下，<code translate="No">remove policy key</code>標誌已被禁用。要從各個播放器中刪除策略密鑰，請執行以下操作：</p>
    <ol class="bcls-tasklist-restart">
      <li>在Video Cloud Studio中，導航到<strong>玩家們</strong>模塊。</li>
      <li>選擇要從中刪除策略密鑰的播放器。</li>
      <li>在左側導航中，選擇<strong>JSON編輯器</strong>。</li>
      <li>設置<code translate="No">policy_key</code>字段為<code translate="No">null</code>。
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="JSON editor"
            src="/assets/images/playback/policy-key-editor.png"
          />
          <figcaption class="bcls-caption--image">JSON編輯器</figcaption>
        </figure>
      </li>
      <li>保存您的更改並發布您的播放器。</li>
    </ol>
      <!-- <pre>
        <code class="language-javascript" translate="No">player.catalog.setPolicyKey(null);</code></pre> -->
  </section>

  <section class="bcls-section">
    <h2 id="Making_requests_without_Playback_Rights">發出沒有播放權限的請求</h2>
    <p>可以顛倒該過程，以將請求直接導回Playback API，而沒有權限和限制。</p>
    <p>
      設置策略密鑰和授權令牌如下：
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>如果你有<code translate="No">remove policy key</code>標誌已啟用，然後與您的客戶經理聯繫以將其禁用。</p>
        <aside class="bcls-aside bcls-aside--information"> If you have the <code translate="No">remove policy key</code> flag enabled and you disable it, policy keys will be regenerated for all of your players, except those where you have set the <code translate="No">policy_key</code> field to <code translate="No">null</code>.</aside>
      </li>
      <li>如果您在Studio中更新了單個播放器，請使用策略密鑰更新JSON。
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="JSON editor"
            src="/assets/images/playback/policy-key-defined.png"
          />
          <figcaption class="bcls-caption--image">JSON編輯器</figcaption>
        </figure>
      </li>
      <li>將授權令牌設置為<code translate="No">null</code>。
        <pre>
<code class="language-javascript" translate="No">player.catalog.setBcovAuthToken(null);</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Using_License_Keys_Protection">使用許可證密鑰保護</h2>
    <p>要使用許可證密鑰保護，您將傳遞一個身份驗證令牌字符串作為<a href="https://player.support.brightcove.com/references/player-catalog.html">球員目錄</a>對象，使用屬性名稱<code translate="No">bcovAuthToken</code> .</p>
    <p>此方法適用於DRM和HLSe內容。播放器將檢測從 Playback API 加載的源類型並為該源提供正確的實現。</p>

    <p>要使用許可證密鑰保護，請按照下列步驟操作：</p>
    <ol class="bcls-tasklist">
      <li>創建簽名<a href="https://general.support.brightcove.com/developer/create-json-web-token.html">JSON Web令牌（JWT）</a>。</li>
      <li>在視頻請求中包含此令牌。
        <p>此示例實現代碼使用<a href="https://player.support.brightcove.com/references/player-catalog.html#get_method">catalog.get（）</a>提供令牌時請求視頻的方法。</p>
    <aside class="bcls-aside bcls-aside--information">確保不包括<code translate="No">data-video-id</code>中的參數<code translate="No">&lt;video-js&gt;</code>標籤。</aside>
<pre class="line-numbers">
  <code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
    data-account=&quot;1507807800001&quot;
    data-player=&quot;default&quot;
    data-embed=&quot;default&quot;
    controls
    data-application-id&gt;&lt;/video-js&gt;
  &lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;
  
  &lt;script&gt;
    (function() {
      var myPlayer = videojs.getPlayer('myPlayerID');
  
      myPlayer.catalog.get({
        type: 'video',
        id: '6015247091001',
        <span class="bcls-highlight">bcovAuthToken:</span> '<span class="bcls-input">your jwt token</span>'
      })
        .then(function(videoReturned){
          myPlayer.catalog.load(videoReturned);
        })
        .catch(function(err){
          console.log('err:', err);
        });
    })();
  &lt;/script&gt;</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Using_Concurrency_and_Registration">使用並發和註冊</h2>
    <p>如果您正在使用<a href="https://apis.support.brightcove.com/playback-restrictions/guides/stream-concurrency.html">流並發</a>或者<a href="https://apis.support.brightcove.com/playback-restrictions/guides/device-limits.html">設備註冊</a>，那麼您的 Brightcove 播放器將需要使用<strong>新興市場經濟體</strong>標準的插件 INSTEAD <strong>數字版權管理</strong>插入。</p>
    <aside class="bcls-aside bcls-aside--information">DRM 插件是 EME 插件的包裝器。有關詳細信息，請參閱<a href="https://player.support.brightcove.com/plugins/configuring-brightcove-player-drm.html#DRM_plugin_architecture">為 DRM 配置 Brightcove Player</a>文檔。 
    

    <p>按著這些次序：</p>
    <ol class="bcls-tasklist-restart">
      <li>添加<strong>新興市場經濟體</strong>插件到您的 Brightcove Player。該插件已更新為包括<code translate="No">persistentState</code> .</li>
      <li>在Video Cloud Studio中，導航到<strong>玩家們</strong>模塊。選擇播放器鏈接以查看其信息。</li>
      <li>在左側導航中，選擇<strong>回放</strong> .</li>
      <li>
        <p>確保<strong>啟用數字版權管理</strong>未被選中。</p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Enable DRM option"
            src="/assets/images/playback/playback-restrictions/enable-drm-option.png"
          />
          <figcaption class="bcls-caption--image">啟用 DRM 選項</figcaption>
        </figure>
      </li>
      <li>在左側導航中，選擇<strong>JSON編輯器</strong>。</li>
      <li>
        <p>在 JSON 代碼中，找到<code translate="No">plugins</code>數組，並添加EME插件如下：</p>
        <pre class="line-numbers">
<code class="language-javascript" translate="No">&quot;plugins&quot;: [
  {
  &quot;name&quot;: &quot;eme&quot;,
  &quot;scripts&quot;: [
    &quot;//players.brightcove.net/videojs-drm/5.9.1/videojs-drm.min.js&quot;
  ],
  &quot;stylesheets&quot;: [
    &quot;//players.brightcove.net/videojs-drm/5.9.1/videojs-drm.css&quot;
  ],
  &quot;options&quot;: {
    &quot;keySystems&quot;: {
      &quot;com.widevine.alpha&quot;: {
        &quot;persistentState&quot;: &quot;required&quot;
      }
    }
  }
},</code></pre>
<aside class="bcls-aside bcls-aside--warning">EME 插件必須按照上面顯示的順序進行配置（先腳本和样式表，然後是選項），否則將無法工作。</aside><aside class="bcls-aside bcls-aside--information">此功能在 DRM 插件 v5.9.1+ 中得到支持。</aside>
      </li>
      <li>包括 JWT 身份驗證令牌，如<a href="#Using_License_Keys_Protection">使用許可證密鑰保護</a>部分。</li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="configuring_server_side_ads_SSAI">配置服務器端廣告（SSAI）</h2>
    <p>如果您將許可證密鑰保護與SSAI一起使用，則需要在目錄參數對像中包括一個名為的附加參數。<code translate="No">adConfigId</code>。 </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001',
      bcovAuthToken: '<span class="bcls-input">your jwt token</span>',
      <span class="bcls-highlight">adConfigId:</span> '<span class="bcls-input">your ad configuration id</span>'
    })
      .then(function(videoReturned){
        myPlayer.catalog.load(videoReturned);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
  </section>

  <section class="bcls-section">
    <h2 id="Using_a_custom_implementation">使用自定義實現</h2>
    <p>您可能正在使用自定義實現，而您沒有<code translate="No">bcovAuthToken</code>用<a href="https://support.brightcove.com/player-catalog#get_method">目錄.get()</a>方法請求。如果您使用自己的播放器或第三方播放器，則可以使用以下方法之一將令牌傳遞到許可請求中：</p>
    <ul>
      <li>
        HTTP標頭：<code translate="No">BCOV-Auth</code> (Not supported for HLSe)
      </li>
      <li>
        曲奇餅：<code translate="No">bcov-auth</code> (Not supported for HLSe)
      </li>
      <li>
        查詢參數：<code translate="No">bcov-auth</code> (Only supported for HLSe) Must be appended to the master manifest url, instead of the license url
      </li>
    </ul>
    <p>
      這是顯示如何設置<code translate="No">source.emeHeaders['BCOV-Auth']</code>視頻對像上的令牌屬性。這插入了<code translate="No">emeHeader</code>在目錄請求之後的每個來源上。
    </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001'
    })
    .then(function(video){
      sources=video.sources;

      for (let i = 0; i &lt; sources.length; i++) {
        const source = sources[i];

        // Only add the auth token as an eme header for DRM content
        if (<span class="bcls-input">your jwt token</span> &amp;&amp; source.key_systems) {
          source.emeHeaders = {
              'BCOV-Auth': <span class="bcls-input">your jwt token</span>
            };
        }
      }
        myPlayer.catalog.load(video);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
    <!-- <p>
      For more details about working with MPEG-DASH, see the <a href="https://support.brightcove.com/creating-dash-drm-manifest-brightcove-player">Creating a DASH DRM Manifest for the Brightcove Player</a> document.
    </p> -->

  </section>
</article>