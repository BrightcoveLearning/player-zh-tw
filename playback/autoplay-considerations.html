---
title:自動播放注意事項
parent: Playback
description: In this topic, you will learn about issues surrounding autoplaying a video on page load.
---

<article class="bcls-article">
  <h1>自動播放注意事項</h1> 
  <summary>{{ page.description }} </summary>
  <section class="bcls-section">
    <h2 id="Overview">概述</h2>
    <p>使用 Brightcove 播放器在頁面加載時自動播放視頻並不是一個簡單的問題。這源於瀏覽器供應商響應用戶希望沒有自動播放視頻。本文件將詳細說明各種瀏覽器中自動播放視訊的目前狀態，以及影響自動播放的 Brightcove Player 組態。</p>
    <p>我們有一組可用的<a href="http://solutions.brightcove.com/poneill/experiments/autoplay/" rel="nofollow">測試用例</a>。</p>
  </section>
  <section class="bcls-section">
    <h2 id="tldr">底線</h2>
    <p>如果你只是想要我們最好的建議，沒有細節：</p>
    <dl>
      <dt>
        <h3>無用戶端廣告的自動播放</h3>
      </dt>
      <dd>
        <p>這些步驟將提供在沒有用戶端廣告或 SSAI 的玩家中自動播放成功的最佳機會：</p>
        <ul>
          <li>設定<code translate="No">autoplay</code>為<code translate="No">"any"</code>   </li>
          <li>設定<code translate="No">playsinline</code>為<code translate="No">true</code>    (適用於 iPhone)</li>
        </ul>
      </dd>
      <dt>
        <h3>用戶端廣告自動播放</h3>
      </dt>
      <dd>
        <p>這些步驟可讓玩家在使用客戶端廣告 (IMA3 或 Freewheel) 的玩家中自動播放成功的最佳機會：</p>
        <ul>
          <li>設定<code translate="No">autoplay</code>為<code translate="No">true</code>   </li>
          <li>設定<code translate="No">playsinline</code>為<code translate="No">true</code>    (適用於 iPhone)</li>
          <li>透過播放器的 JSON 設定來設定廣告外掛程式 <em>不</em> 通過側裝或自定義捆綁</li>
        </ul>
      </dd>
    </dl>
  </section>
  <section class="bcls-section">
    <h2 id="Configuring_Autoplay">設定自動播放</h2>
    <p>布萊特灣播放器支援五種可能的自動播放值。在 HTML5 規範中，自動播放是一個布爾屬性-它的 ID 在（<code translate="No">true</code>）或 off（<code translate="No">false</code>）。在布萊特灣玩家中，我們有三個特殊值可供選擇：</p>
    <ul>
      <li><code translate="No">play</code>：這將導致布萊特灣玩家在設定來源<code translate="No">play()</code>時呼叫。</li>
      <li><code translate="No">muted</code>：這會讓布萊特灣玩家將玩家靜音並呼叫<code translate="No">play()</code>。</li>
      <li><code translate="No">any</code>：這將導致布萊特灣玩家打電話<code translate="No">play()</code>。如果失敗，它會將播放器靜音並<code translate="No">play()</code>再次打電話。</li>
    </ul>
    <p><em>標籤屬性中不支援這三個值！</em></p>
    <h3>優先順序</h3>
    <p>下列清單說明可以設定自動播放的所有方式，以及在 Brightcove Player 初始化程序中的優先順序。</p>
    <ol>
      <li>
        <p><strong>視訊元素屬性</strong> </p>
        <p>遵循 HTML5 標準，這可以是<code translate="No">true</code>（屬性存在）或<code translate="No">false</code>（屬性不存在）。</p>
        <p>與查詢參數值（僅在其他情況下的 iframe）贏得的其他屬性不同，屬性在這裡獲勝，因為它在 Video.js 中獲勝。</p>
<pre class="line-numbers"><code class="language-html" translate="No">&lt;video-js autoplay controls&gt;&lt;/video-js&gt;</code>   </pre>
      </li>
      <li><strong> URL 雜湊或查詢字串</strong> 
        <p>與大多數情況不同的是，出於回溯相容性的原因，所有內嵌類型的自動播放查詢字串參數或 URL 雜湊參數都受到尊重。</p>
        <p><em>在未來的主要版本中嵌入頁面時，應該移除此選項。</em></p>
        <p>參數存在等同於<code translate="No">true</code>，即<code translate="No">?autoplay&amp;foo=bar</code>，但支持字符串值，例如<code translate="No">?autoplay=muted&amp;foo=bar</code> </p>
        <p><em>您不能<code translate="No">false</code>通過查詢/散列參數將自動播放設置為！</em></p>
      </li>
      <li>
        <p><strong><code translate="No">videojs()</code>    / <code translate="No">bc()</code>選項</strong> </p>
        <p>自動播放選項可以傳遞給<code translate="No">bc()</code>函數。</p>
      </li>
      <li>
        <p><strong> JSON 組態</strong> </p>
        <p>如果選項中無法使用自動播放，請使用從播放程式的 JSON 設定傳入的任何值。</p>
      </li>
      <li>
        <p><strong>預設</strong> </p>
        <p>最後，如果以上都不適用，我們默認為<code translate="No">false</code>。</p>
      </li>
    </ol>
    </section>
    <section class="bcls-section">
      <h2 id="Browser_Settings_and_Policies">瀏覽器設定與策略</h2>
      <p>瀏覽器近年來變得更加一致，但以下章節總結了每個主要瀏覽器的可用設置和/或政策。</p>
      <h3>野生動物園</h3>
      <p>在 macOS 上的野生動物園具有以下設定：</p>
      <ul>
        <li>允許所有自動播放</li>
        <li>使用聲音停止媒體 <em>(預設值)</em></li>
        <li>永不自動播放</li>
      </ul>
      <p>此外，這些設定可以變更每個站台為基礎。</p>
      <h3>野生動物園（iOS 和 iPad）</h3>
      <p>iOS 和 iPad 上的 Safari 並沒有面向使用者的自動播放設定，但會實作下列原則：</p>
      <ul>
        <li>靜音的自動播放將始終運作</li>
        <li>使用聲音自動播放需要使用者手勢</li>
        <li>在 iPhone 上，在所有情況下都需要該<code translate="No">playsinline</code>屬性。</li>
      </ul>
      <p>閱讀<a href="https://webkit.org/blog/6784/new-video-policies-for-ios/" rel="nofollow">這篇 WebKit 部落格文章以</a>獲取更多詳細資訊。</p>
      <h3>鉻</h3>
      <p>Chrome 沒有面向使用者的自動播放設定，但會實作下列原則：</p>
      <ul>
        <li>靜音的自動播放應該始終工作-但這<strong>始</strong>終取決於瀏覽器; 我們遇到了一些邊緣情況，但我們無法控制它們。</li>
        <li>使用聲音自動播放需要使用者手勢或足夠高的 MEI (在桌上型電腦上)。</li>
      </ul>
      <p>如需詳細資訊，請閱讀<a href="https://developers.google.com/web/updates/2017/09/autoplay-policy-changes" rel="nofollow">這</a>篇 Chrome 部落格文章。</p>
      <h3>火狐</h3>
      <p>Firefox 在全球和每個網站都有以下設置：</p>
      <ul>
        <li>允許音訊和視訊</li>
        <li>封鎖音訊 <em>(預設值)</em></li>
        <li>封鎖音訊和視訊</li>
      </ul>
      <h3>邊</h3>
      <p>依預設，Edge 具有下列設定：</p>
      <ul>
        <li>允許 <em>(預設值)</em></li>
        <li>限制</li>
      </ul>
      <p>不過，只要移至 [封鎖自動播放] 選項<code class="language-http" translate="No">edge://flags/#edge-autoplay-user-setting-block-option</code>，即可還原 Edge (舊版) 中提供的 [封鎖自動播放] 選項。</p>
      <h3>邊緣 (舊式)</h3>
      <p>Edge (舊版) 具有下列設定：</p>
      <ul>
        <li>允許</li>
        <li>限制</li>
        <li>圖塊</li>
      </ul>
      <p>[限制] 選項與其他瀏覽器類似，因為它需要靜音的自動播放或使用者手勢。</p>
    </section>
    <section class="bcls-section">
      <h2 id="Known_issues">已知問題</h2>
      <h3>頁面內來源和程式設計自動播放</h3>
      <p>使用頁面內源（例如通過<code translate="No">&lt;source&gt;</code>元素）並調用<code translate="No">play()</code>或使用基於字符串的自動播放值時存在已知問題- <code translate="No">"play"</code><code translate="No">"muted"</code>、和<code translate="No">"any"</code>。</p>
      <p>這已經在 Firefox 中看到了，但它可能存在於其他瀏覽器中。</p>
      <p><em>這不是布萊特灣客戶常見的用例。因為視訊雲端來源會載入播放程式建立之後，不會發生這個問題。</em></p>
      <p>相反地，您必須等待<code translate="No">canplay</code>事件觸發之前調用<code translate="No">play()</code>。或者，根據使用者設定/偏好設定，設定<code translate="No">autoplay: true</code>將如預期般運作。</p>
      <h3>ima3/輪/輪</h3>
      <h4>自動播放字串值</h4>
      <p>特殊的基於字符串的自動播放值- <code translate="No">"play"</code><code translate="No">"muted"</code>，和<code translate="No">"any"</code>   -目前<strong>不支援</strong>  IM3 和 Freewheel 外掛程式。</p>
      <p>但是，這些插件有自己的自動播放處理，當配<code translate="No">autoplay: true</code>置時，它們的行為就<code translate="No">autoplay: "any"</code>像配置一樣。</p>
      <h4>遺失或錯誤的預備</h4>
      <p>如果嘗試<code translate="No">play()</code>使用這些外掛程式呼叫，則在某些情況下，自動播放會失敗，當按下播放按鈕時，不會播放預先播放。</p>
      <p>有了 FreeWwheel，也有報告預先播放 <em>後面</em> 大的播放按鈕。</p>
      <h4>建議</h4>
      <p>使用這些外掛程式時，建議啟用自動播放的方法是：</p>
      <ul>
        <li>將插件捆綁到您的播放器中（例如通過 Studio）。 <em>不建議側面加載（頁面內）</em>。</li>
        <li>請勿嘗試使用特殊的自動播放值。設置自動播放，<code translate="No">true</code>並允許廣告插件嘗試播放，但它可以。</li>
      </ul>
    </section>
  <!-- <section class="bcls-section">
    <h2 id="Configure_autoplay">Configure autoplay</h2>
    <p>When you want Brightcove Player to try to autoplay a video you need to set that in the player's configuration. You can do this either with Studio or the <a href="https://apis.support.brightcove.com/player-management/">Player Management API</a>.</p>
    
    <p>In Studio, edit the desired player then in the <strong>Playback</strong> section set the value:</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="Set autoplay in Studio" src="//learning-services-media.brightcove.com/doc-assets/player-development/playback/autoplay/studio-setting.png" /></figure>
    <p>The meaning of each setting is as follows:</p>
    <ol>
      <li>Do Not Auto-Play: Will not try to autoplay</li>
      <li>Auto-Play: Will try to autoplay, but video won't play at all if browser denies it because of audio</li>
      <li>Auto-Play Muted: Will mute audio unconditionally so video will play</li>
      <li>Auto-Play, muted if blocked: Will try to autoplay with audio, but if blocked will autoplay muted</li>
    </ol>
    <p>Note that if you have the <strong>Play Muted</strong> checkbox checked (resides just below the dropdown), then then 2, 3 and 4 all effectively behave as 3.</p>
    <aside class="bcls-aside bcls-aside--warning">Warning: Using the <code translate="No">autoplay </code> attribute in the <code translate="No">&lt;video&gt; </code> tag or the query parameter in the iframe is NOT the same as configuring the player to use autoplay. Consistent behavior cannot be guaranteed if the attribute/query parameter is used.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="Programmatic_autoplay_using_the_play()_method">Programmatic autoplay using the <span translate="No">play()</span> method</h2>
    <p>For whatever reason, you may not be able to configure the player to use autoplay as discussed in the previous section of this document. In this case you can use the <code translate="No">play()</code> method to start the video on page load. Be aware, this approach is still governed by all the browser/platform rules mentioned earlier.</p>
    <p>Remember that you must wait for the media to be loaded into the player before using the <code translate="No">play() </code> method. Waiting for the <code translate="No">loadedmetadata </code> event will do the trick:</p>
    <pre class="line-numbers">
  <code class="language-javascript" translate="No">&lt;script type="text/javascript"&gt;
    var myPlayer = videojs.getPlayer('myPlayerId');
    myPlayer.on('loadedmetadata',function() {
      myPlayer.play();
    });
  &lt;/script&gt;
  </code>
  </pre>
    <p>Using the <code translate="No">play() </code> method does NOT override browser/OS restrictions on autoplay.</p>
    <p>For a sample which will always autoplay a video, but displays a large unmute button over the player if needed, see the <a href="/code-samples/brightcove-player-sample-autoplay-unmute-button.html">Brightcove Player Sample: Autoplay with Unmute Button for iOS/Safari/Chrome</a> document.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Programmatic_autoplay_detection">Programmatic autoplay detection</h2>
    <p>You can programmatically detect if autoplay succeeded by listening for a JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> returned by the player's <code translate="No">play() </code> method. Brightcove Player's <code translate="No">play() </code> method returns a Promise object that indicates whether autoplay succeeded. Following are two console screenshots showing the Promise object when autoplay succeeded (Promise resolved) or autoplay failed (Promise rejected).</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="promise resolved" src="//learning-services-media.brightcove.com/doc-assets/player-development/playback/autoplay/promise-resolved.png" />
      <figcaption class="bcls-caption--image">Autoplay succeeded</figcaption>
    </figure>
    <figure class="bcls-figure"><img class="bcls-image" alt="promise rejected" src="//learning-services-media.brightcove.com/doc-assets/player-development/playback/autoplay/promise-rejected.png" />
      <figcaption class="bcls-caption--image">Autoplay failed</figcaption>
    </figure>
    <p>As per standard JavaScript handling of a Promise, here is a code snippet using the <code translate="No">play()</code>'s Promise. See the next section in this document for a specific use case that plays with audio of the video autoplays, or plays without audio if the video does not autoplay.</p>
    <pre class="line-numbers">
  <code class="language-javascript" translate="No">var myPlayer = videojs.getPlayer('myPlayerID');
  myPlayer.on('loadedmetadata',function() {
    var promise = myPlayer.play();
    if (promise !== undefined) {
      promise.then(function() {
        // Autoplay started!
      }).catch(function(error) {
        // Autoplay was prevented.
      });
    }
  });
  </code>
  </pre>
    <p>You can use this snippet to implement your use case rules.</p>
    <aside class="bcls-aside bcls-aside--warning">Note that with live content the <code translate="No">loadedmetadata </code> event is fired after the <code translate="No">play </code> event, except in Safari where the behavior is as shown above. When using live content with Chrome, for example, you would need to listen for the <code translate="No">durationchange </code> instead of <code translate="No">loadedmetadata </code>. The following code can be used for either VOD or live:
      <pre class="line-numbers">
    <code class="language-javascript" translate="No">var autoPlayEvents = ['loadedmetadata', 'durationchange'];
    myPlayer.on(autoPlayEvents, autoplayableListener);
  
    function autoplayableListener(event) {
      console.log(event.type);
      // for live videos we want to listen for durationchange
      if (event.type === 'durationchange' &amp;&amp; myPlayer.duration() === Infinity) {
        attemptAutoplay();
        myPlayer.off(autoPlayEvents, autoplayableListener);
      }
      if (event.type === 'loadedmetadata') {
        attemptAutoplay();
        myPlayer.off(autoPlayEvents, autoplayableListener);
      }
    }
  
    function attemptAutoplay() {
      var promise = myPlayer.play();
      if (promise !== undefined) {
        promise.then(function () {
          // Autoplay started!
        }).
        catch (function (error) {
          // Autoplay was prevented.
        });
      }
    }</code></pre>
    </aside>
  </section>
  <section class="bcls-section">
    <h2 id="Specific_use_case">Specific use case</h2>
    <p>In the section above, the skeleton code was explained on how to programmatically detect autoplay. In this section more detailed code will be used for a common use case. That use case is:</p>
    <ul>
      <li>If the video autoplays, set the volume level then play the video.</li>
      <li>If the video does not play, mute the player (so it can play), then play the video.</li>
    </ul>
    <p>The following code implements the specific use case described:</p>
    <pre class="line-numbers">
  <code class="language-javascript" translate="No">var myPlayer = videojs.getPlayer("myPlayerID"),
    volumeLevel = 0.7;
  
  //  Wait for loadedmetadata then try to play video
  myPlayer.on("loadedmetadata", function() {
    // Play video which returns a promise
    var promise = myPlayer.play();
  
    //  Use promise to see if video is playing or not
    if (promise !== undefined) {
      promise
        .then(function() {
          // Autoplay started!
          // If video playing unmute and set the volume
          myPlayer.muted(false);
          myPlayer.volume(volumeLevel);
        })
        .catch(function(error) {
          // Autoplay was prevented.
          // If autoplay prevented mute the video, play video and display unmute button
          myPlayer.muted(true);
          myPlayer.play();
        });
    }
  });</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Known_issues">Known issues</h2>
    <ul>
      <li>When using Chrome on Android, and using <a href="https://support.google.com/chrome/answer/2392284?co=GENIE.Platform%3DAndroid&amp;hl=en-GB">Chrome’s Data Saver</a>, autoplay will not function correctly.</li>
    </ul>
  </section> -->
</article>