---
title: '指南：廣告合作夥伴集成
parent: Advertising
description: This document describes functionality you can implement if you wish to integrate your advertising system with Brightcove Player.
---

<article class="bcls-article">
  <h1>指導：廣告合作夥伴集成</h1>
  <summary>{{ page.description }}</summary>
  <section id="Overview" class="bcls-section">
    <h2>概述</h2>
    <p>例如，如果您的廣告系統符合Google IMA3的要求，則您不需要此信息，而只需使用IMA3中的現有插件即可，<a href="/plugins/advertising-ima3-plugin.html">使用IMA3插件指南進行廣告</a>。</p>
    <p>如果確定需要此功能，那麼此內容將說明與Brightcove Player進行廣告集成所需的廣告API框架。您可以看到Brightcove生成的該框架的兩種實現，它們是針對Google的IMA3和FreeWheel的（下一節中顯示的參考文檔）。</p>
    <p>同樣，本文檔不適用於希望將現有廣告框架與其視頻一起使用的客戶。更適合這些客戶的文檔是：</p>
    <ul>
      <li><a href="/plugins/advertising-ima3-plugin.html">使用IMA3插件做廣告</a></li>
      <li><a href="/plugins/advertising-freewheel-plugin.html">使用FreeWheel插件做廣告</a></li>
      <li><a href="/plugins/implementing-server-side-ads-brightcove-player.html">使用Brightcove Player實施服務器端廣告</a></li>
    </ul>
  </section>
  <section id="frameworkfunctionality" class="bcls-section">
    <h2>廣告框架功能</h2>
    <p>Brightcove提供了廣告API框架作為自定義廣告插件的基礎。該框架提供了與Brightcove Player一起使用的視頻廣告庫所需的通用功能，從而減少了為廣告集成編寫的代碼。該框架是作為一個開源項目提供的，您可以在該項目上進行構建。可從GitHub存儲庫中獲得項目代碼<a href="https://github.com/videojs/videojs-contrib-ads">videojs-contrib-ads</a>。</p>
    <p>廣告框架使廣告合作夥伴能夠：</p>
    <ul>
      <li>完全控制廣告體驗（即播放廣告時播放器的外觀和行為）。</li>
      <li>與自定義或專有廣告服務器一起使用。</li>
      <li>管理底層的廣告實施細節，例如確定何時發出廣告請求以及如何緩衝廣告素材。</li>
      <li>輕鬆與視頻分析提供商和Brightcove Player生態系統進行互操作。</li>
    </ul>
  </section>
  <section id="baseknowledge" class="bcls-section">
    <h2>基礎知識</h2>
    <p>要使用和建立廣告API框架，您需要對Brightcove Player插件架構有透徹的了解。以下文檔提供了此知識：</p>
    <ul>
      <li><a href="/plugins/overview-brightcove-player-plugins.html">概述：播放器插件</a></li>
      <li><a href="/coding-topics/pass-data-plugin.html">將數據傳遞到插件</a></li>
      <li><a href="/coding-topics/localizing-plugins.html">本地化插件</a></li>
    </ul>
    <p>如果您有需要，可以在以下位置從Brightcove的角度快速瀏覽視頻廣告：</p>
    <ul>
      <li><a href="/getting-started/learning-guide-video-advertising.html">學習指南：視頻廣告</a></li>
    </ul>
  </section>
  <section id="using" class="bcls-section">
    <h2>使用框架</h2>
    <p>以下各節提供有關使用框架的詳細信息。</p>
    <h3>包括框架資源</h3>
    <p>要使用該插件，您必須首先確保包含該插件的CSS和JavaScript。</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;link rel="stylesheet" href="//mypath/videojs.ads.css"&gt;
&lt;script src="//mypath/videojs.ads.js"&gt;&lt;/script&gt;</code></pre>
    <p>包含JavaScript後，您就可以調用該函數來初始化廣告框架。</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  videojs.getPlayer('myPlayerID').one('loadedmetadata', function(){
    var myPlayer = this;
    // Initialize the ad framework
    <span class="bcls-highlight">myPlayer.ads();</span>
  });
&lt;/script&gt;</code></pre>
    <aside class="bcls-aside bcls-aside--tip">筆記：而<code translate="No">ready()</code>方法用於指示播放器已加載並準備就緒，<code translate="No">loadedmetadata</code>事件用於指示播放器內容（例如廣告）已準備好與之交互。在這裡，我們還使用了<code translate="No">one()</code>方法，以便我們的函數在第一次加載插件時執行，而不是在每次視頻加載時執行。有關詳細信息，請參閱<a href="/coding-topics/player-events.html">玩家事件</a>文檔。
    <h3>配置選項</h3>
    <p>該框架有許多可用的配置選項。例如，有一個<code translate="No">timeout</code>選項。要設置此選項，您將使用以下代碼：</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  videojs.getPlayer('myPlayerID').one('loadedmetadata', function(){
    var myPlayer = this;
    // Initialize the ad framework
    myPlayer.ads({
      "timeout": 3000
    });
  });
&lt;/script&gt;</code></pre>
    <p>下表提供了選項列表：</p>
    <aside class="bcls-aside bcls-aside--information">注意：有關配置選項的完整詳細信息，請參閱<a href="https://github.com/videojs/videojs-contrib-ads">https://github.com/videojs/videojs-contrib-ads</a> GitHub 存儲庫。
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th style="width:15%">選項</th>
          <th style="width:15%">類型</th>
          <th style="width:15%">默認</th>
          <th style="width:55%">描述</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">timeout</code></td>
          <td>數字</td>
          <td>5000</td>
          <td>播放前等待廣告實施初始化的最長時間（以毫秒為單位）</td>
        </tr>
        <tr>
          <td><code translate="No">prerollTimeout</code></td>
          <td>號碼 </td>
          <td>1000</td>
          <td>等待廣告實施啟動預錄的最長時間（以毫秒為單位）</td>
        </tr>
        <tr>
          <td><code translate="No">postrollTimeout</code></td>
          <td>號碼 </td>
          <td>100</td>
          <td>等待廣告實施啟動後期製作的最長時間（以毫秒為單位）</td>
        </tr>
        <tr>
          <td><code translate="No">debug</code></td>
          <td>布爾值</td>
          <td>錯誤的</td>
          <td>如果將debug設置為true，則廣告插件將在播放期間輸出有關其當前狀態的其他信息</td>
        </tr>
      </tbody>
    </table>
    <h3>活動</h3>
    <p>以下事件分為兩種不同的類型。分組及其描述如下。</p>
    <aside class="bcls-aside bcls-aside--information">注意：有關框架事件的完整詳細信息，請參閱<a href="https://github.com/videojs/videojs-contrib-ads">https://github.com/videojs/videojs-contrib-ads</a> GitHub 存儲庫。
    <p>這<code translate="No">adstart</code>和<code translate="No">adend</code>框架會觸發事件，以響應廣告集成商的方法調用。這些事件不應由廣告集成商直接觸發。</p>
    <table class="table-styles">
      <thead>
        <tr>
          <th style="width:20%">事件 </th>
          <th style="width:80%">描述</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>adstart</td>
          <td>播放器已進入線性廣告播放模式</td>
        </tr>
        <tr>
          <td>附上</td>
          <td>播放器已退出線性廣告播放模式</td>
        </tr>
      </tbody>
    </table>
    <p>這<code translate="No">adskip</code>和<code translate="No">adtimeout</code>事件是廣告集成商可以選擇觸發事件的可選事件，以指示播放器應跳過預卷或預捲機會。</p>
    <table class="table-styles">
      <thead>
        <tr>
          <th style="width:20%">事件 </th>
          <th style="width:80%">描述</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>adskip</td>
          <td>播放器正在跳過線性廣告機會，內容播放應立即恢復</td>
        </tr>
        <tr>
          <td>adtimeout</td>
          <td>插件管理的超時已到期，常規視頻內容已開始播放</td>
        </tr>
      </tbody>
    </table>
    <h3>運行時設置</h3>
    <p>插件初始化後，便可以使用一個屬性來修改其行為。</p>
    <aside class="bcls-aside bcls-aside--information">注意：有關框架運行時設置的完整詳細信息，請參閱<a href="https://github.com/videojs/videojs-contrib-ads">https://github.com/videojs/videojs-contrib-ads</a> GitHub 存儲庫。
    <table class="table-styles">
      <thead>
        <tr>
          <th style="width:20%">財產</th>
          <th style="width:80%">描述</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>contentSrc</td>
          <td>此屬性用於確定何時加載新視頻，以便可以將播放器重置為“準備顯示預卷"狀態。廣告提供商通常不會與之互動，但是希望更改視頻源以實現再現選擇器的插件作者可以修改<code translate="No">contentSrc</code>這樣，在發生音像切換時就不會啟動預卷。</td>
        </tr>
      </tbody>
    </table>
  </section>
  <section id="example" class="bcls-section">
    <h2>例子</h2>
    <h3>樣例實施</h3>
    <p>的動手練習部分<a href="/plugins/advertising-ima3-plugin.html#Implement_using_Players_module_advertising_section">使用IMA3插件指南進行廣告</a>引導您完成將插件用於IMA3廣告的簡單實現。</p>
    <h3>偽代碼集成</h3>
    <p>以下是基本廣告集成的外觀的偽代碼。此示例在每個內容視頻之前顯示一個預卷廣告，並演示廣告插件提供的互動點。這實際上不是一個可運行的示例，因為它需要代碼註釋中指定的更多信息。</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  videojs.getPlayer('myPlayerID').one('loadedmetadata', function(){
    var player = this;
    player.ads(); // initialize the ad framework

    // request ads whenever there's new video content
    player.on('contentupdate', function(){
      // fetch ad inventory asynchronously, then ...
      player.trigger('adsready');
    });

    player.on('readyforpreroll', function() {
      player.ads.startLinearAdMode();
      // play your linear ad content
      player.src('http://url/to/your/ad.content');
      player.one('durationchange', function(){
        player.play();
      });
      // when all your linear ads have finished...
      player.one('ended', function() {
        player.ads.endLinearAdMode();
      });
    });
  });
&lt;/script&gt;</code></pre>
  </section>
  <section id="faq" class="bcls-section">
    <h2>常問問題</h2>
    <p class="bcls-question">廣告插件如何訪問媒體元數據？</p>
    <p class="bcls-answer">對於Video Cloud客戶，該插件將通過<a href="/references/video-metadata-mediainfo.html">媒體信息</a>對象，該對象將使用“視頻雲"中設置的元數據填充。Brightcove Player客戶將負責填充<a href="/references/video-metadata-mediainfo.html">手動設置mediainfo對象</a>因為他們將使用非視頻雲CMS。</p>
    <p class="bcls-question">如何為廣告插件指定選項？</p>
    <p class="bcls-answer">插件選項可以在Studio的<strong>播放器&gt;插件</strong>部分。具有插件包含選項的播放器可以使用iframe或頁內嵌入代碼發布，但插件選項包含靜態信息（例如，描述）。您可以使用<a href="/coding-topics/pass-data-plugin.html">將數據傳遞到插件</a>文檔。</p>
    <p class="bcls-question">廣告插件應如何支持基於Flash的廣告？</p>
    <p class="bcls-answer">Brightcove建議將基於Flash的廣告播放器打包為廣告插件實現的一部分，並在播放器處於線性廣告模式時將該播放器覆蓋在內容上。</p>
    <p class="bcls-question">提示點如何觸發插播廣告？</p>
    <p class="bcls-answer">換提示時，致電<code translate="No">startLinearAdMode()</code>開始中游。有關聆聽和設置提示點的信息，請參見<a href="/advertising/displaying-ads-using-ad-cue-points.html">使用提示點</a>文檔。</p>
  </section>
</article>