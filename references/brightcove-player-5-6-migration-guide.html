---
title:Brightcove Player 5 到 6 遷移指南
parent: References
---

<article class="bcls-article">
  <h1>Brightcove Player 5到6遷移指南</h1>
  <summary>在本主題中，您將了解從Brightcove Player版本5遷移到版本6時的問題。</summary>
  <section class="bcls-section">
    <h2 id="Overview">概述</h2>
    <p >Video.js 6中向後不兼容的更改記錄在<a href="//github.com/videojs/video.js/wiki/Video.js-6-Migration-Guide">Video.js Wiki</a>，此文檔可用於特定於Brightcove Player 6的其他遷移指南，這些指南不適用於從Video.js 5遷移到6的情況。</p>
    <p >Brightcove Player 5的重要組成部分是兼容性插件，該插件由播放器配置值觸發：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">"compatibility": true</code></pre>
    <p >對於5.x播放器，默認情況下啟用此配置。它的作用是包括一個將“填充" Video.js 4 API的插件，該插件允許更多客戶插件和集成在自動更新為Brightcove Player 5時無縫運行。</p>
    <p >從Brightcove Player 6開始，此墊片不再是播放器的一部分。想要從5更新到6的任何人都應遵循以下有關文檔的上述文檔，以確保其代碼與Video.js 6 API兼容。<a href="//github.com/videojs/video.js/wiki/Video.js-6-Migration-Guide"> Video.js Wiki</a>。以下各節介紹了更新時需要考慮的更改。</p>
  </section>
  <section class="bcls-section">
    <h2 id="player-tech">播放器技術</h2>
    <p >在Brightcove Player版本6中，<code translate="No">player.tech</code>是返回當前播放技術的函數，而不是版本5中的播放器屬性。填充程序將技術對象的一些屬性映射到技術功能，因此代碼期望<code translate="No">player.tech</code>成為技術對像不會引發錯誤。</p>
  </section>
  <section class="bcls-section">
    <h2 id="Player_sizing">球員人數</h2>
    <p >在Video.js 4中，播放器是通過JavaScript調整大小的。Video.js 5引入了一個新的基於CSS的大小調整方案，這導致播放器尺寸出現一些問題。填充程序會將這些更改回滾，以使它們的行為更像第4版中的行為。</p>
    <p >實際上，在使用Brightcove Player v6時，<code translate="No">height</code>和<code translate="No">width</code>視頻廣告代碼上的像素數<strong>只要</strong>。實際上，對於<code translate="No">height</code>和<code translate="No">width</code>屬性：</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">width="480"</code></pre>
    <p >您可以將寬度和高度設置為<strong>100％</strong>在版本5中，此功能在版本6中不再起作用。您可以通過兩種不同的方式使用CSS完成此操作：</p>
    <ul>
      <li>用一個<code translate="No">style</code>中的屬性<code translate="No">video</code>標籤。
        <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js data-video-id="5622718636001"
  data-account="1507807800001"
  data-player="default"
  data-embed="default"
  data-application-id
  class="video-js"
  controls
  <span class="bcls-highlight">style="width: 100%;height: 100%"</span>&gt;&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/1507807800001/default_default/index.min.js"&gt;&lt;/script&gt;</code></pre>
      </li>
      <li>用一個<code translate="No">style</code>標籤。
        <pre class="line-numbers">
  <code class="language-html" translate="No">...
  <span class="bcls-highlight">&lt;style&gt;
      .video-js {
        height: 100%;
        width: 100%;
      }
  &lt;/style&gt;</span>
  ...
  &lt;video-js data-account="1752604059001"
    data-player="H1xW7NWcz"
    data-embed="default"
    data-application-id
    class="video-js"
    controls&gt;&lt;/video-js&gt;
  &lt;script src="https://players.brightcove.net/1752604059001/H1xW7NWcz_default/index.min.js"&gt;&lt;/script&gt;</code></pre>
      </li>
    </ul>
    <aside class="bcls-aside bcls-aside--tip">如果您單獨使用百分比，並且玩家不在具有高度設置的容器中，則可能您沒有看到播放器，因為高度為零。確保播放器的父容器有一個高度設置。</aside> 
  </section>
  <section class="bcls-section">
    <h2 id="Component_constructors">組件構造器</h2>
    <p >在Video.js 4和版本5中，通過墊片，組件構造函數（例如<code translate="No">Player</code>和<code translate="No">ControlBar</code>）可作為的屬性<code translate="No">videojs</code>功能：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No"> videojs.${ComponentName}</code></pre>
    <p >這已不再是這種情況。這<code translate="No">videojs.getComponent</code>函數應改為：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">var ControlBar = videojs.getComponent('ControlBar');</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="SliderHandle_component">SliderHandle組件</h2>
    <p >該組件不在5.x播放器中，但已通過填充程序針對正在擴展該組件的用戶進行了還原。現在將其完全刪除。</p>
  </section>
  <section class="bcls-section">
    <h2 id="Properties/Methods_and_alternatives">屬性/方法和替代方法</h2>
    <p >以下是兼容性墊片將4.x的許多Video.js屬性複製到5.x。它們在6.x中不再存在，但提供了替代方法：</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>已移除</th>
          <th>選擇</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td> vjs  </td>
          <td>視訊 </td>
        </tr>
        <tr>
          <td>videojs.JSON</td>
          <td>JSON格式</td>
        </tr>
        <tr>
          <td>videojs.USER_AGENT</td>
          <td>window.navigator.userAgent</td>
        </tr>
        <tr>
          <td>videojs.EventEmitter</td>
          <td>視頻 J.EventARGET  </td>
        </tr>
        <tr>
          <td>videojs.obj.isArray</td>
          <td>Array.isArray</td>
        </tr>
        <tr>
          <td>videojs.round（數字，數字）</td>
          <td>號碼（固定號碼（數字））</td>
        </tr>
        <tr>
          <td>videojs.trim（str）</td>
          <td>str.trim（）</td>
        </tr>
        <tr>
          <td>videojs.util.mergeOptions</td>
          <td>videojs.mergeOptions</td>
        </tr>
      </tbody>
    </table>
  </section>
  <section class="bcls-section">
    <h2 id="Creating_a_custom_plugin">創建一個自定義插件</h2>
    <p >在Brightcove Player的版本5中，當您創建自定義插件時，該插件的第一行使用<code translate="No">videojs.plugin()</code>方法。例如：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.plugin('scrollIntoView', function() {
  var myPlayer = this,
    isAdPlaying = false;
  ...</code></pre>
    <p >您現在應該使用<code translate="No">videojs.registerPlugin()</code>方法代替。例如：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('scrollIntoView', function() {
  var myPlayer = this,
    isAdPlaying = false;</code></pre>
    <p >雖然<code translate="No">videojs.plugin()</code>在版本6中已棄用（如果使用），則不會出錯，但是您會在控制台中看到警告。你不能使用<code translate="No">videojs.registerPlugin()</code>版本5播放器。</p>
    <aside class="bcls-aside bcls-aside--tip">如果你發現你需要在兩個版本的播放器中使用一個插件，你可以使用這個技術來提供 Video.js 5/6 的交叉兼容性：
      <pre class="line-numbers">
<code class="language-javascript" translate="No">var registerPlugin =   videojs.registerPlugin || videojs.plugin;
registerPlugin('pluginName', function(){
  ...
});</code></pre>
    </aside>
  </section>
  <section class="bcls-section">
    <h2 id="IMA3_plugin">IMA3插件</h2>
    <p>升級到Brightcove Player 6後，您將需要使用Studio手動重新安裝IMA3插件。見<a href="/advertising/step-step-implementing-advertising.html">一步步：實施廣告</a>有關詳細信息的文檔。</p>
    <p>如果您習慣使用<a href="https://apis.support.brightcove.com/player-management/">播放器管理API</a>，您還可以使用curl升級IMA3插件。具體來說，這裡是對API的引用<a href="https://apis.support.brightcove.com/player-management/references/reference.html#operation/UpdatePlayer">更新玩家</a>。請注意，這可以在同一時間完成&nbsp;用於實際升級播放器的播放器管理API調用。</p>
  </section>
  <section class="bcls-section">
    <h2 id="Flash_HLS_and_crossdomain.xml">Flash HLS和crossdomain.xml</h2>
    <p >在某些特殊情況下，使用Brightcove Player 6.13.0及更高版本時，您將需要使用<strong>crossdomain.xml</strong>文件。在以下情況下將需要這樣做：</p>
    <ul>
      <li>您正在使用自己的CDN。</li>
      <li>您使用Brightcove Player的方式必須使用Flash。見<a href="/playback/determining-which-rendition-will-play.html">確定將播放哪種演繹</a>有關何時可能發生的文檔。</li>
    </ul>
    <p >如果滿足這些條件，則必須使用<strong>crossdomain.xml</strong>在提供媒體的根域中的文件。例如，如果您要從</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">https://www.domain.com/media/video.m3u8</code></pre>
    <p >然後一個<strong>crossdomain.xml</strong>文件必須存在於</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">https://www.domain.com/crossdomain.xml</code></pre>
    <p >由於播放器瑞士法郎託管在<code translate="No">players.brightcove.net</code>，建議使用<code translate="No">*.brightcove.net</code>。一個例子<strong>crossdomain.xml</strong>出現如下：</p>
    <pre class="line-numbers">
<code class="language-xml" translate="No">&lt;?xml version="1.0"?&gt;
&lt;cross-domain-policy&gt;
&lt;allow-access-from domain="*.brightcove.net" /&gt;
&lt;/cross-domain-policy&gt;</code></pre>
    <p >您將需要提供適當的域。有關更多詳細信息，請參見<a href="https://code.tutsplus.com/tutorials/quick-tip-a-guide-to-cross-domain-policy-files--active-3832">小建議：跨域策略文件指南</a>。</p>
    <h3>使用HTTPS</h3>
    <p >從HTTP頁面加載HTTPS資產時（反之亦然），您需要包括<code translate="No">secure</code>值為的屬性<code translate="No">false</code>如下：</p>
    <pre class="line-numbers">
<code class="language-xml" translate="No">&lt;?xml version="1.0"?&gt;
&lt;cross-domain-policy&gt;
&lt;allow-access-from domain="*.brightcove.net" secure="false"/&gt;
&lt;/cross-domain-policy&gt;</code></pre>
  </section>
</article>
