---
title: '適用於 Brightcove Player 的 Google 標籤管理器插件' 
description:在本主題中，您將學習如何使用適用於 Brightcove Player 的 Google 標籤管理器 (GTM) 插件。
parent: Plugins
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Overview">概述</h2>

    <p>
      Google跟踪代碼管理器（GTM）插件可讓您將GTM功能與Brightcove Player集成。
    </p>

    <p>
      標記管理器允許您添加和發布標記，而不必使用代碼。因為它們是客戶端解決方案，所以標籤管理器使您可以跨不同的營銷技術收集數據。這使營銷人員能夠跨各種收集點收集用戶和播放器數據，從而為他們提供支持。
    </p>

    <p>
      如果您已經在使用Google Analytics（分析），Adwords和DoubleClick，則您可能還希望使用Google跟踪代碼管理器，因為它可以很好地與這些工具集成。GTM提供了大量的變量和触發器選項。
    </p>
    <p>
      Google Tag Manager 插件使您能夠使用 Google Analytics 儀表板跟踪 Brightcove Player 事件。可以跟踪以下玩家事件： 
    </p>
    <ul>
      <li>
        播放器負載
      </li>
      <li>
        視頻展示
      </li>
      <li>
        視頻觀看
      </li>
      <li>
        視頻參與
      </li>
      <li>
        播放要求
      </li>
      <li>
        視頻完成
      </li>
      <li>
        高級播放器事件，例如廣告開始、廣告結束
      </li>
      <li>
        中斷播放體驗的錯誤
      </li>
    </ul>

    <aside class="bcls-aside bcls-aside--tip"> The Google Tag Manager Plugin is supported with the Brightcove Player version 6.36.5+. </aside>
  </section>

  <section class="bcls-section">
    <h2 id="Tag_management_terminology">標籤管理術語</h2>

    <p>
      以下是使用Google跟踪代碼管理器（GTM）時會遇到的一些常見術語。
    </p>

    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th style="width:15%">學期</th>
          <th style="width:85%">描述</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><strong>容器</strong></td>
          <td>
            您的標籤管理系統帳戶可以有多個容器（配置文件），並具有自己的標籤和變量。每個容器可以具有多個環境，通常為開發，分段和生產而設置。
          </td>
        </tr>
        <tr>
          <td><strong>資料層</strong></td>
          <td>
            數據層是指駐留在網頁代碼中的數據集合。此JavaScript對像用於將信息從您的網站傳遞到標籤管理器容器。然後，您可以使用此信息來填充變量並激活標籤配置中的觸發器。
          </td>
        </tr>
        <tr>
          <td><strong>事件</strong></td>
          <td>
            事件是用於將數據發送到報告工具的數據點。這些與視頻加載和播放有關。
          </td>
        </tr>
        <tr>
          <td><strong>標籤</strong></td>
          <td>
            標籤是放置在您的網頁上的代碼片段，用於收集用戶交互數據。標記管理系統簡化了將標記添加到站點的過程，僅要求您提供標記ID和標記事件類型。
          </td>
        </tr>
        <tr>
          <td><strong>標籤市場</strong></td>
          <td>
            標籤市場模板提供用於部署標籤的代碼段。儘管這減少了所需的代碼知識量，但要成功實現還需要一定程度的對JavaScript和HTML的熟悉。
          </td>
        </tr>
        <tr>
          <td><strong>追踪器</strong></td>
          <td>
            跟踪器是用於收集，存儲數據並將該數據發送到Google跟踪代碼管理器的對象。
          </td>
        </tr>
        <tr>
          <td><strong>扳機</strong></td>
          <td>
            觸發器告訴您何時應將標記代碼添加到頁面。這些是用戶定義的條件。
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <section class="bcls-section">
    <h2 id="Getting_started">入門</h2>
    <p>
      要設置Google跟踪代碼管理器，請按以下步驟操作：
    </p>
    <!-- <ul>
      <li>Define tag configurations for Google Analytics</li>
      <li>Define triggers to fire beacons</li>
      <li>
        <p>Create variables for events and custom dimensions</p>

        <aside class="bcls-aside bcls-aside--information">
          Make sure that each dimension's name and index number from Google Tag
          Manager matches the player's plugin JSON file.
        </aside>
      </li>
    </ul> -->

    <h3>腳步</h3>
    <ol class="bcls-tasklist">
      <li>
        查看 Google 的文檔以<a href="https://support.google.com/tagmanager/answer/6103696?hl=en">設置和安裝標籤管理器</a> .
      </li>
      <li>
        <p>
         在<a href="https://tagmanager.google.com/#/home">標籤管理器</a>，創建一個帳戶或使用現有帳戶。要創建新帳戶，請選擇<strong>創建賬戶</strong>按鈕。
        </p>
        <p>
          默認情況下，將為新帳戶創建一個新容器。您可以在每個帳戶中創建其他容器。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Create account"
            src="/assets/images/plugins/google-tag-manager/create-account.png"
          />
          <figcaption class="bcls-caption--image">創建帳號</figcaption>
        </figure>
      </li>
      <li>
        <p>
         輸入新帳戶頁面的值，包括帳戶名和容器名。選擇目標平台。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="New account information"
            src="/assets/images/plugins/google-tag-manager/new-account.png"
          />
          <figcaption class="bcls-caption--image">新帳戶信息</figcaption>
        </figure>
      </li>
      <li>
        選擇<strong>創建</strong>按鈕。
      </li>
      <!-- <li>
        Copy your Google Analytics account id for later use.
      </li>
      <li>
        Copy your Google Tag Manager tracking id for later use. This should be formatted as <code translate="No">GTM-XXXXXX</code>.
      </li> -->
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Reviewing_events_to_track">查看事件以進行跟踪</h2>

    <p>查看下表，並確定要跟踪的事件。</p>

    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th style="width:15%">類型</th>
          <th style="width:20%">事件 </th>
          <th style="width:65%">描述</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>玩家負荷</td>
          <td><code translate="No">bcvideo_player_load</code></td>
          <td>
            播放器已加載並可以播放
          </td>
        </tr>
        <tr>
          <td>影片曝光</td>
          <td><code translate="No">bcvideo_video_impression</code></td>
          <td>
            視頻已加載到播放器中，可以播放了
          </td>
        </tr>
        <tr>
          <td>影片觀看</td>
          <td><code translate="No">bcvideo_video_view</code></td>
          <td>
            視頻已通過自動播放或由於用戶互動而開始播放
          </td>
        </tr>
        <tr>
          <td>視頻互動</td>
          <td><code translate="No">bcvideo_video_engagement</code></td>
          <td>
            用戶觀看了視頻時間軸的秒數範圍。此事件是用於跟踪視頻參與度的心跳，可能會在播放期間多次發送，具體取決於用戶交互和視頻長度。
          </td>
        </tr>
        <tr>
          <td>播放要求</td>
          <td><code translate="No">bcvideo_play_request</code></td>
          <td>
            播放是通過用戶明確單擊“播放"按鈕啟動的，或者是在平台在自動播放場景中觸發播放時自動啟動的
          </td>
        </tr>
        <tr>
          <td>廣告開始</td>
          <td><code translate="No">bcvideo_ad_start</code></td>
          <td>
            播放平台將控制權移交給廣告代理
          </td>
        </tr>
        <tr>
          <td>廣告結束</td>
          <td><code translate="No">bcvideo_ad_end</code></td>
          <td>
            控制權從廣告代理交還給播放平台
          </td>
        </tr>
        <tr>
          <td>錯誤 </td>
          <td><code translate="No">bcvideo_error</code></td>
          <td>
            發生致命錯誤，破壞了播放體驗
          </td>
        </tr>
        <tr>
          <td>影片完成</td>
          <td><code translate="No">bcvideo_video_complete</code></td>
          <td>
            視頻播放完成
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <section class="bcls-section">
    <h2 id="Creating_variables_tags_&_triggers">創建變量，標籤和触發器</h2>
    <p>您要跟踪的每個Brightcove事件都必須在Google跟踪代碼管理器（GTM）中創建為事件代碼。然後，來自GTM的事件ID將在“播放器"模塊中使用。這允許將Brightcove事件數據傳遞到GTM事件。</p>
    <p>對於每個事件代碼，您需要創建一個GTM觸發器，以將事件發送到Google Analytics（分析）。然後，在GTM中<strong>變數</strong>標籤，您將創建與每個事件關聯的自定義參數。</p>
    
    <!-- <p>You can create Variables, Tags and Triggers in Google Tag Manager, as shown below, or you can <a href="#Importing_a_container_file_in_GTM">import a Container file in GTM</a>. </p> -->
    
    <h3>向GTM添加變量</h3>
    <p>Brightcove參數攜帶其他數據，並與事件一起傳遞。必須在Google跟踪代碼管理器中將每個要記錄的Brightcove參數創建為變量。參數名稱將在播放器內部使用，從而可以將Brightcove參數傳遞到Google跟踪代碼管理器變量。</p>

    <p>
      要在Google跟踪代碼管理器中創建變量，請按照以下步驟操作
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
         登錄到您的Google跟踪代碼管理器帳戶
        </p>
      </li>
      <li>
        選擇<strong>變數</strong>在左側導航中。 
      </li>
      <li>
        <p>在裡面<strong>用戶定義的變量</strong>部分，選擇<strong>新的</strong>按鈕。</p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Data Layer Variable"
            src="/assets/images/plugins/google-tag-manager/new-variable.png"
          />
          <figcaption class="bcls-caption--image">數據層變量</figcaption>
        </figure>
      </li>
      <li>
        <p>
          為了<strong>變量類型</strong>， 選擇<strong>數據層變量</strong>。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Data Layer Variable"
            src="/assets/images/plugins/google-tag-manager/variable-type.png"
          />
          <figcaption class="bcls-caption--image">數據層變量</figcaption>
        </figure>
      </li>
      <li>
        <p>
          輸入詳細信息：
        </p>
        <ul>
          <li>
            <strong>數據層變量名稱</strong> -變量名
          </li>
          <li>
            <strong>數據層版本</strong> - 版本 2
          </li>
        </ul>   
      </li>
      <li>
        <p>
          選擇<strong>節省</strong> .
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Save variable"
            src="/assets/images/plugins/google-tag-manager/save-variable.png"
          />
          <figcaption class="bcls-caption--image">保存變量</figcaption>
        </figure>
      </li>
      <li>
        <p>
          您可以將其創建為GTM變量的Brightcove參數：
        </p>
        <ul>
          <li>
            <strong>帳戶</strong> -Brightcove帳戶名
          </li>
          <li>
            <strong>播放器</strong> -玩家編號
          </li>
          <li>
            <strong>選手姓名</strong> - 選手姓名
          </li>
          <li>
            <strong>平台版本</strong> -平台版本號
          </li>
          <li>
            <strong>會議</strong> -會話標識符
          </li>
          <li>
            <strong>視頻</strong> -影片ID
          </li>
          <li>
            <strong>影片名稱</strong> -影片名稱
          </li>
          <li>
            <strong>範圍</strong> -以StartSecond..EndSecond格式查看的秒數範圍
          </li>
          <li>
            <strong>觀看視頻秒數</strong> -觀看秒數
          </li>
          <li>
            <strong>視頻時長</strong> -視頻的持續時間（以秒為單位）
          </li>
          <li>
            <strong>觀看視頻百分比</strong> -觀看視頻的百分比
          </li>
          <li>
            <strong>錯誤代碼</strong> -與事件相關的特定於平台的錯誤代碼
          </li>
          <li>
            <strong>影片里程碑</strong> -視頻完成的里程碑（25％，50％，75％，100％）
          </li>
          <li>
            <strong>影片播放頭</strong> -視頻中觸發事件的時間
          </li>
          <li>
            <strong>國家</strong> - ISO-3166 (alpha 2) 國家代碼，例如：我們
          </li>
          <li>
            <strong>國家的名字</strong> - 人類可讀的國家名稱，例如：美國
          </li>
          <li>
            <strong>地區</strong> -ISO-3166（alpha 2）區域代碼
          </li>
          <li>
            <strong>地區名稱</strong> -可讀區域名稱
          </li>
          <li>
            <strong>城市</strong> - 城市名
          </li>
          <li>
            <strong>瀏覽器</strong> -使用的瀏覽器的全名和版本
          </li>
          <li>
            <strong>瀏覽器類型</strong> -使用的瀏覽器的通用名稱（例如，Chrome，Edge，Firefox）
          </li>
          <li>
            <strong>目的地</strong> -發起事件的URI
          </li>
          <li>
            <strong>來源</strong> -將最終用戶發送到目的地的URI
          </li>
          <li>
            <strong>設備類型</strong> -在User-Agent不可靠的情況下重寫以指定引發事件的設備的OS
          </li>
          <li>
            <strong>設備操作系統</strong> -設備正在使用的操作系統的名稱
          </li>
          <li>
            <strong>設備操作系統版本</strong> -設備使用的操作系統版本
          </li>
        </ul>   
      </li>
      <li>
        <p>
          您的用戶定義變量在GTM中應類似於以下內容：
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="User-defined variables"
            src="/assets/images/plugins/google-tag-manager/user-defined-vars.png"
          />
          <figcaption class="bcls-caption--image">用戶定義的變量</figcaption>
        </figure>
      </li>
    </ol>

    <h3>將標籤添加到GTM</h3>
    <p>確定要跟踪的事件後，必須在Google跟踪代碼管理器中創建代碼。</p>

    <p>
      要在Google跟踪代碼管理器中創建代碼，請按照以下步驟操作
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
         登錄到您的Google跟踪代碼管理器帳戶
        </p>
      </li>
      <li>
        選擇<strong>標籤</strong>在左側導航欄中，然後選擇<strong>新的</strong>按鈕。 
      </li>
      <li>
        <p>
          選擇<strong>標籤類型</strong>作為<strong>谷歌分析：通用分析</strong>。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Tag configuration"
            src="/assets/images/plugins/google-tag-manager/tag-configuration.png"
          />
          <figcaption class="bcls-caption--image">標籤配置</figcaption>
        </figure>
      </li>
      <li>
        <p>
          輸入標籤詳細信息：
        </p>
        <ul>
          <li>
            <strong>軌道類型</strong> - 調成<strong>事件</strong>
          </li>
          <li>
            <strong>類別</strong> -事件類別變量
          </li>
          <li>
            <strong>行動</strong> -事件動作變量
          </li>
          <li>
            <strong>標籤</strong> -事件標籤變量
          </li>
          <li>
            <strong>價值</strong> -零
          </li>
          <li>
            <strong>非互動命中</strong> - 調成<strong>真的</strong>
          </li>
          <li>
            <strong>Google Analytics（分析）設置</strong> - 默認設置
          </li>
          <li>
            <strong>跟踪號碼</strong> -GA信息中心的跟踪ID。選擇“跟踪ID變量"。
          </li>
        </ul>   
      </li>
      <li>
        <p>
          轉到高級設置，然後設置相關的“自定義尺寸索引"和“尺寸值"。這些索引應與Google Analytics（分析）中的索引匹配。
        </p>
      </li>
      <li>
        <p>
          您的代碼在GTM中看起來應該與此類似：
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Tags in GTM"
            src="/assets/images/plugins/google-tag-manager/tags-in-gtm.png"
          />
          <figcaption class="bcls-caption--image">GTM中的標籤</figcaption>
        </figure>
      </li>
    </ol>

    <h3>將觸發器添加到GTM</h3>
    <p>對於您要跟踪的每個事件，您還需要Google跟踪代碼管理器中的觸發器。</p>

    <p>
      要在Google跟踪代碼管理器中創建觸發器，請按照以下步驟操作
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
         登錄到您的Google跟踪代碼管理器帳戶
        </p>
      </li>
      <li>
        選擇<strong>扳機</strong>在左側導航欄中，然後選擇<strong>新的</strong>按鈕。 
      </li>
      <li>
        <p>
          選擇<strong>觸發類型</strong>作為<strong>自訂活動</strong>。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Trigger configuration"
            src="/assets/images/plugins/google-tag-manager/trigger-configuration.png"
          />
          <figcaption class="bcls-caption--image">觸發配置</figcaption>
        </figure>
      </li>
      <li>
        <p>
          輸入事件名稱。
        </p>
      </li>
      <li>
        <p>
          為要跟踪的每個事件創建一個觸發器。
        </p>
      </li>
      <li>
        <p>
          您的觸發器應在GTM中看起來與此類似：
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Triggers in GTM"
            src="/assets/images/plugins/google-tag-manager/triggers-in-gtm.png"
          />
          <figcaption class="bcls-caption--image">GTM中的觸發器</figcaption>
        </figure>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Integrating_with_Brightcove">與Brightcove集成</h2>
    <p>
      要將GTM與Brightcove Player集成，請將Google跟踪代碼管理器插件添加到您的播放器中。
    </p>

    <h3>使用工作室</h3>

    <p>
      以下步驟詳細說明了使用Video Cloud Studio加載插件。
    </p>

    <ol class="bcls-tasklist-restart">
      <li>
        在Video Cloud Studio中，打開<strong>選手們</strong>模塊，然後創建一個新播放器或找到您要向其添加插件的播放器。
      </li>
      <li>選取播放程式的連結，以開啟播放程式的內容。</li>
      <li>選擇<strong>插件</strong>在左側導航菜單中。</li>
      <li>
        <p>
          接下來，選取 [ <strong>新增外掛程式] </strong>按鈕，然後選取 [ <strong>  Brightcove 外掛程式] </strong>。
        </p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Add a Plugin button"
            src="/assets/images/plugins/google-tag-manager/add-a-plugin.png"
          />
          <figcaption class="bcls-caption--image">
            新增外掛程式按鈕
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          展開<strong>Brightcove插件</strong>下拉菜單，然後選擇<strong>Google跟踪代碼管理器</strong>。
        </p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Google Tag Manager plugin"
            src="/assets/images/plugins/google-tag-manager/gtm-plugin.png"
          />
          <figcaption class="bcls-caption--image">
            Google跟踪代碼管理器插件
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          要告訴播放器您要跟踪哪些事件和自定義維度，請創建一個JSON對像以粘貼到<strong>選項（JSON）</strong>文本框。
        </p>
        <p>
          欄位說明：
        </p>

        <ul>
          <li><code translate="No">tracker</code> - Your Google Tag Manager tracking id (GTM-XXXXXXX)</li>
          <li><code translate="No">eventsToTrack</code> - Events you want to track</li>
          <li>
            <code translate="No">paramsToTrack</code> - Custom dimensions you want to track
          </li>
        </ul>
        <p>這是一個例子：</p>

        <pre class="line-numbers">
<code class="language-json" translate="No">{
  "tracker":"<span class="bcls-input">your Google Tag Manager id</span>",
	"paramsToTrack": {
    "bcvideo_video_seconds_viewed":"video_seconds_viewed",
    "bcvideo_video_playhead":"video_playhead",
    "bcvideo_account":"account",
    "bcvideo_player":"player",
    "bcvideo_player_name":"player_name",
    "bcvideo_video":"video",
    "bcvideo_video_name":"video_name",
	"bcvideo_session":"session",
    "bcvideo_platform_version":"platform_version",
	"bcvideo_range":"range",
    "bcvideo_video_duration":"video_duration",
    "bcvideo_video_percent_viewed":"video_percent_viewed",
    "bcvideo_error_code":"error_code",
    "bcvideo_video_milestone":"video_milestone",
    "bcvideo_destination":"destination"
  },
  "eventsToTrack": {
    "video_impression": "Video Impression",
	"video_view": "Video View",
	"video_complete": "Video Complete",
    "play_request": "Play Request",
    "video_engagement": "Video Engagement",
    "ad_start": "Ad Start",
    "ad_end": "Ad End",
    "player_load": "Player Load",
    "error": "Error"
  }
}</code></pre>

        <aside class="bcls-aside bcls-aside--tip"> Make sure your custom dimensions in the JSON object match the name and index within Google Analytics. </aside>
      </li>
      <li>
        <p>
          選取「<strong>儲存</strong>」按鈕。您現在將看到<strong>Google跟踪代碼管理器</strong>插件已添加到播放器的插件列表中。
        </p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Save button"
            src="/assets/images/plugins/google-tag-manager/gtm-save.png"
          />
          <figcaption class="bcls-caption--image">保存按鈕</figcaption>
        </figure>
      </li>
      <li>
        若要發佈播放程式，請選取「<strong>發佈和嵌入」&gt;「發佈變更」</strong>。
      </li>
      <li>要關閉對話框，請選擇<strong>關閉</strong>。</li>
      <li>
        <p>
          返回到<strong>媒體</strong>並使用您剛剛為Google跟踪代碼管理器更新的播放器發布視頻或播放列表。
        </p>

        <p>
          當播放器加載並且用戶與播放器交互時，將跟踪指定的事件和參數。
        </p>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Creating_custom_dimensions">
      創建自定義尺寸
    </h2>
    <p>
      自定義維度是您在Google Analytics（分析）中創建的指標。有關詳細信息，請參見Google的<a href="https://support.google.com/analytics/answer/2709828?hl=en">自定義維度和指標</a>文檔。
    </p>
    <p>
      使用Google腳本，您可以自動化在Google Analytics（分析）中添加自定義維度的過程。
    </p>

    <h3>腳步</h3>
    <p>請按照以下步驟使用Google App腳本創建自定義尺寸：</p>
    <ol class="bcls-tasklist-restart">
      <!-- <li>
    Open the <a href="https://drive.google.com/file/d/1Boxem7n4UNy7IbofMTTw2bmsdviSIvbZ/view">custom app script</a>.
  </li> -->
    <li>
      登錄到Google。
    </li>
    <li>
      <p>
        導航到<a href="https://script.google.com/home/start">G Suite開發人員中心</a>並選擇Apps Script新的空白項目。
      </p>

      <figure class="bcls-figure">
        <img
          class="bcls-image--no-border"
          alt="Apps Script project"
          src="/assets/images/plugins/google-tag-manager/apps-script-project.png"
        />
        <figcaption class="bcls-caption--image">
          Apps腳本項目
        </figcaption>
      </figure>
    </li>
    <li>
      <p>
        選擇<strong>無標題的專案</strong>並給您的項目起個名字。
      </p>

      <figure class="bcls-figure">
        <img
          class="bcls-image--no-border"
          alt="Script editor"
          src="/assets/images/plugins/google-tag-manager/script-editor.png"
        />
        <figcaption class="bcls-caption--image">
          腳本編輯器
        </figcaption>
      </figure>
    </li>
    <li>
      <p>將以下自定義應用程序腳本代碼複製到編輯器，並更新以下值：</p>
      <ul>
        <li>
          <code translate="No">accountId</code> - Your Google Analytics account ID
        </li>
        <li>
          <code translate="No">webPropertyId</code> - Your Google account tracking ID
        </li>
        <li>
          <code translate="No">dimensions</code> - The custom dimensions to be added.當前列表包含所有自定義維度。請注意，尺寸以開頭<code translate="No">bcvideo_</code>。這是為了確保與這些變量沒有命名衝突。
        </li>
      </ul>

        <pre class="line-numbers">
<code class="language-javascript" translate="No">//Set values for GA Account ID and web property ID to which you have to set custom dimensions.
var accountId='<span class="bcls-input">your account id</span>';
var webPropertyId='<span class="bcls-input">your tracking code</span>';
//Add required custom dimensions to be created to this list
var dimensions=<span class="bcls-highlight">['bcvideo_video_seconds_viewed','bcvideo_video_playhead','bcvideo_account','bcvideo_player','bcvideo_player_name','bcvideo_video','bcvideo_video_name','bcvideo_session','bcvideo_platform_version','bcvideo_range','bcvideo_video_duration',
'bcvideo_video_percent_viewed','bcvideo_error_code','bcvideo_milestone','bcvideo_destination'];</span>


//Function to create custom dimensions in GA
function createGACustomDimensions() {

  //This loop iterates through the custom dimensions in order to set the custom dimension scope, active values into our GA property
  for(var index=0;index&lt;dimensions.length;index++){
  var customDimensions ={
    'name': dimensions[index],
    'scope':'HIT',
    'active':true,
  }

  //This create a request to the new custom dimension
  Analytics.Management.CustomDimensions.insert(customDimensions,accountId,webPropertyId);

  // Pause for 1 second between adding each custom dimension, this ensure that the GA property has time
  // to process the request fully before moving to the next custom dimension.
  Utilities.sleep(1000)
  }
}</code></pre>

        <aside class="bcls-aside bcls-aside--tip"> In this example, we are putting the dimensions in an object named <code translate="No">customDimensions</code>.要將這些添加為數據層變量，您需要將每個變量名稱引用為<code translate="No">customDimensions.{dimension}</code>

        <!-- <aside class="bcls-aside bcls-aside--tip">The script should be configured to access the <a href="https://developers.google.com/analytics/devguides/reporting/core/v4">Google Analytics API</a> from the resource menu.</aside> -->
      </li>
      <li>
        <p>
          更換<code translate="No">function myFunction(){}</code>代碼塊（如下所示）以及您的自定義應用腳本。
        </p>

        <pre class="line-numbers">
<code class="language-javascript" translate="No">function myFunction() {

}</code></pre>
      </li>
      <li>
        保存項目。您需要保存項目才能使用Google Analytics（分析）API。
      </li>
      <li>
        <p>
          要啟用Google Analytics（分析）API，請在腳本編輯器中選擇<strong>資源</strong> &gt; <strong>進階Google服務</strong>。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Advanced Google Services"
            src="/assets/images/plugins/google-tag-manager/advanced-services.png"
          />
          <figcaption class="bcls-caption--image">
            進階Google服務
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          然後找到<strong>進階Google服務</strong>，然後將其打開<strong>上</strong>。選擇<strong>好的</strong>。
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Google Analytics API"
            src="/assets/images/plugins/google-tag-manager/enable-gtm2.png"
          />
          <figcaption class="bcls-caption--image">
            Google Analytics API
          </figcaption>
        </figure>
      </li>
      <li>
        <p>要運行您的應用腳本，請選擇<strong>跑步</strong> &gt; <strong>運行功能</strong>，然後選擇您的腳本。</p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Run script"
            src="/assets/images/plugins/google-tag-manager/run-script.png"
          />
          <figcaption class="bcls-caption--image">運行腳本</figcaption>
        </figure>
      </li>
      <li>
        <p>在授權對話框中，選擇<strong>審閱權限</strong>。</p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Authorization dialog"
            src="/assets/images/plugins/google-tag-manager/authorization-dialog.png"
          />
          <figcaption class="bcls-caption--image">授權對話框</figcaption>
        </figure>
      </li>
      <li>
        <p>
          選擇<strong>允許</strong>按鈕。
        </p>
         <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Allow permissions"
            src="/assets/images/plugins/google-tag-manager/allow-permissions.png"
          />
          <figcaption class="bcls-caption--image">允許權限</figcaption>
        </figure>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Viewing_custom_dimensions">
      查看自定義尺寸
    </h2>
    <p>
      要在Google Analytics（分析）中查看自定義維度，請按照以下步驟操作：
    </p>

    <ol class="bcls-tasklist-restart">
    <li>
      登錄到Google Analytics（分析）。
    </li>
    <li>
      <p>
       選擇<strong>行政</strong>
      </p>
      <figure class="bcls-figure">
        <img
          class="bcls-image--no-border"
          alt="Analytics admin"
          src="/assets/images/plugins/google-tag-manager/analytics-admin.png"
        />
        <figcaption class="bcls-caption--image">
          分析管理員
        </figcaption>
      </figure>
    </li>
    <li>
      <p>
       點擊<strong>自定義定義</strong>展開它，然後選擇<strong>自定義尺寸</strong>。
      </p>
      <figure class="bcls-figure">
        <img
          class="bcls-image--no-border"
          alt="Custom dimensions"
          src="/assets/images/plugins/google-tag-manager/custom-dimensions.png"
        />
        <figcaption class="bcls-caption--image">
          自定義尺寸
        </figcaption>
      </figure>
    </li>
    <li>
      <p>
       您應該看到自定義維度及其關聯的索引。
      </p>
      <figure class="bcls-figure">
        <img
          class="bcls-image--no-border"
          alt="Dimensions and indices"
          src="/assets/images/plugins/google-tag-manager/dimensions-indices.png"
        />
        <figcaption class="bcls-caption--image">
          尺寸和指標
        </figcaption>
      </figure>
    </li>
    
    </ol>
  </section>

  <!-- <section class="bcls-section">
    <h2 id="Importing_a_container_file_in_GTM">Importing a container file</h2>

    <p>
     One way to add Variables, Tags and Triggers to Google Tag Manager is to import a JSON-formatted Container file. For details, see Google's <a href="https://support.google.com/tagmanager/answer/6106997?hl=en">Container export and import</a> document.
    </p>
    <h3>Steps</h3>
    <p>
      Follow these steps to import a Container file:
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
         In your JSON-formatted Container file, set the following values:
        </p>
        <ul>
          <li>
            <code translate="No">publicID</code> - Your GTM tracker ID (GTM-XXXXXX)
          </li>
          <li>
             <code translate="No">value</code> - Your GA tracker ID (UA-111111111-1)
          </li>
        </ul>
        <p>
          Snippet1 from an example Container file:
        </p>
        <pre class="line-numbers">
<code class="language-json" translate="No">...
&quot;container&quot;: {
   &quot;path&quot;: &quot;accounts/470123456/containers/13171830&quot;,
    &quot;accountId&quot;: &quot;470123456&quot;,
    &quot;containerId&quot;: &quot;13171830&quot;,
    &quot;name&quot;: &quot;solutions.brightcove.com&quot;,
    &quot;publicId&quot;: &quot;<span class="bcls-input">your GTM tracker ID</span>&quot;,
    &quot;usageContext&quot;: [
        &quot;WEB&quot;
    ],
    &quot;fingerprint&quot;: &quot;1571234567890&quot;,
    ...
</code></pre>
  <p>
      Snippet2 from an example Container file:
    </p>
    <pre class="line-numbers">
<code class="language-json" translate="No">...
{
    &quot;accountId&quot;: &quot;470123456&quot;,
    &quot;containerId&quot;: &quot;13171830&quot;,
    &quot;variableId&quot;: &quot;2&quot;,
    &quot;name&quot;: &quot;Google Analytics Settings&quot;,
    &quot;type&quot;: &quot;gas&quot;,
    &quot;parameter&quot;: [
        {
            &quot;type&quot;: &quot;TEMPLATE&quot;,
            &quot;key&quot;: &quot;trackingId&quot;,
            &quot;value&quot;: &quot;<span class="bcls-input">your GA tracker ID</span>&quot;
        }
    ],
    &quot;fingerprint&quot;: &quot;1573675830590&quot;
}
 ...
</code></pre>
      </li>
      <li>
        Log in to your GTM account.
      </li>
      <li>
        Select the <strong>Admin</strong> tab. 
      </li>
      <li>
        Select <strong>Import Container</strong>
      </li>
      <li>
        <p>
         Select <strong>Choose container file</strong>.
        </p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Import container file"
            src="/assets/images/plugins/google-tag-manager/import-container.png"
          />
          <figcaption class="bcls-caption--image">Import container file</figcaption>
        </figure>
      </li>
      <li>
        Select <strong>Existing</strong> workspace.
      </li>
      <li>
        Preview the file and publish it. This will create the necessary Variables, Tags and Triggers in GTM.
      </li>
    </ol>
  </section> -->

  <section class="bcls-section">
    <h2 id="Events_and_parameters">事件和參數</h2>

    <p>
      以下事件和參數可以發送到Google跟踪代碼管理器。
    </p>

    <h3>活動</h3>

    <p>這些事件來自您的播放器。</p>

    <ul>
      <li><code translate="No">player_load</code></li>
      <li><code translate="No">video_impression</code></li>
      <li><code translate="No">play_request</code></li>
      <li><code translate="No">video_view</code></li>
      <li>
        <code translate="No">video_engagement</code>
        <ul>
          <li><code translate="No">video_engagement</code> - 25% Milestone</li>
          <li><code translate="No">video_engagement</code> - 50% Milestone</li>
          <li><code translate="No">video_engagement</code> - 75% Milestone</li>
        </ul>
      </li>
      <li><code translate="No">ad_start</code></li>
      <li><code translate="No">ad_end</code></li>
      <li><code translate="No">error</code></li>
      <li><code translate="No">video_complete</code> - 100% Milestone</li>
    </ul>

    <p>
      觀看視頻的百分比（<code translate="No">video_engagement</code>）的計算方式如下（類似於Google和Adobe Analytics中的video_engagement事件）：
    </p>

    <pre>
<code class="language-json" translate="No">Video watched percentage = duration the user actually watched / total video duration</code></pre>

    <p>
      例如，在20秒的視頻中，以下兩種情況均可實現25％的里程碑
    </p>

    <ul>
      <li>用戶觀看時間為0-5秒</li>
      <li>
        用戶從0-1秒觀看，然後跳到11秒，然後觀看15秒
      </li>
    </ul>

    <p>
      在上述兩種情況下，用戶觀看了5秒，因此里程碑將報告為25％。
    </p>

    <h3>參數</h3>

    <p>這些參數來自播放器。</p>

    <ul>
      <li><code translate="No">account</code></li>
      <li><code translate="No">player</code></li>
      <li><code translate="No">player_name</code></li>
      <li><code translate="No">video</code></li>
      <li><code translate="No">video_name</code></li>
      <li><code translate="No">video_duration</code></li>
      <li><code translate="No">range</code></li>
      <li><code translate="No">video_seconds_viewed</code></li>
      <li><code translate="No">session</code></li>
      <li><code translate="No">platform_version</code></li>
      <li><code translate="No">video_percent_viewed</code></li>
      <li><code translate="No">video_playhead</code></li>
    </ul>

    <h3>自動參數</h3>

    <p>
      這些參數會自動發送到Google跟踪代碼管理器，因此您無需在JSON代碼中指定這些參數。
    </p>

    <ul>
      <li><code translate="No">country</code></li>
      <li><code translate="No">country_name</code></li>
      <li><code translate="No">region</code></li>
      <li><code translate="No">region_name</code></li>
      <li><code translate="No">city</code></li>
      <li><code translate="No">browser</code></li>
      <li><code translate="No">browser_type</code></li>
      <li><code translate="No">destination</code></li>
      <li><code translate="No">source</code></li>
      <li><code translate="No">device_type</code></li>
      <li><code translate="No">device_os</code></li>
      <li><code translate="No">device_os_version</code></li>
    </ul>
  </section>

  <section class="bcls-section">
    <h2 id="Changelog">變更記錄檔</h2>

    <p>
      見<a href="http://players.brightcove.net/release-notes/brightcove-player-google-tag-manager/index.html">Google 跟踪代碼管理器插件發行說明</a> .
    </p>
    <p>有關歷史發行說明，請參閱<a href="/plugins/changelog/google-tag-manager-plugin-changelog.html">更新日誌在這裡</a> .</p>
  </section>
</article>