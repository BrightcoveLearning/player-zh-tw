---
title: 'HLS 插件' 
description:HLS插件是Brightcove Player插件，它依靠W3C的媒體源擴展（MSE）在本身不支持它的平台上播放HTTP Live Streaming（HLS）視頻。HLS 插件會自動包含在播放器中。
parent: Plugins
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
    <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="HLS_plugin_basics">HLS插件基礎</h2>
    <p>以下幾點可幫助您理解和使用HLS插件：</p>
    <ul>
      <li>如本文檔開頭所述，該插件依賴於W3C的媒體源擴展（MSE）。MSE是W3C規範，允許JavaScript將字節流發送到支持HTML5視頻的Web瀏覽器中的媒體編解碼器。除其他可能的用途外，這還允許完全在JavaScript中實現流媒體的客戶端預取和緩衝代碼的實現。</li>
      <li>使用該插件，您可以在播放器中使用HLS（m3u8）視頻內容。例如，您可以使用以下配置為媒體部分創建一個播放器：
        <pre class="line-numbers">
<code class="language-json" translate="No">"media":{
    "sources": [{
        "src": "http://example.com/video.m3u8",
        "type": "application/x-mpegURL"
    }]
}</code></pre>
      </li>
      <li>使用HLS時，跨域資源共享（CORS）可能是一個問題。有關使用CORS的更多信息，請參見<a href="https://general.support.brightcove.com/developer/concepts-cors.html">CORS指南</a>。</li>
      <li>早於IE11的IE版本不支持HLS。</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="overview">概述</h2>
    <p><a href="https://developer.apple.com/streaming/">HTTP實時流</a>（HLS）憑藉其在iOS和Android上的原生支持，已成為在移動設備上流式傳輸視頻的實際標準。雖然，有很多與平台無關的理由來推薦格式：</p>
    <ul>
      <li>支持（客戶端驅動）自適應比特率選擇</li>
      <li>通過標準HTTP端口交付</li>
      <li>簡單的基於文本的清單格式</li>
      <li>無需專有流服務器</li>
    </ul>
    <p>不幸的是，除Safari之外，所有主流桌面瀏覽器都缺少HLS支持。這使Web開發人員處於不幸的境地，必須維護同一視頻的替代版本，並且可能不得不完全放棄基於HTML的視頻以提供最佳的桌面觀看體驗。</p>
    <p>該插件通過在具有Media Source Extensions或Flash支持的瀏覽器上為HLS提供polyfill來解決這種情況。您可以部署單個HLS流，根據常規HTML5視頻API進行編碼，並在所有大型Web設備類別中創建快速，高質量的視頻體驗。</p>
    <p>目前，此時有 <em>不</em> 支持：</p>
    <ul>
      <li>替代音軌和視頻軌</li>
      <!--                        <li>Subtitles</li>-->
      <li>分段編解碼器 <em>以外</em> 帶有 AAC 音頻的 H.264</li>
      <!--                        <li>Live streams</li>-->
      <li>Internet Explorer &lt;11</li>
    </ul>
    <aside class="bcls-aside bcls-aside--information">注意：為了與所有 MSE 實現的最大兼容性，Brightcove 建議設置<strong>音頻比特率</strong>不低於<strong>48</strong>在您的攝取配置文件中。
  </section>
  <section class="bcls-section">
    <h2 id="options">選項</h2>
    <p>您可以使用幾個選項來配置HLS插件。</p>
    <h3>withCredentials</h3>
    <p>類型：<code translate="No">boolean</code></p>
    <p>可以用作：</p>
    <ul>
      <li>源選項</li>
      <li>初始化選項</li>
    </ul>
    <p>當。。。的時候<code translate="No">withCredentials</code>屬性設置為<code translate="No">true</code>，所有XHR對清單和分段的請求都將具有<code translate="No">withCredentials</code>調成<code translate="No">true</code>也一樣這樣就可以從清單和分段所在的服務器上存儲和傳遞Cookie。這會對CORS產生一些影響，因為在設置後，<code translate="No">Access-Control-Allow-Origin</code>標頭不能設置為<code translate="No">*</code>，此外，響應標頭還需要添加<code translate="No">Access-Control-Allow-Credentials</code>標頭設置為<code translate="No">true</code>。見<a href="http://www.html5rocks.com/en/tutorials/cors/">HTML5Rocks的文章</a>有關更多信息。</p>
    <aside class="bcls-aside bcls-aside--warning">已知問題：<code translate="No">withCredentials</code>不適用於桌面或設備上的 Safari。</aside>
    <p>您可以使用<a href="https://apis.support.brightcove.com/player-management/getting-started/overview-player-management-api.html">播放器管理API</a>使用HTTP <code translate="No">PATCH</code>方法，如下所示：</p>
    <pre class="line-numbers">
<code class="language-json" translate="No">curl \
    --header "Content-Type: application/json" \
    --user YOUR_EMAIL \
    --request PATCH \
    --data '{ "hls": { "withCredentials": true } }' \
https://players.api.brightcove.com/v2/accounts/YOUR_ACCOUNT_ID/players/YOUR_PLAYER_ID/configuration</code></pre>
    <p>您還可以設置<code translate="No">withCredentials</code>選項是基於每個來源的，而不是如所示的基於播放器的。例如，在設置來源時，您可以包括<code translate="No">withCredentials</code>，如下所示：</p>
    <pre class="line-numbers">
<code class="language-json" translate="No">curl \
  --header "Content-Type: application/json" \
  --user $EMAIL \
  --request POST \
  --data '{
      "name": "MySamplePlayer",
      "configuration": {
        "media": {
          "sources": [{
            "src":"http://solutions.brightcove.com/bcls/assets/videos/Tiger.mp4",
            "type":"video/mp4",
            "withCredentials": true
          }]
        }
      }
    }' \
https://players.api.brightcove.com/v2/accounts/$ACCOUNT_ID/players</code></pre>
    <h3 id="Runtime_configuration">運行時配置</h3>
    <p>您可以配置<code translate="No">withCredentials</code>在運行時。您將看到以下兩個實現：</p>
    <ul>
      <li>使用<code translate="No">player.hls.xhr.beforeRequest</code></li>
      <li>使用<code translate="No">player.src()</code></li>
    </ul>
    <p>在以下代碼中，您正在使用<code translate="No">player.hls.xhr.beforeRequest</code>分配一個函數，該函數將與包含用於創建該對象的選項的對像一起調用<code translate="No">xhr</code>要求。在此示例中，您僅看到<code translate="No">withCredentials</code>正在配置。</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">if (videojs.Hls) {
  videojs.Hls.xhr.beforeRequest = function (options) {
    options.withCredentials = true;
  }
}</code></pre>
    <p>您還可以設置<code translate="No">withCredentials</code>設置視頻源時的選項。您使用<code translate="No">player.src()</code>方法，如下所示：</p>
    <aside class="bcls-aside bcls-aside--warning">當前存在一個已知問題，即在將 Firefox 與 IMA3 廣告一起使用時，此配置選項不起作用。您可以使用<code translate="No">player.hls.xhr.beforeRequest</code>以避免這個問題。
    <pre class="line-numbers">
<code class="language-javascript" translate="No">player.src({
  src: 'https://adomain.com/bipbop_16x9_variant.m3u8',
  type: 'application/x-mpegURL',
  withCredentials: true
});</code></pre>
    <!-- <h3>useCueTags</h3>

                              <p>Type: <code translate="No">boolean</code></p>

                              <p>Can be used as:</p>
                              <ul>
                                  <li>an initialization option</li>
                              </ul>


                              <p>When the <code translate="No">useCueTags</code> property is set to <code translate="No">true</code>, a text track is created with label 'ad-cues' and kind 'metadata'. The track is then added to player.textTracks(). Changes in active cue may be tracked by following the <a href="https://docs.brightcove.com/brightcove-player/current-release/TextTrack.html">cue points API for text tracks</a>. For example:</p>

                              <pre class="line-numbers"><code class="language-javascript" translate="No">let textTracks = player.textTracks();
                              let cuesTrack;

                              for (let i = 0; i &lt; textTracks.length; i++) {
                                if (textTracks[i].label === 'ad-cues') {
                                  cuesTrack = textTracks[i];
                                }
                              }

                              cuesTrack.addEventListener('cuechange', function() {
                                let activeCues = cuesTrack.activeCues;

                                for (let i = 0; i &lt; activeCues.length; i++) {
                                  let activeCue = activeCues[i];

                                  console.log('Cue runs from ' + activeCue.startTime +
                                              ' to ' + activeCue.endTime);
                                }
                              });</code></pre>

                              <p>You can configure the plugin using the <a href="https://apis.support.brightcove.com/player-management/getting-started/overview-player-management-api.html">Player Management API</a> using an HTTP <code translate="No">PATCH</code> method, as shown here:</p>

                              <pre class="line-numbers"><code class="language-json" translate="No">curl \
                                  --header "Content-Type: application/json" \
                                  --user YOUR_EMAIL \
                                  --request PATCH \
                                  --data '{ "hls": { "useCueTags": true } }' \
                              https://players.api.brightcove.com/v2/accounts/YOUR_ACCOUNT_ID/players/YOUR_PLAYER_ID/configuration</code></pre>

                              <h3>overrideNative</h3>

                              <p>Type: <code translate="No">boolean</code></p>

                              <p>Can be used as:</p>
                              <ul>
                                  <li>an initialization option</li>
                              </ul>

                              <p>Try to use <code translate="No">videojs-contrib-hls</code> even on platforms that provide some level of HLS support natively. There are a number of platforms that technically play back HLS content but aren't very reliable or are missing features like CEA-608 captions support. When <code translate="No">overrideNative</code> is <code translate="No">true</code>, if the platform supports Media Source Extensions <code translate="No">videojs-contrib-hls</code> will take over HLS playback to provide a more consistent experience.</p>

                              <aside class="bcls-aside bcls-aside--information">If you use this option, you must also set <code translate="No">videojs.options.html5.nativeAudioTracks</code> and <code translate="No">videojs.options.html5.nativeVideoTracks</code> to <code translate="No">false</code>. <code translate="No">videojs-contrib-hls</code> relies on audio and video tracks to play streams with alternate audio and requires additional capabilities only supported by non-native tracks in video.js.</aside>


                              <p>You can configure the plugin using the <a href="https://apis.support.brightcove.com/player-management/getting-started/overview-player-management-api.html">Player Management API</a> using an HTTP <code translate="No">PATCH</code> method, as shown here:</p>

                              <pre class="line-numbers"><code class="language-json" translate="No">curl \
                                  --header "Content-Type: application/json" \
                                  --user YOUR_EMAIL \
                                  --request PATCH \
                                  --data '{ "hls": { "overrideNative": true } }' \
                              https://players.api.brightcove.com/v2/accounts/YOUR_ACCOUNT_ID/players/YOUR_PLAYER_ID/configuration</code></pre>

                              <h3>blacklistDuration</h3>

                              <p>Type: <code translate="No">number</code></p>

                              <p>Can be used as:</p>
                              <ul>
                                  <li>an initialization option</li>
                              </ul>

                              <p>When the <code translate="No">blacklistDuration</code> property is set to a time duration in seconds, if a playlist is blacklisted, it will be blacklisted for a period of that customized duration. This enables the blacklist duration to be configured by the user.</p>

                              <p>You can configure the plugin using the <a href="https://apis.support.brightcove.com/player-management/getting-started/overview-player-management-api.html">Player Management API</a> using an HTTP <code translate="No">PATCH</code> method, as shown here:</p>

                              <pre class="line-numbers"><code class="language-json" translate="No">curl \
                                  --header "Content-Type: application/json" \
                                  --user YOUR_EMAIL \
                                  --request PATCH \
                                  --data '{ "hls": { "blacklistDuration": 10 } }' \
                              https://players.api.brightcove.com/v2/accounts/YOUR_ACCOUNT_ID/players/YOUR_PLAYER_ID/configuration</code></pre>

                              <h3>bandwidth</h3>

                              <p>Type: <code translate="No">number</code></p>

                              <p>Can be used as:</p>
                              <ul>
                                  <li>an initialization option</li>
                              </ul>

                              <p>When the <code translate="No">bandwidth</code> property is set (bits per second), it will be used in the calculation for initial playlist selection, before more bandwidth information is seen by the player.</p>

                              <p>You can configure the plugin using the <a href="https://apis.support.brightcove.com/player-management/getting-started/overview-player-management-api.html">Player Management API</a> using an HTTP <code translate="No">PATCH</code> method, as shown here:</p>

                              <pre class="line-numbers"><code class="language-json" translate="No">curl \
                                  --header "Content-Type: application/json" \
                                  --user YOUR_EMAIL \
                                  --request PATCH \
                                  --data '{ "hls": { "bandwidth": 3000 } }' \
                              https://players.api.brightcove.com/v2/accounts/YOUR_ACCOUNT_ID/players/YOUR_PLAYER_ID/configuration</code></pre> -->
    
    <h3>enableLowInitialPlaylist</h3>
    <p>類型：<code translate="No">boolean</code>   </p>
    <p>默認：<code translate="No">undefined</code>，但在Android設備上查看瀏覽器時除外；然後將其設置為<code translate="No">true</code>。您可以通過如下所示為播放器打補丁（值如下）來更改Android設備的此行為：<code translate="No">false</code>。</p>
    <p>可以用作：</p>
    <ul>
      <li>初始化選項</li>
    </ul>
    <p>什麼時候<code translate="No">enableLowInitialPlaylist</code>設置為true，則最初將用於選擇最低比特率的播放列表。這有助於減少播放開始時間。</p>
    <p>您可以使用<a href="https://apis.support.brightcove.com/player-management/getting-started/overview-player-management-api.html">播放器管理API</a>使用HTTP <code translate="No">PATCH</code>方法，如下所示：</p>
    <pre class="line-numbers">
<code class="language-json" translate="No">curl \
    --header "Content-Type: application/json" \
    --user YOUR_EMAIL \
    --request PATCH \
    --data '{ "hls": { "enableLowInitialPlaylist": true } }' \
https://players.api.brightcove.com/v2/accounts/YOUR_ACCOUNT_ID/players/YOUR_PLAYER_ID/configuration</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="runtimeproperties">運行時屬性</h2>
    <p>通常，您可以通過以下方式訪問HLS對象：</p>
    <ul>
      <li>Brightcove Player v5：<code translate="No">player.hls</code></li>
      <li>Brightcove Player v6：<code translate="No">player.tech().hls</code> <aside class="bcls-aside bcls-aside--information">Note that calling <code translate="No">player.tech()</code> will log a warning to the console as it is only recommended for advanced users.你可以通過<code translate="No">player.tech(true)</code>以抑制警告。
      </li>
    </ul>
    <h4>player.hls.playlists.master</h4>
    <p>類型：<code translate="No">object</code>   </p>
    <p>表示已解析的主播放列表的對象。如果直接加載媒體播放列表，將創建僅包含一個條目的主播放列表。</p>
    <h4>player.hls.playlists.media</h4>
    <p>類型：<code translate="No">function</code></p>
    <p>可用於檢索或修改當前活動的媒體播放列表的功能。當需要下載其他視頻數據時，將引用活動媒體播放列表。不帶任何參數調用此函數將為活動的媒體播放列表返回已解析的播放列表對象。使用主播放列表中的播放列表對像或主播放列表中指定的URI字符串調用此函數將啟動指定媒體播放列表的異步加載。一旦檢索到它，它將成為活動的媒體播放列表。</p>
    <h4>player.hls.bandwidth</h4>
    <p>類型：<code translate="No">number</code></p>
    <p>上一次分段下載中每秒下載的位數。此值由的默認實現使用<code translate="No">selectPlaylist</code>選擇合適的比特率播放。在下載第一個視頻片段之前，很難準確估算帶寬。HLS技術默認使用基於播放列表下載時間的啟發式方法進行此估算。如果您有更準確的帶寬信息來源，則可以在加載HLS技術後立即覆蓋此值，以提供初始帶寬估計。</p>
    <h4>player.hls.stats.bytes已接收</h4>
    <p>類型：<code translate="No">number</code>   </p>
    <p>HLS技術下載的內容字節總數。</p>
    <h4 id="selectplaylist">player.hls.select播放列表</h4>
    <p>類型：<code translate="No">function</code>   </p>
    <p>該函數返回媒體播放列表對像以用於下載下一個片段。在下載新段之前，插件會立即調用它。您可以覆蓋此功能以提供自適應流邏輯。但是，您必須確保返回存在於其中的有效媒體播放列表對象<code translate="No">player.hls.playlists.master</code>。</p>
  </section>
  <section class="bcls-section">
    <h2 id="events">活動</h2>
    <h4>載入的詮釋資料 </h4>
    <p>在為流下載第一個媒體播放列表後觸發。</p>
    <h4>加載的播放列表</h4>
    <p>下載新的母版或媒體播放列表後立即觸發。默認情況下，該插件僅在需要時下載播放列表。</p>
    <h4>媒體變革</h4>
    <p>當新的播放列表成為活動媒體播放列表時觸發。請注意，實際的渲染質量更改不會與此事件同時發生。必須請求一個新的段，並且首先耗盡現有緩衝區。</p>
  </section>
  <section class="bcls-section">
    <h2 id="Reload_source_on_error">發生錯誤時重新加載源</h2>
    <p>使用HLS插件時，您可以調用一種方法，當播放器發出錯誤時，該方法將在當前時間重新加載源。要啟用此功能，您需要致電<code translate="No">reloadSourceOnError()</code>方法。下面的短片顯示了該方法的作用。視頻中顯示的所有代碼將在本節後面介紹。</p>
    <aside class="bcls-aside bcls-aside--information">注意：雖然最初是為了直播，<code translate="No">reloadSourceOnError()</code>如視頻所示，還將支持視頻點播。
    <iframe src="https://players.brightcove.net/20318290001/E16-WGGOe_default/index.html?videoId=5246169715001" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" width="640" height="380"></iframe>
    <p>的語法<code translate="No">reloadSourceOnError()</code>方法如下：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">reloadSourceOnError(optionsObject)</code></pre>
    <p>可選的<code translate="No">optionsObject</code>具有以下屬性：</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>財產</th>
          <th>數據類型</th>
          <td>默認值</td>
          <th>描述</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">errorInterval</code></td>
          <td>編號 </td>
          <td>30</td>
          <td>在兩次錯誤之間必須經過的最短時間（以秒為單位），才能觸發重新加載。例如，如果您將時間設置為10，則每次發生錯誤時，該功能都會檢查是否在不到10秒前發生了重新加載。如果少於時間間隔，它將不會重新加載源。（這是為了確保有錯誤的內容不會不斷重新加載。）如果經過的時間超過了指定的時間間隔，則會在發生錯誤時重新加載視頻。</td>
        </tr>
        <tr>
          <td><code translate="No">getSource()</code></td>
          <td>函數</td>
          <td>檢索當前源</td>
          <td>調用此函數以獲取要加載或重新加載的源對象。默認情況下，它獲取播放器的當前源。</td>
        </tr>
      </tbody>
    </table>
    <p>以下詳細介紹了以上視頻演示中使用的代碼：</p>
    <ul>
      <li>1-9行：播放器的標準頁內嵌入代碼<code translate="No">id</code>添加。</li>
      <li>第11行：用於手動創建錯誤的按鈕。</li>
      <li>第22-24行：單擊按鈕時調用此函數以調度錯誤。</li>
      <li>第19行：創建一個放置配置選項的對象。</li>
      <li>第二行：在配置對像中，創建一個<code translate="No">errorInterval</code>屬性並為其分配值。</li>
      <li>第21行：致電<code translate="No">reloadSourceOnError()</code>方法，將配置對像作為參數傳遞。</li>
    </ul>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
  data-video-id="4607746980001"
  data-account="1507807800001"
  data-player="HJLp3Hvmg"
  data-embed="default"
  data-application-id
  class="video-js"
  controls
&gt;&lt;/video-js&gt;

&lt;p&gt;&lt;button onclick="createError()"&gt;createError&lt;/button&gt;&lt;/p&gt;

&lt;script src="https://players.brightcove.net/1507807800001/HJLp3Hvmg_default/index.min.js"&gt;&lt;/script&gt;

&lt;script type="text/javascript"&gt;
  var createError;
  videojs.getPlayer('myPlayerID').ready(function() {
    var myPlayer = this,
      <span class="bcls-highlight">reloadOptions = {};
    reloadOptions.errorInterval = 10;
    myPlayer.reloadSourceOnError(reloadOptions);</span>
    createError = function(){
      myPlayer.error({code:'2'});
    }
  });
&lt;/script&gt;</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="In-manifest_WebVTT">清單內WebVTT</h2>
    <p>HLS插件支持清單內WebVTT。啟用此功能無需做任何事情，因為該功能在插件中是標準的。必須在考慮了清單內WebVTT的情況下攝取視頻。例如，Brightcove <span translate="No">動態攝取 API</span>可以攝取視頻並將字幕配置為清單中。見<a href="https://apis.support.brightcove.com/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html#ingest_captions">概述：<span translate="No">動態攝取 API</span>動態交付文檔了解更多詳情。</p>
    <p>下面的播放器正在播放帶有清單內WebVTT字幕的視頻。您可以通過字幕圖標選擇字幕，如下所示：</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="display captions icon" src="/assets/images/plugins/hls/in-manifest-webvtt-example.png" /></figure>
    <p>開始播放視頻後，您將可以選擇想要的字幕。</p>
    <iframe src="https://players.brightcove.net/1752604059001/default_default/index.html?videoId=5427617218001" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" width="640" height="360"></iframe>
    <p>只是看一下，因為這是您自己無法構建的東西，因此以下是上面播放器中顯示的視頻的清單：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">#EXTM3U
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",NAME="Woofer",DEFAULT=NO,AUTOSELECT=YES,FORCED=NO,LANGUAGE="en",URI="subtitles/en/index.m3u8"
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",NAME="Woofer (Forced)",DEFAULT=NO,AUTOSELECT=NO,FORCED=YES,LANGUAGE="en",URI="subtitles/en_forced/index.m3u8"
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",NAME="Spanish",DEFAULT=NO,AUTOSELECT=YES,FORCED=NO,LANGUAGE="es",URI="subtitles/es/index.m3u8"
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",NAME="Spanish (Forced)",DEFAULT=NO,AUTOSELECT=NO,FORCED=YES,LANGUAGE="es",URI="subtitles/es_forced/index.m3u8"
#EXT-X-STREAM-INF:BANDWIDTH=865000,CODECS="mp4a.40.2, avc1.42001e",RESOLUTION=640x360,SUBTITLES="subs"
865/prog_index.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=12140000,CODECS="mp4a.40.2, avc1.42001e",RESOLUTION=1280x720,SUBTITLES="subs"
12140/prog_index.m3u8</code></pre>
    <p>在其中，您可以看到對字幕文件的引用。</p>
    <aside class="bcls-aside bcls-aside--tip">注意：使用清單內 WebVTT 是比使用 CEA-608 標準更好的做法，在<a href="#608captions">後期</a>本文件的。
  </section>
  <section class="bcls-section">
    <h2 id="adaptiveswitching">自適應切換</h2>
    <h3>HLS演繹選擇</h3>
    <p>在播放過程中，播放器將根據算法切換到較高或較低的再現形式。該算法的輸入為：</p>
    <ul>
      <li>可用帶寬</li>
      <li>播放器尺寸</li>
    </ul>
    <p>有關移交選擇的完整討論，請參見<a href="/playback/determining-which-rendition-will-play.html#HLS_DASH_Rendition_Selection">確定將播放哪種演繹</a>文檔。</p>
    <h3>MP4格式選擇</h3>
    <p>如果由於某些原因Brightcove Player無法播放HLS源，它將回退到播放MP4。在這種情況下，如果在移動設備上觀看視頻並播放MP4，則播放器將選擇比特率最接近.5 MB / s的MP4。如果在台式機或筆記本電腦設備上，它將選擇最接近3 MB / s的MP4格式。</p>
  </section>
  <section class="bcls-section">
    <h2 id="inbandmetadata">帶內元數據</h2>
    <p>Brightcove Player將識別嵌入在HLS視頻流中的某些類型的ID3標籤信息。ID3標準最初用於提供有關MP3音軌的元數據。（首字母縮寫是來自<strong>ID</strong>激勵MP <strong> 3</strong>）當流中遇到嵌入的元數據時，將自動創建帶內元數據文本軌道，並在流中遇到提示時填充提示。一個常見的用例是ID3數據將指導何時應在實時流中顯示廣告。</p>
    <p>ID3標准定義了許多幀類型，但是只有以下兩個UTF-8編碼的幀將映射到提示點，並將它們的值設置為提示文本：</p>
    <ul>
      <li>WXXX-用戶定義的URL鏈接框架</li>
      <li>TXXX-用戶定義的文本信息框</li>
    </ul>
    <p>將為所有其他框架類型創建提示，並將數據附加到生成的提示：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">cue.frame.data</code></pre>
    <p>有關一般文本軌道的更多信息，請參見<a href="//www.html5rocks.com/en/tutorials/track/basics/">Track元素入門</a>。有關Brightcove Player和提示點的信息，請參見<a href="/advertising/displaying-ads-using-ad-cue-points.html">使用廣告提示點顯示廣告</a>。</p>
  </section>
  <section class="bcls-section">
    <h2 id="Debugging">調試</h2>
    <p>提供本節中的信息以供您收集信息，然後可以將這些信息傳遞給Brightcove支持人員，以幫助解決任何HLS問題。話雖如此，您可能會對某些報告的數據感興趣。</p>
    <p>將詳細介紹有助於HLS調試的兩種方法和一種屬性。</p>
    <h3>方法：videojs.log.level（）</h3>
    <p>這<code translate="No">videojs.log.level()</code>方法獲取或設置當前的日誌記錄級別。要打開調試，請使用：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.log.level('debug');</code></pre>
    <h3>方法：videojs.log.history（）</h3>
    <p>這<code translate="No">history()</code>方法返回一個數組，其中包含已記錄到歷史記錄中的所有內容。</p>
    <p>通過記錄的任何消息<code translate="No">videojs.log</code> API將附加到<code translate="No">history</code>大批。放置在該數組中的信息取決於正在使用哪些使用API的插件以及播放器的狀態。這意味著歷史記錄可以輕鬆地包含非HLS信息。控制台的示例顯示<code translate="No">history</code>數組如下：</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="console display of history array" src="/assets/images/plugins/hls/history-array.png" /></figure>
    <aside class="bcls-aside bcls-aside--tip">這倆<code translate="No">level()</code>和<code translate="No">history()</code>方法屬於<code translate="No">log</code>類，其參考文檔位於<a href="https://docs.brightcove.com/brightcove-player/current-release/module-create-logger-createLogger-log.html">這裡</a> .</aside>
    <p>如果您需要發送<code translate="No">history</code>要支持的數組，最好的做法是在控制台中鍵入以下內容：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">JSON.stringify(videojs.log.history())</code></pre>
    <p>您將獲得類似於此處顯示的信息：</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="console display of history stringified" src="/assets/images/plugins/hls/stringify.png" /></figure>
    <p>複製生成的JSON，然後可以將其發送給支持部門。</p>
    <h3>屬性：player.tech（）。hls.stats</h3>
    <p>該對象包含HLS和與玩家相關的統計信息的摘要。可用屬性如下表所示：</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>物業名稱</th>
          <th>類型</th>
          <th>描述</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>帶寬</td>
          <td>號碼 </td>
          <td>最後一段的下載速率，以位/秒為單位</td>
        </tr>
        <tr>
          <td>緩衝 </td>
          <td>大批</td>
          <td>SourceBuffer中內容的時間範圍列表</td>
        </tr>
        <tr>
          <td>目前來源 </td>
          <td>物件 </td>
          <td>源對象；具有結構<code translate="No">{src: 'url', type: 'mimetype'}</code></td>
        </tr>
        <tr>
          <td>當前技術</td>
          <td>字串 </td>
          <td>所用技術的名稱</td>
        </tr>
        <tr>
          <td>目前時間 </td>
          <td>號碼 </td>
          <td>玩家的當前位置</td>
        </tr>
        <tr>
          <td>持續時間 </td>
          <td>號碼 </td>
          <td>視頻時長（以秒為單位）</td>
        </tr>
        <tr>
          <td>掌握</td>
          <td>物件 </td>
          <td>主播放列表對象</td>
        </tr>
        <tr>
          <td>mediaBytesTransferred</td>
          <td>號碼 </td>
          <td>下載的內容字節總數</td>
        </tr>
        <tr>
          <td>mediaRequests</td>
          <td>號碼 </td>
          <td>媒體細分請求總數</td>
        </tr>
        <tr>
          <td>mediaRequestsAborted</td>
          <td>號碼 </td>
          <td>中止的媒體段請求總數</td>
        </tr>
        <tr>
          <td>mediaRequestsErrored</td>
          <td>號碼 </td>
          <td>錯誤的媒體段請求總數</td>
        </tr>
        <tr>
          <td>mediaRequestsTimeout</td>
          <td>號碼 </td>
          <td>超時的媒體段請求總數</td>
        </tr>
        <tr>
          <td>mediaSecondsLoaded</td>
          <td>號碼 </td>
          <td>下載的總內容秒數</td>
        </tr>
        <tr>
          <td>mediaTransferDuration</td>
          <td>號碼 </td>
          <td>下載媒體片段所花費的總時間（以毫秒為單位）</td>
        </tr>
        <tr>
          <td>playerDimensions</td>
          <td>物件 </td>
          <td>包含播放器的寬度和高度</td>
        </tr>
        <tr>
          <td>可搜尋 </td>
          <td>大批</td>
          <td>玩家可以尋找的時間範圍列表</td>
        </tr>
        <tr>
          <td>時間戳記</td>
          <td>號碼 </td>
          <td>時間戳記<code translate="No">hls.stats</code>已被訪問</td>
        </tr>
        <tr>
          <td>videoPlaybackQuality</td>
          <td>物件 </td>
          <td>媒體播放質量指標，由<a href="https://wicg.github.io/media-playback-quality">W3C的媒體播放質量API</a></td>
        </tr>
      </tbody>
    </table>
    <aside class="bcls-aside bcls-aside--warning">如果您使用的是 Brightcove Player 的第 5 版，則應使用<code translate="No">player.tech_.hls.stats</code>獲取表中顯示的 HLS 信息。此外，某些屬性在版本 5 實現中不可用。
    <p>控制台的示例顯示<code translate="No">stats</code>對像如下：</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="console display of stats object" src="/assets/images/plugins/hls/stats-object.png" /></figure>
    <aside class="bcls-aside bcls-aside--tip">在控制台中，要實際顯示屬性值，您需要單擊省略號 (...)。</aside>
    <h3>代碼示例</h3>
    <p>如果您想嘗試這些調試功能，則可以將基於以下內容的代碼作為服務器的起點：</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID" data-video-id="5622718636001"
  data-account="1507807800001"
  data-player="SkxERgnQM"
  data-embed="default"
  data-application-id
  class="video-js"
  controls
  width="640"
  height="360"&gt;&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/1507807800001/SkxERgnQM_default/index.min.js"&gt;&lt;/script&gt;

&lt;script type="text/javascript"&gt;
  videojs.getPlayer('myPlayerID').ready(function() {
    var myPlayer = this;

    videojs.log.level('debug');

    myPlayer.on('ended', function(){
      console.log('videojs.log.history(): ', videojs.log.history());
      console.log('videojs.log.level(): ', videojs.log.level());
      console.log('videojs.hls.stats: ', player.tech().hls.stats);
    });
  });
&lt;/script&gt;</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="608captions">608個字幕</h2>
    <p>Brightcove的HLS插件支持608個字幕。608字幕，也稱為CEA-608字幕，EIA-608字幕和Line 21字幕，是美國和加拿大NTSC電視模擬廣播的隱藏字幕的標準。可以將 608 個字幕插入到實時流中，然後將它們混合到 HLS 中<strong>ts</strong>（傳輸流）文件。</p>
  </section>
  <section class="bcls-section">
    <h2 id="hosting">託管問題</h2>
    <div class="BCL-concept">
      <p>與本機HLS實現不同，HLS插件必須遵守瀏覽器的安全策略。這意味著組成流的所有文件必須從與託管視頻播放器的頁面所在的域相同的域中提供，或從具有適當資源的服務器中提供<a href="https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS">CORS標頭</a>配置。簡單的<a href="http://enable-cors.org/server.html">說明可用</a>適用於流行的Web服務器，大多數CDN都可以輕鬆為您的帳戶打開CORS。</p>
    </div>
  </section>
  <section class="bcls-section">
    <h2 id="Errors">失誤</h2>
    <p>使用以下類型報告HLS播放過程中的錯誤：<strong> APPEND_BUFFER_ERR</strong>。該消息將是從瀏覽器的本機錯誤中檢索到的內容。例如，<strong>已超出配額</strong>。</p>
  </section>
  <section class="bcls-section">
    <h2 id="changelog">變更記錄檔</h2>
    <p>見<a href="/plugins/changelog/hls-plugin-changelog.html">這裡的變更日誌</a>。</p>
  </section>
</article>