---
title:直播配置
parent: General Information
description: In this topic, you will learn how live stream configuration affects the bandwidth available for media playback. The goal of the document is to make you aware how incorrect configuration can impact the user experience for a live stream, rendering it nearly unplayable.
---

<article class="bcls-article">
  <h1>直播配置</h1>
  <summary>{{ page.description }}</summary>
        <section class="bcls-section">
    <aside class="bcls-aside bcls-aside--information">實時流配置與您的 CDN 和/或編碼器一起完成。Brightcove Player 只能播放發送的內容，並且沒有 Brightcove Player 調整可以補償不正確的實時流配置。
  </section>
  <section id="Live_stream_configuration_terminology" class="bcls-section">
    <h2>實時流配置術語</h2>
    <p>本文檔底部的計算器根據實時流配置粗略估算了開銷帶寬。為確保存在實時流和計算器所需信息的基礎知識，此處定義了一些術語：</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th style="width: 25%">學期</th>
          <th>定義</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>HTTP實時流（HLS）</td>
          <td>將音頻和視頻作為一系列稱為媒體段文件的小文件發送。</td>
        </tr>
        <tr>
          <td>目標持續時間</td>
          <td>媒體播放列表中的一個參數，用於指定任何媒體段的最大持續時間。</td>
        </tr>
        <tr>
          <td>媒體播放列表文件</td>
          <td>提供媒體段文件的URL的有序列表的索引文件。有時也稱為清單文件。</td>
        </tr>
        <tr>
          <td>主播放列表網址</td>
          <td>要在計算中使用的播放列表文件的位置。</td>
        </tr>
        <tr>
          <td>相對網址</td>
          <td>播放列表文件中的路徑可以使用相對於播放列表的URL，這可以節省文件中的大量空間-通常大於50％。</td>
        </tr>
        <tr>
          <td>實時窗口</td>
          <td>觀看者可以在直播流中向後倒退觀看視頻的時間。在後台，這轉化為必須保留在播放列表文件中的片段數。因此，活動窗口越長，播放列表文件就越大。</td>
        </tr>
        <tr>
          <td>段持續時間</td>
          <td>每個段的持續時間。隨著段大小的減少，清單大小也會增加。段大小較大的主要缺點是對帶寬變化的適應性較差，實時延遲時間較長。</td>
        </tr>
      </tbody>
    </table>
  </section>
  <section id="How_HLS_Live_works" class="bcls-section">
    <h2>HLS Live的工作方式</h2>
    <p>在實時流中，播放器會按設置的時間間隔重複下載媒體播放列表。該時間間隔等於<strong>目標持續時間</strong>媒體播放列表。</p>
    <p>例如，給定一個100KB清單，目標持續時間為10秒，則以下計算將確定僅用於下載媒體播放列表的帶寬：</p>
    <ul>
      <li>100 KB / 10秒*每個字節8位= <strong> 80kbps的</strong>下載媒體播放列表以繼續視頻播放的帶寬</li>
    </ul>
    <p>將此帶寬計為開銷，而該開銷要減去實際媒體可用的帶寬。</p>
  </section>
  <section id="Calculator" class="bcls-section">
    <h2>計算器</h2>
    <p>使用下面的計算器，您可以操縱某些實時流的配置值，並在上查看這些更改的結果。<strong>段數</strong>，<strong>預估艙單尺寸</strong>和<strong>估計帶寬開銷</strong>。由於只有您知道目標客戶可用的帶寬，因此很難為這些結果提供最佳的最佳實踐編號。但是要意識到提供300kbps的最小再現並具有明顯的清單以至於需要1mbps的提取量是沒有意義的。開銷帶寬過多的後果可能是視頻可能播放但隨後停頓，或者如果播放器無法跟上清單更新的速度，則播放器可能會落在實時窗口之外。基本上，所有可用帶寬都將用於下載清單更新，並且沒有實際的視頻片段將能夠下載。</p>
    <table class="bcls-table">
      <tbody class="bcls-table__body">
        <tr>
          <td>主播放列表URI</td>
          <td><input type="text" id="manifestUri" value="https://examplethingy-i.akamaihd.net/hls/live/999999/exampleustestthingy/master.m3u8" size="100" /></td>
        </tr>
        <tr>
          <td>使用相對URI</td>
          <td><input type="checkbox" id="relativeUri" /></td>
        </tr>
        <tr>
          <td>活動窗口的大小</td>
          <td><input style="display:inline-block;margin-right:10px;max-width:10%" type="number" id="liveWindowSize" value="5" />
            <select style="display:inline-block;max-width:20%" name="scale" id="liveWindowScale">
              <option value="1">秒</option>
              <option value="3600">小時</option>
              <option value="86400" selected="selected">天</option>
              <option value="31557600">年</option>
            </select></td>
        </tr>
        <tr>
          <td>平均分段持續時間<br />
            （片刻之間）</td>
          <td><input style="max-width: 10%" type="number" id="segmentDuration" value="9" /></td>
        </tr>
      </tbody>
    </table>
    <div>段數：</div>
    <div>預計艙單尺寸：</div>
    <div>估計帶寬開銷：</div>
  </section>
  <script>
          讓bandwidthScaleTable = ['bps'，'kbps'，'mbps'，'gbps'，'tbps'，'pbps'，'ebps' ];讓 sizeScaleTable = [ 'B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB ];讓absoluteUriOverhead = 54;讓relativeUriOverhead = 55;讓 hlsHeaderOverhead = 120; // 媒體播放列表開頭的 EXT-X-* 標籤 let hlsSegmentOverhead = 10; // EXT-INF 標籤函數 foo() { let manifestUri = document.querySelector('#manifestUri').value; let rootManifest = manifestUri.split('/').slice(0, -1).join('/'); let relativeUri = document.querySelector('#relativeUri').checked; let liveWindowSize = parseFloat(document.querySelector('#liveWindowSize').value); let liveWindowScale = parseFloat(document.querySelector('#liveWindowScale').value); let segmentDuration = parseFloat(document.querySelector('#segmentDuration').value); let liveWindowDuration = liveWindowSize * liveWindowScale; let baseUriLength = relativeUri ? relativeUriOverhead : absoluteUriOverhead + rootManifest.length; let segmentCount = Math.ceil(liveWindowDuration / segmentDuration); let estimate = hlsHeaderOverhead + (baseUriLength + hlsSegmentOverhead) * segmentCount; let bandwidthEstimate = estimate / segmentDuration * 8; //in bits per second let estimateScale = 0; while (estimate &gt; 1024) { estimate /= 1024; estimateScale++; }讓bandwidthScale = 0;而（帶寬估計&gt;1024) { bandwidthEstimate /= 1024; bandwidthScale++; } document.querySelector('#manifestSize').innerHTML =estimate.toFixed(2) + sizeScaleTable[estimateScale]; document.querySelector('#manifestBandwidth').innerHTML = bandwidthEstimate.toFixed(2) + bandwidthScaleTable[bandwidthScale]; document.querySelector('#segmentCount').innerHTML = segmentCount; } let elements = document.querySelectorAll('input, select');對於（讓我= 0;我&lt;元素長度； i++) elements[i].addEventListener('change', foo);富（）；
        </script></article>