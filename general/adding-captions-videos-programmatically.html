---
title:以程式設計方式為影片新增字幕
parent: General Information
description: In this topic, you will learn how to add captions to videos using the Brightcove Player.
---

<article class="bcls-article">
  <h1>以程式設計方式將字幕新增至視訊</h1> 
  <summary>{{ page.description }} </summary>
  <style type="text/css">
.vjs 文字軌道{ background-color: black; font-size: medium; font-weight: bold; } 
</style>
  <section class="bcls-section">
    <h2 id="Overview">概述</h2>
    <p>您可以在影片中新增隱藏式字幕，為想要存取影片的個人提供額外或解釋性資訊。字幕是必要的，因此聾人和聽障人士可以訪問視頻簡報的音頻部分。若要在 Brightcove 播放程式中顯示影片的字幕，您必須完成下列工作：</p>
    <ul>
      <li><a href="#captionsfile">為您的影片建立字幕檔案</a> </li>
      <li><a href="#pubcode">修改播放程式發佈程式碼以包含 &lt; 曲目 &gt; 標籤</a> </li>
      <li><a href="#style">設定標題樣式</a> </li>
      <li><a href="#implementcode">使用程式碼新增註解</a> </li>
    </ul>
    <aside class="bcls-aside bcls-aside--information video-cloud-only">字幕也可以使用視頻雲工作室進行配置。如需詳細資訊，請參閱<a href="https://studio.support.brightcove.com/media/adding-captions-videos-using-media-module.html">新增字幕至視訊</a>。</aside> 
  </section>
  <section class="bcls-section">
    <h2 id="captionsfile">建立標題檔案</h2>
    <p>若要在影片中加入字幕，您必須先建立字幕檔案。布萊特灣播放器要求字幕使用網路視訊文字軌格式 (WebVTT)。如果您將字幕內嵌至動態傳遞帳戶，您可以新增 DFXP 或 SRT 字幕，這些字幕會自動轉換為 WebVTT 字幕。)WebVTT 檔案格式是純文字，並包含時間文字資料，後面接著所需的註解或字幕文字。一個 WebVTT 文件的一部分如下所示。</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">WEBVTT

00:00:00.000 --&gt; 00:00:07.080 align:middle line:90%

00:00:07.080 --&gt; 00:00:10.280 align:middle line:84%
Hi, I'm Bob Bailey, a Learning
Specialist with Brightcove.

00:00:10.280 --&gt; 00:00:12.780 align:middle line:84%
In this video, you'll learn
about how Video Cloud Studio is

00:00:12.780 --&gt; 00:00:14.940 align:middle line:84%
organized and get a
brief overview of what

00:00:14.940 --&gt; 00:00:17.490 align:middle line:90%
you can accomplish using it.</code>   </pre>
    <p>如需 WebVTT 格式的詳細資訊，請參閱<a href="//dev.w3.org/html5/webvtt/">此連結</a>。您應該為您需要支援的每種語言設定一個單獨的字幕檔案。雖然有許多協力廠商的工具可協助建立字幕檔案，但 Brightcove 有數個合作夥伴提供轉譯、字幕和翻譯服務。如需 Brightcove 合作夥伴的完整清單，請造訪我們網站的<a href="https://www.brightcove.com/en/partners/find-partner">合作夥伴</a>部分。</p>
    <p>如果您使用的是動態傳遞影片，您也可以擷取 SRT 或 DFXP 字幕，而布萊特灣會自動將這些字幕轉換為 WebVTT。如需詳細資訊，請參閱<a href="https://apis.support.brightcove.com/dynamic-ingest/ingest-guides/ingesting-webvtt-files-text-trackscaptions.html">擷取 WebVTT 檔案 (文字軌道/標題) </a>文件。</p>
  </section>
  <section class="bcls-section video-cloud-only">
    <h2 id="Add_captions_to_videos">新增字幕至影片</h2>
    <p>在視訊雲端中，您可以將 WebVTT 字幕新增至視訊，不論是裝載的遠端資產，或是將其嵌入視訊雲端。一旦您這麼做，Brightcove Player 會在載入影片時自動新增字幕，並在播放器控制中顯示<strong>  CC </strong>按鈕。如需新增字幕至影片的詳細資訊，請參閱<a href="https://studio.support.brightcove.com/media/overview-adding-captions-video.html">概觀：在影片中加入字幕</a>。</p>
    <aside class="bcls-aside bcls-aside--information">注意：如果您在自己的服務器上託管字幕文件，請確保該文件位於可以被 Brightcove 播放器訪問的 URL。裝載註解檔案的伺服器也應該啟用跨來源資源共用 (CORS)。你可以<a href="https://general.support.brightcove.com/developer/concepts-cors.html">在這裡閱讀更多關於 CORS 的信息</a>。</aside> 
  </section>
  <section class="bcls-section">
    <h2 id="pubcode">包括 &lt; 曲目 &gt; 標籤</h2>
    <p>若要將 WebVTT 字幕檔案與 Brightcove 播放器產生關聯，您需要修改頁內嵌程式碼，以便為您擁有的每個字幕檔案加入<code translate="No">&lt;track&gt;</code>標籤。例如：</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;track kind="captions" src="&lt;location of caption file&gt;" srclang="en" label="English"&gt;</code>   </pre>
    <p>該<code translate="No">&lt;track&gt;</code>標籤用於指定字幕，字幕文件或其他包含文本的文件，當媒體播放應該是可見的。執行此操作的步驟概述如下。</p>
    <aside class="bcls-aside bcls-aside--information">請注意，2 或 4 字母的語言代碼可用於<code translate="No">srclang</code>屬性（例如，<code translate="No">en</code>或<code translate="No">en-us</code>）。</aside> 
    <ol class="bcls-tasklist">
      <li>為您的播放器產生<strong>進階</strong>  (網頁內) 內嵌程式碼。<span class="video-cloud-only">這可以使用<a href="https://studio.support.brightcove.com/players/generating-player-embed-code.html">媒體模組來完成</a>。</span> <br />
        你的代碼應該看起來像這樣：
        <pre class="video-cloud-only">
<code class="language-html" translate="No">&lt;video-js 
	id="myPlayerID" 
    data-video-id="4230322585001" 
    data-account="20318290001" 
    data-player="default" 
    data-embed="default" 
    data-application-id 
    class="video-js" controls 
    width="640" height="360"&gt;
&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/20318290001/default_default/index.min.js"&gt;&lt;/script&gt;</code>   </pre>
        <pre class="player-only">
<code class="language-html" translate="No">&lt;video-js 
	id="myPlayerID" 
    data-account="20318290001" 
    data-player="d508c6e1-efa7-4aad-ba91-1a8db9761b8c" 
    data-embed="default" 
    data-application-id 
    class="video-js" controls 
    width="640" height="360"&gt;
&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/20318290001/default_default/index.min.js"&gt;&lt;/script&gt;</code>   </pre>
        <aside class="bcls-aside bcls-aside--tip">為了<code translate="No">&lt;video-js&gt;</code>元素，我們添加了一個<code translate="No">id</code>屬<strong>性的值</strong>。這是需要在步驟 3 中獲得玩家的參考。</aside> 
      </li>
      <li>添加<code translate="No">&lt;track&gt;</code>標籤內的<code translate="No">&lt;video-js&gt;</code>指向所有字幕文件位置的標記。<span class="player-only">播放程式工作室目前並未提供發佈者上傳 WebVTT 字幕檔案的方式。</span> 註解檔案位置的 URL 必須少於 250 個字元。<br />
        <br />
        在以下範例中，已指定英文、日文和法文字幕檔案。如需語言代碼的完整清單，請參閱<a href="http://www.w3schools.com/tags/ref_language_codes.asp">  HTML 語言代碼參考</a>。
        <pre class="video-cloud-only">
<code class="language-html" translate="No">&lt;video-js 
	id="myPlayerID" 
    data-video-id="4230322585001" 
    data-account="20318290001" 
    data-player="default" 
    data-embed="default" 
    data-application-id 
    class="video-js" controls 
    width="640" height="360"&gt;
  &lt;track kind="captions" src="https://solutions.brightcove.com/bcls/assets/captions/intro-vcs.vtt" srclang="en" label="English"&gt;
  &lt;track kind="captions" src="https://solutions.brightcove.com/bcls/assets/captions/intro-vcs-jp.vtt" srclang="ja" label="Japanese"&gt;
  &lt;track kind="captions" src="https://solutions.brightcove.com/bcls/assets/captions/intro-vcs-fr.vtt" srclang="fr" label="French"&gt;
&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/20318290001/default_default/index.min.js"&gt;&lt;/script&gt;</code>   </pre>
        <pre class="player-only">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID" 
	data-account="20318290001" 
    data-player="d508c6e1-efa7-4aad-ba91-1a8db9761b8c" 
    data-embed="default" 
    data-application-id 
    class="video-js" controls 
    width="640" height="360"&gt;
  &lt;track kind="captions" src="https://solutions.brightcove.com/bcls/assets/captions/intro-vcs.vtt" srclang="en" label="English"&gt;
  &lt;track kind="captions" src="https://solutions.brightcove.com/bcls/assets/captions/intro-vcs-jp.vtt" srclang="ja" label="Japanese"&gt;
  &lt;track kind="captions" src="https://solutions.brightcove.com/bcls/assets/captions/intro-vcs-fr.vtt" srclang="fr" label="French"&gt;
&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/20318290001/default_default/index.min.js"&gt;&lt;/script&gt;
</code>   </pre>
      </li>
      <li><strong> ( 選擇性) </strong>若要在影片開始播放時自動顯示字幕，您必須對頁面進行一些變更。您必須將<code translate="No">default</code>屬性添加到<code translate="No">&lt;track&gt;</code>標籤中，以便顯示和設置語言，並添加少量的代碼。請注意，該<code translate="No">default</code>屬性應該只出現在一個<code translate="No">&lt;track&gt;</code>標籤上。例如，若要在視訊開始播放時顯示英文字幕，<code translate="No">&lt;track&gt;</code>標籤會被修改，如下所示：
        <pre class="line-numbers">
<code class="language-html" translate="No">&lt;track kind="captions" src="https://solutions.brightcove.com/bcls/assets/captions/intro-vcs.vtt" srclang="en" label="English" default&gt;
&lt;track kind="captions" src="https://solutions.brightcove.com/bcls/assets/captions/intro-vcs-jp.vtt" srclang="ja" label="Japanese"&gt;
&lt;track kind="captions" src="https://solutions.brightcove.com/bcls/assets/captions/intro-vcs-fr.vtt" srclang="fr" label="French"&gt;</code>   </pre>
        <p>自動啟動指定字幕所需的代碼是：</p>
        <pre class="line-numbers">
<code class="language-javascript" translate="No">&lt;script type="text/javascript"&gt;
  videojs.getPlayer('myPlayerID').ready(function () {
    var myPlayer = this;
    myPlayer.one("play", function () {
      //If you want to start English as the caption automatically
      myPlayer.textTracks()[1].mode = "showing";
    });
  });
&lt;/script&gt;</code>   </pre>
      </li>
      <li>發布與播放器的頁面。發佈具有相關字幕的播放器時，播放程式顏色上會出現<strong>  CC </strong>按鈕。
        <figure class="bcls-figure"><img class="bcls-image" alt="CC button on toolbar" src="/assets/images/general/cc-button.png" /></figure>
      </li>
      <li>按一下 [ <strong>副本] </strong>按鈕以選取字幕語言，並顯示註解。
        <figure class="bcls-figure"><img class="bcls-image" alt="captions menu" src="/assets/images/general/caption-select.png" /></figure>
      </li>
    </ol>
    <aside class="bcls-aside bcls-aside--tip">注意：對於 iOS 裝置上的觀眾來說，在觀看含有字幕和廣告的影片時，我們建議您在播放影片時明確選擇曲目，而不要將字幕設定為「自動 (建議使用)」。使用「自動 (建議)」設定可能會顯示不正確的廣告字幕。請注意，使用「自動 (建議使用)」設定不會影響實際視訊的字幕顯示。觀眾會看到廣告的影片字幕，但是一旦影片開始播放 (捲軸前) 或履歷 (捲軸中)，字幕就會如預期般顯示。</aside> 
  </section>
  <section class="bcls-section">
    <h2 id="style">樣式註解</h2>
    <p>在本節中，您將看到如何以編程方式設計的樣式註解。如需有關變更 WebVTT 檔案樣式化註解的資訊，以及播放器中的 UI，請參閱<a href="https://studio.support.brightcove.com/media/styling-captions.html">樣式註解</a>文件。</p>
    <p>兩種方法是以編程方式樣式註解的關鍵，那些方法是：</p>
    <ul>
      <li><code translate="No">player.textTrackSettings.setValues()</code>：動態設定播放器字幕上的樣式</li>
      <li><code translate="No">player.textTrackSettings.saveSettings()</code>：將設置保存到瀏覽器的<strong>本地存儲</strong> </li>
    </ul>
    <h3>設定值 (物件型式)</h3>
    <p>您可以變更字幕的樣式有限，詳細說明如下。使用這些樣式的一個例子顯示在下面的代碼，並將顯示標題，如圖所示的屏幕截圖：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function () {
    var myPlayer = this;
    myPlayer. <span class = "bcls-highlight" > textTrackSettings.setValues({
      backgroundColor: "#FF0",
      color: "#00F",
      fontFamily: "monospaceSansSerif",
      fontPercent: 1.5,
      windowColor: "#0FF",
      windowOpacity: "0.5"
    }) </span>;
});</code>   </pre>
    <figure class="bcls-figure"><img class="bcls-image" alt="Styled Captions" src="/assets/images/general/styled-captions.png" /></figure>
    <aside class="bcls-aside bcls-aside--tip">視<strong>窗</strong>是青色矩形，幾乎是播放器的全部寬度。這是常見的不使用窗口，因此默認的不透明度是<code translate="No">0</code>。</aside> 
    <p>下表中列出的是您可以改變的標題樣式，以及這些樣式的有效值：</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>按鍵</th>
          <th>有效值</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">backgroundColor</code>   </td>
          <td>如下所定義的有效顏色</td>
        </tr>
        <tr>
          <td><code translate="No">backgroundOpacity</code>   </td>
          <td><code translate="No">1</code>   ( 不透明)<br />
            <code translate="No">.5</code>   ( 半透明)</td>
        </tr>
        <tr>
          <td><code translate="No">color</code>   </td>
          <td>如下所定義的有效顏色</td>
        </tr>
        <tr>
          <td><code translate="No">edgeStyle</code>   </td>
          <td><code translate="No">none  <br />
            raised <br />
            depressed <br />
            uniform <br />
            dropshadow</code>  </td>
        </tr>
        <tr>
          <td><code translate="No">fontFamily</code>   </td>
          <td><code translate="No">proportionalSansSerif  <br />
            monospaceSansSerif <br />
            proportionalSerif <br />
            monospaceSerif <br />
            casual <br />
            script <br />
            small-caps</code>  </td>
        </tr>
        <tr>
          <td><code translate="No">fontPercent</code>   <br />
            （不在對象中的引號中）</td>
          <td><code translate="No">0.50  <br />
            0.75 <br />
            1.00 <br />
            1.25 <br />
            1.50 <br />
            1.75 <br />
            2.00 <br />
            3.00 <br />
            4.00</code>  </td>
        </tr>
        <tr>
          <td><code translate="No">textOpacity</code>   </td>
          <td><code translate="No">1</code>   ( 不透明)<br />
            <code translate="No">.5</code>   ( 半透明)</td>
        </tr>
        <tr>
          <td><code translate="No">windowColor</code>   </td>
          <td>如下所定義的有效顏色</td>
        </tr>
        <tr>
          <td><code translate="No">windowOpacity</code>   </td>
          <td><code translate="No">1</code>   ( 不透明)<br />
            <code translate="No">.5</code>   ( 半透明)<br />
            <code translate="No">0</code>   ( 透明)</td>
        </tr>
      </tbody>
    </table>
    <p>對於上述使用顏色的值，有效的顏色值如下所示：</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>有效顏色</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">#000</code>（黑色）</td>
        </tr>
        <tr>
          <td><code translate="No">#00F</code>（藍色）</td>
        </tr>
        <tr>
          <td><code translate="No">#0FF</code>   ( 青色)</td>
        </tr>
        <tr>
          <td><code translate="No">#0F0</code>（綠色）</td>
        </tr>
        <tr>
          <td><code translate="No">#F0F</code>   ( 洋紅色)</td>
        </tr>
        <tr>
          <td><code translate="No">#F00</code>（紅色）</td>
        </tr>
        <tr>
          <td><code translate="No">#FFF</code>（白色）</td>
        </tr>
        <tr>
          <td><code translate="No">#FF0</code>（黃色）</td>
        </tr>
      </tbody>
    </table>
    <h3>儲存設定 ()</h3>
    <p>另一種樣式註解時可能有幫助的方法是<code translate="No">player.textTrackSettings.saveSettings()</code>。此方法會儲存至瀏覽器的<strong>  LocalStorage </strong>標題樣式的目前設定。以下截圖來自 Chrome 的<strong>應用</strong>選項卡顯示為播放器提供服務的頁面的本地存儲以及密鑰的名稱，<strong> vjs-text-track-settings</strong>，及其相關值。</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="View local storage" src="/assets/images/general/view-local-storage.png" /></figure>
    <p>這種方法讓您可以使用播放器的 UI 配置標題樣式，然後保存設置並複製要使用的值<code translate="No">player.textTrackSettings.setValues()</code>，如上圖所示。</p>
  </section>
  <section class="bcls-section">
    <h2 id="implementcode">使用程式碼實作</h2>
    <p>您可以透過程式設計方式為註解新增文字軌道。此功能的關鍵方法是<code translate="No">addRemoteTextTrack()</code>，其語法是：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">playerObject.addRemoteTextTrack({
  kind: string,
  language: string,
  label: string,
  src: string
});</code>   </pre>
    <p>其中：</p>
    <ul>
      <li><code translate="No">kind</code>   -文本軌道的類型，用於此使用<strong>「字幕」</strong> </li>
      <li><code translate="No">language</code>   -兩個字母的語言代碼，例如<strong>  'en' </strong> </li>
      <li><code translate="No">label</code>   -顯示在字幕 UI 中的語言標籤，例如<strong>「英文」</strong> </li>
      <li><code translate="No">src</code>   -網址為 WebVTT 格式化的字幕檔案</li>
    </ul>
    <p>函數調用返回類型的對象<code translate="No">vjs.TextTrack</code>。</p>
    <p>範例用法：</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">var frTrack = myPlayer.addRemoteTextTrack({
  kind: 'captions',
  language: 'fr',
  label: 'French',
  src: 'https://solutions.brightcove.com/bcls/captions/adding_captions_to_videos_french.vtt'
});</code>   </pre>
    <p>您必須等待<code translate="No">loadedmetadata</code>事件傳送，才能使用此方<code translate="No">addRemoteTextTrack()</code>法。下列範例顯示將英文和法文字幕新增至視訊的指令碼區塊。</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  videojs.getPlayer('myPlayerID').ready(function () {
    var myPlayer = this;
    myPlayer.one("loadedmetadata", function () {
      var enTrack = myPlayer.addRemoteTextTrack({
        kind: 'captions',
        language: 'en',
        label: 'English',
        src: 'https://solutions.brightcove.com/bcls/captions/adding_captions_to_videos.vtt'
      });
      var frTrack = myPlayer.addRemoteTextTrack({
        kind: 'captions',
        language: 'fr',
        label: 'French',
        src: 'https://solutions.brightcove.com/bcls/captions/adding_captions_to_videos_french.vtt'
      });
    });
  });
&lt;/script&gt;</code>   </pre>
    <p>互補方法<code translate="No">textTracks()</code>可讓您擷取指派給播放器的所有文字軌道。該方法返回類型的對象<code translate="No">vjs.TextTrackList</code>。</p>
  </section>
  <section class="bcls-section">
    <h2 id="livestreamwithcaptions">使用字幕的即時串流</h2>
    <p>到目前為止，文件註解已以獨立檔案形式傳送，並透過 &lt; 音軌 &gt; 元素與視訊相關聯。這種類型的標題有時稱為 <em>頻帶外</em>。另一種方法包括將字幕資料直接嵌入視訊內容中 (通常是即時視訊串流)，有時稱為 <em>頻帶內</em> 標題。</p>
    <p>布萊特灣直播目前支持帶內 608 個字幕（在 h.264 標題內）。如果標題位於 h.264 輸入信號內（在 user_data 數據包中正確信號），則會通過傳遞給 h.264 輸出。</p>
    <p>如果您使用的是廣播元素現場編碼器，您可以從 SDI（EIA-608/CEA-608）或其他來源（SCTE-20，SCC，大利文，DVB-副，輔助，ARIB，TML，SCTE-27，STL，SRT，SMI）中獲取字幕，並將它們放入您發送給我們的 .264 流。其他廣播級編碼器可能可以做同樣的事情，但我們沒有正式測試它們。</p>
    <p>即時串流<strong>不</strong>支援 WebVTT 字幕。</p>
    <p>Brightcove 播放器支持頻內字幕，因此在 HLS 內置字幕的直播，因此不需要插件。布萊特灣玩家的實施將在未使用原生 HLS 的任何地方工作。如果使用原生 HLS，則頻內註解的支援取決於作業系統和瀏覽器。例如，iOS 的原生 HLS 完全支援頻內字幕。</p>
  </section>
  <section class="bcls-section">
    <h2 id="limitations">限制</h2>
    <p>下列裝置類型和作業系統支援字幕。</p>
    <ul>
      <li>iOS 9 +</li>
      <li>安卓 4+</li>
      <li>網際網路總管 8+</li>
      <li>桌面上最新的瀏覽器、Safari 和火狐瀏覽器</li>
    </ul>
    <aside class="bcls-aside bcls-aside--information">由於 Safari 使用本機功能來設置字幕樣式，因此<strong>字幕設置</strong>菜單選項在<strong>抄送</strong> Safari 瀏覽器（iOS 和 macOS）上的菜單。</aside>
  </section>
</article>