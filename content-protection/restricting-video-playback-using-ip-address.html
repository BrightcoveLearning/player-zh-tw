---
title:使用 IP 地址限制視頻播放
parent: 'Content Protection'
description: 'This topic provides an overview of how IP address restriction can be used to limit video distribution. <aside class="bcls-aside bcls-aside--information">IP 地址限制僅適用於 Video Cloud Enterprise 發布者。</aside>---
<article class="bcls-article">
  <h1>使用IP地址限制視頻播放</h1>
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Overview">概述</h2>
    <p>為了將視頻播放僅限於內部觀看者，視頻&nbsp; Cloud Enterprise發布者可以使用IP地址限制。此方法可防止加載帳戶中的所有播放器，除非加載播放器的瀏覽器使用允許IP地址的指定列表（白名單）之一。這提供了超越了的安全級別<a href="https://studio.support.brightcove.com/players/configuring-player-content-restrictions.html#domains">域限制</a>或者<a href="https://studio.support.brightcove.com/players/configuring-player-content-restrictions.html#geofilter">地域限制</a>。</p>
    <p>設置IP地址限制後，該限制將應用於該帳戶中的所有播放器。您需要為要公開播放的播放器和視頻使用單獨的帳戶。</p>
    <p>當用戶嘗試從不在白名單上的地址加載包含Video Cloud播放器的頁面時，他們會看到一條錯誤消息，內容為“無法從您當前的國家或地區觀看您要觀看的視頻。 "</p>
    <aside class="bcls-aside bcls-aside--information">注意，設置IP限制時，會在達到播放器緩存次數時生效，最長可能為兩個小時。</aside>
  </section>
  <section class="bcls-section">
    <h2 id="How_to_set_up_IP_address_restriction">如何設置IP地址限制</h2>
    <p>要為您的一個視頻雲帳戶設置IP地址限制，請聯繫<a href="http://support.brightcove.com/en/contact">Brightcove支持</a>。您將需要與支持人員一起為此目的識別或創建帳戶，並提供一個包含IP地址白名單的文本文件。</p>
  </section>
  <section class="bcls-section">
    <h2 id="Creating_an_IP_address_whitelist">創建IP地址白名單</h2>
    <p>要為您的一個Video Cloud帳戶設置IP地址限制，您需要向Brightcove支持提供白名單的IP地址，該白名單應允許加載Video Cloud播放器。大多數公司使用一個或多個網關，內部公司流量通過該網關到達外部Internet。&nbsp;您的IP地址白名單應包括所有這些網關的IP地址。</p>
    <p>白名單應在單獨的行中包含每個IP地址。您還可以包括一系列IP地址。例如：</p>
    <pre>
<code class="language-javascript" translate="No">38.39.23.40
38.39.23.48
38.39.23.50-38.112.23.69
38.39.23.100-38.112.23.199</code></pre>
    <p>您可以在<a href="https://en.wikipedia.org/wiki/Dot-decimal_notation">點十進製表示法</a>， 如：</p>
    <pre>
<code class="language-javascript" translate="No">38.39.23.50/255.255.255.0</code></pre>
    <p>您也可以使用<a target="_blank" href="http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing">CIDR塊符號</a>， 如：</p>
    <pre>
<code class="language-javascript" translate="No">38.39.23.50|24</code></pre>
    <p>或者</p>
    <pre>
<code class="language-javascript" translate="No">38.39.23.50/24</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Video_Cloud_content">視頻雲內容</h2>
    <p>使用Playback API從配置為IP限制的Video Cloud帳戶檢索內容時，必須使用以下內容而不是標準URL：</p>
    <pre>
<code class="language-javascript" translate="No">https://edge-elb.api.brightcove.com/playback/v1</code></pre>
    <p>用<code translate="No">edge-elb.api...</code>與正常<code translate="No">edge.api...</code></p>
    <h3 id="Implementation_details">實施細節</h3>
    <p>當要求Brightcove Player從“視頻雲"帳戶加載視頻時，它會連接到該地址處的目錄：</p>
    <p><strong>https://edge.api.brightcove.com/playback/v1/</strong>。</p>
    <p>該網址的行為如下：</p>
    <ul>
      <li>從北美內部訪問Edge時，它將直接訪問Edge，Edge會看到用戶的IP地址。它可以根據IP限制白名單允許或拒絕對目錄的訪問。這是所需的行為。</li>
      <li>從北美以外地區訪問Edge時，出於負載平衡/本地緩存CDN的原因，它會通過Cloudfront。這會導致問題，因為Edge會看到Cloudfront IP而不是用戶的IP，並拒絕所有請求。這是因為Cloudfront不在白名單上（而且永遠不會因為在此使用Cloudfront的任何人都可以訪問）。</li>
    </ul>
    <p>Edge的替代端點可以解決非北美客戶的這種情況。端點是：</p>
    <p><strong>edge-elb.api.brightcove.com</strong>。</p>
    <p>這種方法的不利之處在於，這將導致從美國以外地區檢索緩存內容的時間稍有延遲，因為目錄請求將發送到美國的弗吉尼亞州，而不是通過Cloudfront的本地服務器的全球網絡。這可能幾乎不會引起注意，但是值得考慮和測試。內容本身將正常從本地服務器傳遞。從北美或通過北美代理訪問時，性能完全不會改變。</p>
    <p>如果您認為稍微延遲值得您受益，則必須配置需要從北美以外地區訪問IP受限帳戶的每個播放器。您可以在Studio中的<strong>選手們</strong>模塊。以下步驟引導您完成配置更改：</p>
    <ol class="bcls-tasklist">
      <li>打開<strong>球員</strong>模塊並創建一個新播放器或找到您希望對其進行配置更改的播放器。</li>
      <li>單擊播放器的鏈接以打開播放器的屬性。</li>
      <li>點擊<strong>JSON編輯器</strong>在左側導航菜單中。</li>
      <li>找到<strong>video_cloud</strong> JSON中的部分，其外觀類似於以下內容（可能有更多或更少的名稱/值對）：
        <pre class="line-numbers">
<code class="language-json" translate="No">"video_cloud": {
    "policy_key": "BCpkADaw...ndVx5X"
  },</code></pre>
      </li>
      <li>在最後一個條目之後，添加逗號，然後添加以下名稱/值對：
        <pre class="line-numbers">
<code class="language-json" translate="No">"base_url": "https://edge-elb.api.brightcove.com/playback/v1/"</code></pre>
      </li>
      <li>JSON編輯器應類似於以下內容：
        <figure class="bcls-figure"><img class="bcls-image" alt="json editor" src="/assets/images/general/json-editor-restrict.png" /></figure>
      </li>
      <li>保存並發布更新的播放器。</li>
    </ol>
    <aside class="bcls-aside bcls-aside--warning">這<code translate="No">base_url</code>設置應僅與 IP 限製配置一起使用。</aside>
  </section>
</article>