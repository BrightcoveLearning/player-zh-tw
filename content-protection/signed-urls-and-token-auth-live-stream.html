---
title:帶有實時流的簽名 URL 和令牌身份驗證
parent: 'DRM &amp; Content Protection'
description: In this topic, you will learn about using signed URLs and token auth to prevent end users from being able to play back your live stream without proper authorization.
---

<article class="bcls-article">
  <h1>帶有實時流的簽名URL和令牌身份驗證</h1>
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Overview">概述</h2>
    <p>如果您要交付高級或機密內容，則將尋找所有方法來確保其安全性。您不希望最終用戶能夠在未經適當授權的情況下複製視頻 URL 或繼續播放內容。Brightcove支持RTMP，HLS和DASH URL的簽名。</p>
    <p>如果您要生成自己的令牌，則此過程只有一個步驟。如果希望Live系統生成標記化的URL，則需要執行以下兩個步驟中詳細介紹的兩個步驟，以啟用實時流的標記身份驗證。</p>
    <aside class="bcls-aside bcls-aside--information">目前，僅 Akamai EdgeAuth 2.0 支持令牌身份驗證。</aside>
  </section>
  <section id="Implementation" class="bcls-section">
    <h2>執行</h2>
    <aside class="bcls-aside bcls-aside--information">注意：如果您要創建自己的令牌並將其添加到 URL，則只需完成步驟 1。</aside>
    <h3>第1步：創建現場工作</h3>
    <p>要啟用令牌身份驗證，請在請求正文中包含以下內容<a href="https://live.support.brightcove.com/live-api/references/reference.html#api-Live_Jobs-Create_a_Live_Job">創造工作</a>：</p>
    <pre class="line-numbers">
  <code class="language-json" translate="No">"add_cdns": [{
    "label": "My CDN",
    "prepend": "mycdn-a.akamaihd.net",
    "protocol": "https",
    "vendor": "akamai",
    "token_auth": {
      "auth_type": "Akamai2.0",
      "key": "AKAMAI_TOKEN_PASSWORD",
      "token_name": "AKAMAI_TOKEN_NAME",
      "media": {
        "start_time": "now",
        "end_time": 1495697388,
        "ttl": 60
      }
    }
  }]</code></pre>
    <p>相關字段如下表所述：</p>
    <table class="bcls-table">
      <caption class="bcls-caption--table">
      實時作業的 TTL 字段
      </caption>
      <thead class="bcls-table__head">
        <tr>
          <th>場地</th>
          <th>價值</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td ><code translate="No">start_time</code></td>
          <td >任何一個<code translate="No">now</code>或Unix / posix開始時間</td>
        </tr>
        <tr>
          <td ><code translate="No">end_time</code></td>
          <td >unix/posix 結束時間</td>
        </tr>
        <tr>
          <td ><code translate="No">ttl</code></td>
          <td >生存時間（以秒為單位）</td>
        </tr>
      </tbody>
    </table>
    <h3>第2步：創建現場作業後</h3>
    <aside class="bcls-aside bcls-aside--information">如果您是，請僅完成此步驟<strong>不是</strong>創建您自己的令牌，而是希望 Live API 生成一個令牌化的 URL。</aside>
    <p>創建實時作業後，您需要再次發出請求以生成主清單URL。為此，請發送<code translate="No">POST</code>請求：</p>
    <pre class="line-numbers">
  <code class="language-http" translate="No">https://api.bcovlive.io/v1/jobs/<span class="bcls-input">JOB_ID</span>/authurls</code></pre>
    <p>包括以下JSON作為請求正文：</p>
    <pre class="line-numbers">
  <code class="language-json" translate="No">{
    "ttl": <span class="bcls-input">number in seconds for time to live</span>
  }</code></pre>
  </section>
  <section id="Notes" class="bcls-section">
    <h2>筆記</h2>
    <ul>
      <li>這<code translate="No">ttl</code>上述兩個步驟的值應等於或大於 DVR 窗口 - 否則 DVR 窗口將被限制為<code translate="No">ttl</code>價值</li>
      <li>同時支持http和https</li>
      <li>這<code translate="No">token_name</code>必須為 5-12 個字符，並且必須與 Akamai 中的配置相匹配</li>
      <li><code translate="No">start_time</code> is optional and can be <code translate="No">"now"</code> (the default) or an epoch time value in seconds</li>
      <li><code translate="No">end_time</code> is optional and can be an epoch time value in seconds - either <code translate="No">end_time</code> or <code translate="No">ttl</code> is required; if not specified, <code translate="No">ttl</code> is assumed to be the greater of <code translate="No">live_dvr_sliding_window_duration</code> and <code translate="No">vod_sliding_window_duration</code></li>
    </ul>
  </section>
</article>